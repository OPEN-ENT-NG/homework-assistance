var z1=Object.defineProperty;var V1=(r,e,t)=>e in r?z1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var bl=(r,e,t)=>(V1(r,typeof e!="symbol"?e+"":e,t),t);import{r as N,c as Ie,g as In,a as W1,b as fh,R as Oe,I as q1,d as wd,O as X1,u as Y1,e as Q1,f as K1}from"./react-a2531974.js";import{odeServices as Pt}from"/assets/js/edifice-ts-client/index.js";function Z1(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in r)){const n=Object.getOwnPropertyDescriptor(i,s);n&&Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const J1="modulepreload",eb=function(r){return"/appointments/"+r},Sd={},tb=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(n=>{if(n=eb(n),n in Sd)return;Sd[n]=!0;const a=n.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!i)for(let c=s.length-1;c>=0;c--){const d=s[c];if(d.href===n&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${o}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":J1,a||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),a)return new Promise((c,d)=>{u.addEventListener("load",c),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e()).catch(n=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n})};var xg={exports:{}},Fo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=N,ib=Symbol.for("react.element"),sb=Symbol.for("react.fragment"),nb=Object.prototype.hasOwnProperty,ab=rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ob={key:!0,ref:!0,__self:!0,__source:!0};function _g(r,e,t){var i,s={},n=null,a=null;t!==void 0&&(n=""+t),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)nb.call(e,i)&&!ob.hasOwnProperty(i)&&(s[i]=e[i]);if(r&&r.defaultProps)for(i in e=r.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:ib,type:r,key:n,ref:a,props:s,_owner:ab.current}}Fo.Fragment=sb;Fo.jsx=_g;Fo.jsxs=_g;xg.exports=Fo;var P=xg.exports;const lb=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12",clipRule:"evenodd"}),P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 6a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V7a1 1 0 0 1 1-1M11 16a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H12a1 1 0 0 1-1-1",clipRule:"evenodd"})]}),ub=lb,cb=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M21 5c0 .828-.711 1.5-1.588 1.5H4.588C3.711 6.5 3 5.828 3 5s.711-1.5 1.588-1.5h14.824C20.289 3.5 21 4.172 21 5M21 12c0 .828-.711 1.5-1.588 1.5H4.588C3.711 13.5 3 12.828 3 12s.711-1.5 1.588-1.5h14.824c.877 0 1.588.672 1.588 1.5M21 19c0 .828-.711 1.5-1.588 1.5H4.588C3.711 20.5 3 19.828 3 19s.711-1.5 1.588-1.5h14.824c.877 0 1.588.672 1.588 1.5",clipRule:"evenodd"})]}),hb=cb,db=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.222 4.222a1.1 1.1 0 0 1 1.556 0l14 14a1.1 1.1 0 1 1-1.556 1.556l-14-14a1.1 1.1 0 0 1 0-1.556",clipRule:"evenodd"}),P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.778 4.222a1.1 1.1 0 0 1 0 1.556l-14 14a1.1 1.1 0 1 1-1.556-1.556l14-14a1.1 1.1 0 0 1 1.556 0",clipRule:"evenodd"})]}),fb=db,pb=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-11C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1M8.293 15.707a1 1 0 0 1 0-1.414L10.586 12 8.293 9.707a1 1 0 0 1 1.414-1.414L12 10.586l2.293-2.293a1 1 0 1 1 1.414 1.414L13.414 12l2.293 2.293a1 1 0 0 1-1.414 1.414L12 13.414l-2.293 2.293a1 1 0 0 1-1.414 0",clipRule:"evenodd"})]}),mb=pb,gb=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12",clipRule:"evenodd"}),P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.01 17a1 1 0 0 1-1-1v-5a1 1 0 1 1 2 0v5a1 1 0 0 1-1 1M13.01 7.5a1 1 0 0 1-1 1H12a1 1 0 1 1 0-2h.01a1 1 0 0 1 1 1",clipRule:"evenodd"})]}),yb=gb,vb=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.672 5.558a7.96 7.96 0 0 0-9.841.397 7.95 7.95 0 0 0-1.908 9.66 7.964 7.964 0 0 0 8.949 4.12A7.95 7.95 0 0 0 19.962 12a1.021 1.021 0 1 1 2.045 0A9.994 9.994 0 0 1 7.83 21.083a10.01 10.01 0 0 1-5.634-11.027 9.99 9.99 0 0 1 9.402-8.048c2.244-.09 4.453.577 6.272 1.895a1.022 1.022 0 1 1-1.198 1.655",clipRule:"evenodd"})]}),bb=vb,xb=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.012 7.871a1.5 1.5 0 0 1 2.117.141L12 14.722l5.871-6.71a1.5 1.5 0 1 1 2.258 1.976l-7 8a1.5 1.5 0 0 1-2.258 0l-7-8a1.5 1.5 0 0 1 .141-2.117",clipRule:"evenodd"})]}),Ed=xb,_b=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 10a7 7 0 1 1 14 0 7 7 0 0 1-14 0m7-9a9 9 0 1 0 5.7 15.96 1 1 0 0 0 .24.4l4.35 4.35a1 1 0 0 0 1.42-1.42l-4.35-4.35a1 1 0 0 0-.4-.24A9 9 0 0 0 11 1",clipRule:"evenodd"})]}),wb=_b,Sb=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12",clipRule:"evenodd"}),P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.59 8.192a1 1 0 0 1 .218 1.397l-4.375 6a1 1 0 0 1-1.584.042L8.224 12.4a1 1 0 0 1 1.552-1.261l1.806 2.223 3.61-4.951a1 1 0 0 1 1.397-.219",clipRule:"evenodd"})]}),Eb=Sb;function Tb(){if(console&&console.warn){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Td={};function Nu(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];typeof e[0]=="string"&&Td[e[0]]||(typeof e[0]=="string"&&(Td[e[0]]=new Date),Tb(...e))}const wg=(r,e)=>()=>{if(r.isInitialized)e();else{const t=()=>{setTimeout(()=>{r.off("initialized",t)},0),e()};r.on("initialized",t)}};function Ad(r,e,t){r.loadNamespaces(e,wg(r,t))}function Cd(r,e,t,i){typeof t=="string"&&(t=[t]),t.forEach(s=>{r.options.ns.indexOf(s)<0&&r.options.ns.push(s)}),r.loadLanguages(e,wg(r,i))}function Ab(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.languages[0],s=e.options?e.options.fallbackLng:!1,n=e.languages[e.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=e.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(i,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(i,r)&&(!s||a(n,r)))}function Cb(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Nu("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(r,{lng:t.lng,precheck:(s,n)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!n(s.isLanguageChangingTo,r))return!1}}):Ab(r,e,t)}const Pb=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Rb={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Ib=r=>Rb[r],Mb=r=>r.replace(Pb,Ib);let Fu={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Mb};function Ob(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fu={...Fu,...r}}function Db(){return Fu}let Sg;function Lb(r){Sg=r}function Nb(){return Sg}const Fb={type:"3rdParty",init(r){Ob(r.options.react),Lb(r)}},kb=N.createContext();class Bb{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ub=(r,e)=>{const t=N.useRef();return N.useEffect(()=>{t.current=e?t.current:r},[r,e]),t.current};function Ot(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:i,defaultNS:s}=N.useContext(kb)||{},n=t||i||Nb();if(n&&!n.reportNamespaces&&(n.reportNamespaces=new Bb),!n){Nu("You will need to pass in an i18next instance by using initReactI18next");const y=(S,T)=>typeof T=="string"?T:T&&typeof T=="object"&&typeof T.defaultValue=="string"?T.defaultValue:Array.isArray(S)?S[S.length-1]:S,v=[y,{},!1];return v.t=y,v.i18n={},v.ready=!1,v}n.options.react&&n.options.react.wait!==void 0&&Nu("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Db(),...n.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let u=r||s||n.options&&n.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],n.reportNamespaces.addUsedNamespaces&&n.reportNamespaces.addUsedNamespaces(u);const c=(n.isInitialized||n.initializedStoreOnce)&&u.every(y=>Cb(y,n,a));function d(){return n.getFixedT(e.lng||null,a.nsMode==="fallback"?u:u[0],l)}const[h,f]=N.useState(d);let p=u.join();e.lng&&(p=`${e.lng}${p}`);const m=Ub(p),g=N.useRef(!0);N.useEffect(()=>{const{bindI18n:y,bindI18nStore:v}=a;g.current=!0,!c&&!o&&(e.lng?Cd(n,e.lng,u,()=>{g.current&&f(d)}):Ad(n,u,()=>{g.current&&f(d)})),c&&m&&m!==p&&g.current&&f(d);function S(){g.current&&f(d)}return y&&n&&n.on(y,S),v&&n&&n.store.on(v,S),()=>{g.current=!1,y&&n&&y.split(" ").forEach(T=>n.off(T,S)),v&&n&&v.split(" ").forEach(T=>n.store.off(T,S))}},[n,p]);const b=N.useRef(!0);N.useEffect(()=>{g.current&&!b.current&&f(d),b.current=!1},[n,l]);const x=[h,n,c];if(x.t=h,x.i18n=n,x.ready=c,c||!c&&!o)return x;throw new Promise(y=>{e.lng?Cd(n,e.lng,u,()=>y()):Ad(n,u,()=>y())})}function Eg(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=Eg(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function _e(){for(var r,e,t=0,i="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=Eg(r))&&(i&&(i+=" "),i+=e);return i}class Mn{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const an=typeof window>"u"||"Deno"in window;function ut(){}function jb(r,e){return typeof r=="function"?r(e):r}function ku(r){return typeof r=="number"&&r>=0&&r!==1/0}function Tg(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Ds(r,e,t){return ko(r)?typeof e=="function"?{...t,queryKey:r,queryFn:e}:{...e,queryKey:r}:r}function Tr(r,e,t){return ko(r)?[{...e,queryKey:r},t]:[r||{},e]}function Pd(r,e){const{type:t="all",exact:i,fetchStatus:s,predicate:n,queryKey:a,stale:o}=r;if(ko(a)){if(i){if(e.queryHash!==ph(a,e.options))return!1}else if(!Wa(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||typeof s<"u"&&s!==e.state.fetchStatus||n&&!n(e))}function Rd(r,e){const{exact:t,fetching:i,predicate:s,mutationKey:n}=r;if(ko(n)){if(!e.options.mutationKey)return!1;if(t){if(ai(e.options.mutationKey)!==ai(n))return!1}else if(!Wa(e.options.mutationKey,n))return!1}return!(typeof i=="boolean"&&e.state.status==="loading"!==i||s&&!s(e))}function ph(r,e){return((e==null?void 0:e.queryKeyHashFn)||ai)(r)}function ai(r){return JSON.stringify(r,(e,t)=>Uu(t)?Object.keys(t).sort().reduce((i,s)=>(i[s]=t[s],i),{}):t)}function Wa(r,e){return Ag(r,e)}function Ag(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Ag(r[t],e[t])):!1}function Cg(r,e){if(r===e)return r;const t=Id(r)&&Id(e);if(t||Uu(r)&&Uu(e)){const i=t?r.length:Object.keys(r).length,s=t?e:Object.keys(e),n=s.length,a=t?[]:{};let o=0;for(let l=0;l<n;l++){const u=t?l:s[l];a[u]=Cg(r[u],e[u]),a[u]===r[u]&&o++}return i===n&&o===i?r:a}return e}function Bu(r,e){if(r&&!e||e&&!r)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function Id(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Uu(r){if(!Md(r))return!1;const e=r.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!Md(t)||!t.hasOwnProperty("isPrototypeOf"))}function Md(r){return Object.prototype.toString.call(r)==="[object Object]"}function ko(r){return Array.isArray(r)}function Pg(r){return new Promise(e=>{setTimeout(e,r)})}function Od(r){Pg(0).then(r)}function $b(){if(typeof AbortController=="function")return new AbortController}function ju(r,e,t){return t.isDataEqual!=null&&t.isDataEqual(r,e)?r:typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Cg(r,e):e}class Gb extends Mn{constructor(){super(),this.setup=e=>{if(!an&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const qa=new Gb,Dd=["online","offline"];class Hb extends Mn{constructor(){super(),this.setup=e=>{if(!an&&window.addEventListener){const t=()=>e();return Dd.forEach(i=>{window.addEventListener(i,t,!1)}),()=>{Dd.forEach(i=>{window.removeEventListener(i,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setOnline(i):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Xa=new Hb;function zb(r){return Math.min(1e3*2**r,3e4)}function Bo(r){return(r??"online")==="online"?Xa.isOnline():!0}class Rg{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Oa(r){return r instanceof Rg}function Ig(r){let e=!1,t=0,i=!1,s,n,a;const o=new Promise((g,b)=>{n=g,a=b}),l=g=>{i||(f(new Rg(g)),r.abort==null||r.abort())},u=()=>{e=!0},c=()=>{e=!1},d=()=>!qa.isFocused()||r.networkMode!=="always"&&!Xa.isOnline(),h=g=>{i||(i=!0,r.onSuccess==null||r.onSuccess(g),s==null||s(),n(g))},f=g=>{i||(i=!0,r.onError==null||r.onError(g),s==null||s(),a(g))},p=()=>new Promise(g=>{s=b=>{const x=i||!d();return x&&g(b),x},r.onPause==null||r.onPause()}).then(()=>{s=void 0,i||r.onContinue==null||r.onContinue()}),m=()=>{if(i)return;let g;try{g=r.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var x,y;if(i)return;const v=(x=r.retry)!=null?x:3,S=(y=r.retryDelay)!=null?y:zb,T=typeof S=="function"?S(t,b):S,w=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,b);if(e||!w){f(b);return}t++,r.onFail==null||r.onFail(t,b),Pg(T).then(()=>{if(d())return p()}).then(()=>{e?f(b):m()})})};return Bo(r.networkMode)?m():p().then(m),{promise:o,cancel:l,continue:()=>(s==null?void 0:s())?o:Promise.resolve(),cancelRetry:u,continueRetry:c}}const mh=console;function Vb(){let r=[],e=0,t=c=>{c()},i=c=>{c()};const s=c=>{let d;e++;try{d=c()}finally{e--,e||o()}return d},n=c=>{e?r.push(c):Od(()=>{t(c)})},a=c=>(...d)=>{n(()=>{c(...d)})},o=()=>{const c=r;r=[],c.length&&Od(()=>{i(()=>{c.forEach(d=>{t(d)})})})};return{batch:s,batchCalls:a,schedule:n,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{i=c}}}const Le=Vb();class Mg{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ku(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(an?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Wb extends Mg{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||mh,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||qb(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,t){const i=ju(this.state.data,e,this.options);return this.dispatch({data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const i=this.promise;return(t=this.retryer)==null||t.cancel(e),i?i.then(ut).catch(ut):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Tg(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var i,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var n;return(n=this.retryer)==null||n.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const a=$b(),o={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};l(o);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(o)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(l(c),(i=this.options.behavior)==null||i.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=c.fetchOptions)==null?void 0:s.meta)){var d;this.dispatch({type:"fetch",meta:(d=c.fetchOptions)==null?void 0:d.meta})}const h=f=>{if(Oa(f)&&f.silent||this.dispatch({type:"error",error:f}),!Oa(f)){var p,m,g,b;(p=(m=this.cache.config).onError)==null||p.call(m,f,this),(g=(b=this.cache.config).onSettled)==null||g.call(b,this.state.data,f,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=Ig({fn:c.fetchFn,abort:a==null?void 0:a.abort.bind(a),onSuccess:f=>{var p,m,g,b;if(typeof f>"u"){h(new Error(this.queryHash+" data is undefined"));return}this.setData(f),(p=(m=this.cache.config).onSuccess)==null||p.call(m,f,this),(g=(b=this.cache.config).onSettled)==null||g.call(b,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:h,onFail:(f,p)=>{this.dispatch({type:"failed",failureCount:f,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const t=i=>{var s,n;switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:Bo(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(n=e.dataUpdatedAt)!=null?n:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return Oa(a)&&a.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),Le.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function qb(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=typeof e<"u",i=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"loading",fetchStatus:"idle"}}class Og extends Mn{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,i){var s;const n=t.queryKey,a=(s=t.queryHash)!=null?s:ph(n,t);let o=this.get(a);return o||(o=new Wb({cache:this,logger:e.getLogger(),queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(i=>i!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Le.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[i]=Tr(e,t);return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(s=>Pd(i,s))}findAll(e,t){const[i]=Tr(e,t);return Object.keys(i).length>0?this.queries.filter(s=>Pd(i,s)):this.queries}notify(e){Le.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){Le.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Le.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class Xb extends Mg{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||mh,this.observers=[],this.state=e.state||Yb(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return(e=(t=this.retryer)==null?void 0:t.continue())!=null?e:this.execute()}async execute(){const e=()=>{var w;return this.retryer=Ig({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(E,A)=>{this.dispatch({type:"failed",failureCount:E,error:A})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(w=this.options.retry)!=null?w:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t=this.state.status==="loading";try{var i,s,n,a,o,l,u,c;if(!t){var d,h,f,p;this.dispatch({type:"loading",variables:this.options.variables}),await((d=(h=this.mutationCache.config).onMutate)==null?void 0:d.call(h,this.state.variables,this));const E=await((f=(p=this.options).onMutate)==null?void 0:f.call(p,this.state.variables));E!==this.state.context&&this.dispatch({type:"loading",context:E,variables:this.state.variables})}const w=await e();return await((i=(s=this.mutationCache.config).onSuccess)==null?void 0:i.call(s,w,this.state.variables,this.state.context,this)),await((n=(a=this.options).onSuccess)==null?void 0:n.call(a,w,this.state.variables,this.state.context)),await((o=(l=this.mutationCache.config).onSettled)==null?void 0:o.call(l,w,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,w,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:w}),w}catch(w){try{var m,g,b,x,y,v,S,T;throw await((m=(g=this.mutationCache.config).onError)==null?void 0:m.call(g,w,this.state.variables,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,w,this.state.variables,this.state.context)),await((y=(v=this.mutationCache.config).onSettled)==null?void 0:y.call(v,void 0,w,this.state.variables,this.state.context,this)),await((S=(T=this.options).onSettled)==null?void 0:S.call(T,void 0,w,this.state.variables,this.state.context)),w}finally{this.dispatch({type:"error",error:w})}}}dispatch(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"loading":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Bo(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...i,...e.state}}};this.state=t(this.state),Le.batch(()=>{this.observers.forEach(i=>{i.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function Yb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Qb extends Mn{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,i){const s=new Xb({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:i,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){Le.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(t=>Rd(e,t))}findAll(e){return this.mutations.filter(t=>Rd(e,t))}notify(e){Le.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const t=this.mutations.filter(i=>i.state.isPaused);return Le.batch(()=>t.reduce((i,s)=>i.then(()=>s.continue().catch(ut)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function Kb(){return{onFetch:r=>{r.fetchFn=()=>{var e,t,i,s,n,a;const o=(e=r.fetchOptions)==null||(t=e.meta)==null?void 0:t.refetchPage,l=(i=r.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,u=l==null?void 0:l.pageParam,c=(l==null?void 0:l.direction)==="forward",d=(l==null?void 0:l.direction)==="backward",h=((n=r.state.data)==null?void 0:n.pages)||[],f=((a=r.state.data)==null?void 0:a.pageParams)||[];let p=f,m=!1;const g=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>{var w;if((w=r.signal)!=null&&w.aborted)m=!0;else{var E;(E=r.signal)==null||E.addEventListener("abort",()=>{m=!0})}return r.signal}})},b=r.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+r.options.queryHash+"'")),x=(T,w,E,A)=>(p=A?[w,...p]:[...p,w],A?[E,...T]:[...T,E]),y=(T,w,E,A)=>{if(m)return Promise.reject("Cancelled");if(typeof E>"u"&&!w&&T.length)return Promise.resolve(T);const M={queryKey:r.queryKey,pageParam:E,meta:r.options.meta};g(M);const I=b(M);return Promise.resolve(I).then(R=>x(T,E,R,A))};let v;if(!h.length)v=y([]);else if(c){const T=typeof u<"u",w=T?u:Ld(r.options,h);v=y(h,T,w)}else if(d){const T=typeof u<"u",w=T?u:Zb(r.options,h);v=y(h,T,w,!0)}else{p=[];const T=typeof r.options.getNextPageParam>"u";v=(o&&h[0]?o(h[0],0,h):!0)?y([],T,f[0]):Promise.resolve(x([],f[0],h[0]));for(let E=1;E<h.length;E++)v=v.then(A=>{if(o&&h[E]?o(h[E],E,h):!0){const I=T?f[E]:Ld(r.options,A);return y(A,T,I)}return Promise.resolve(x(A,f[E],h[E]))})}return v.then(T=>({pages:T,pageParams:p}))}}}}function Ld(r,e){return r.getNextPageParam==null?void 0:r.getNextPageParam(e[e.length-1],e)}function Zb(r,e){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(e[0],e)}class Jb{constructor(e={}){this.queryCache=e.queryCache||new Og,this.mutationCache=e.mutationCache||new Qb,this.logger=e.logger||mh,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=qa.subscribe(()=>{qa.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Xa.subscribe(()=>{Xa.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(t=this.unsubscribeOnline)==null||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[i]=Tr(e,t);return i.fetchStatus="fetching",this.queryCache.findAll(i).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var i;return(i=this.queryCache.find(e,t))==null?void 0:i.state.data}ensureQueryData(e,t,i){const s=Ds(e,t,i),n=this.getQueryData(s.queryKey);return n?Promise.resolve(n):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:i})=>{const s=i.data;return[t,s]})}setQueryData(e,t,i){const s=this.queryCache.find(e),n=s==null?void 0:s.state.data,a=jb(t,n);if(typeof a>"u")return;const o=Ds(e),l=this.defaultQueryOptions(o);return this.queryCache.build(this,l).setData(a,{...i,manual:!0})}setQueriesData(e,t,i){return Le.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,i)]))}getQueryState(e,t){var i;return(i=this.queryCache.find(e,t))==null?void 0:i.state}removeQueries(e,t){const[i]=Tr(e,t),s=this.queryCache;Le.batch(()=>{s.findAll(i).forEach(n=>{s.remove(n)})})}resetQueries(e,t,i){const[s,n]=Tr(e,t,i),a=this.queryCache,o={type:"active",...s};return Le.batch(()=>(a.findAll(s).forEach(l=>{l.reset()}),this.refetchQueries(o,n)))}cancelQueries(e,t,i){const[s,n={}]=Tr(e,t,i);typeof n.revert>"u"&&(n.revert=!0);const a=Le.batch(()=>this.queryCache.findAll(s).map(o=>o.cancel(n)));return Promise.all(a).then(ut).catch(ut)}invalidateQueries(e,t,i){const[s,n]=Tr(e,t,i);return Le.batch(()=>{var a,o;if(this.queryCache.findAll(s).forEach(u=>{u.invalidate()}),s.refetchType==="none")return Promise.resolve();const l={...s,type:(a=(o=s.refetchType)!=null?o:s.type)!=null?a:"active"};return this.refetchQueries(l,n)})}refetchQueries(e,t,i){const[s,n]=Tr(e,t,i),a=Le.batch(()=>this.queryCache.findAll(s).filter(l=>!l.isDisabled()).map(l=>{var u;return l.fetch(void 0,{...n,cancelRefetch:(u=n==null?void 0:n.cancelRefetch)!=null?u:!0,meta:{refetchPage:s.refetchPage}})}));let o=Promise.all(a).then(ut);return n!=null&&n.throwOnError||(o=o.catch(ut)),o}fetchQuery(e,t,i){const s=Ds(e,t,i),n=this.defaultQueryOptions(s);typeof n.retry>"u"&&(n.retry=!1);const a=this.queryCache.build(this,n);return a.isStaleByTime(n.staleTime)?a.fetch(n):Promise.resolve(a.state.data)}prefetchQuery(e,t,i){return this.fetchQuery(e,t,i).then(ut).catch(ut)}fetchInfiniteQuery(e,t,i){const s=Ds(e,t,i);return s.behavior=Kb(),this.fetchQuery(s)}prefetchInfiniteQuery(e,t,i){return this.fetchInfiniteQuery(e,t,i).then(ut).catch(ut)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const i=this.queryDefaults.find(s=>ai(e)===ai(s.queryKey));i?i.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(i=>Wa(e,i.queryKey));return t==null?void 0:t.defaultOptions}setMutationDefaults(e,t){const i=this.mutationDefaults.find(s=>ai(e)===ai(s.mutationKey));i?i.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(i=>Wa(e,i.mutationKey));return t==null?void 0:t.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=ph(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.useErrorBoundary>"u"&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class ex extends Mn{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Nd(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $u(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $u(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const i=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Bu(i,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),this.updateQuery();const n=this.hasListeners();n&&Fd(this.currentQuery,s,this.options,i)&&this.executeFetch(),this.updateResult(t),n&&(this.currentQuery!==s||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&this.updateStaleTimeout();const a=this.computeRefetchInterval();n&&(this.currentQuery!==s||this.options.enabled!==i.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),i=this.createResult(t,e);return rx(this,i,e)&&(this.currentResult=i,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),i}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(i=>{Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(i),e[i])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),i=this.client.getQueryCache().build(this.client,t);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ut)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),an||this.currentResult.isStale||!ku(this.options.staleTime))return;const t=Tg(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(an||this.options.enabled===!1||!ku(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||qa.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const i=this.currentQuery,s=this.options,n=this.currentResult,a=this.currentResultState,o=this.currentResultOptions,l=e!==i,u=l?e.state:this.currentQueryInitialState,c=l?this.currentResult:this.previousQueryResult,{state:d}=e;let{dataUpdatedAt:h,error:f,errorUpdatedAt:p,fetchStatus:m,status:g}=d,b=!1,x=!1,y;if(t._optimisticResults){const E=this.hasListeners(),A=!E&&Nd(e,t),M=E&&Fd(e,i,t,s);(A||M)&&(m=Bo(e.options.networkMode)?"fetching":"paused",h||(g="loading")),t._optimisticResults==="isRestoring"&&(m="idle")}if(t.keepPreviousData&&!d.dataUpdatedAt&&c!=null&&c.isSuccess&&g!=="error")y=c.data,h=c.dataUpdatedAt,g=c.status,b=!0;else if(t.select&&typeof d.data<"u")if(n&&d.data===(a==null?void 0:a.data)&&t.select===this.selectFn)y=this.selectResult;else try{this.selectFn=t.select,y=t.select(d.data),y=ju(n==null?void 0:n.data,y,t),this.selectResult=y,this.selectError=null}catch(E){this.selectError=E}else y=d.data;if(typeof t.placeholderData<"u"&&typeof y>"u"&&g==="loading"){let E;if(n!=null&&n.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData))E=n.data;else if(E=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof E<"u")try{E=t.select(E),this.selectError=null}catch(A){this.selectError=A}typeof E<"u"&&(g="success",y=ju(n==null?void 0:n.data,E,t),x=!0)}this.selectError&&(f=this.selectError,y=this.selectResult,p=Date.now(),g="error");const v=m==="fetching",S=g==="loading",T=g==="error";return{status:g,fetchStatus:m,isLoading:S,isSuccess:g==="success",isError:T,isInitialLoading:S&&v,data:y,dataUpdatedAt:h,error:f,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!S,isLoadingError:T&&d.dataUpdatedAt===0,isPaused:m==="paused",isPlaceholderData:x,isPreviousData:b,isRefetchError:T&&d.dataUpdatedAt!==0,isStale:gh(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Bu(i,t))return;this.currentResult=i;const s={cache:!0},n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!this.trackedProps.size)return!0;const l=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&l.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==t[c]&&l.has(c)})};(e==null?void 0:e.listeners)!==!1&&n()&&(s.listeners=!0),this.notify({...s,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!Oa(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){Le.batch(()=>{if(e.onSuccess){var t,i,s,n;(t=(i=this.options).onSuccess)==null||t.call(i,this.currentResult.data),(s=(n=this.options).onSettled)==null||s.call(n,this.currentResult.data,null)}else if(e.onError){var a,o,l,u;(a=(o=this.options).onError)==null||a.call(o,this.currentResult.error),(l=(u=this.options).onSettled)==null||l.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function tx(r,e){return e.enabled!==!1&&!r.state.dataUpdatedAt&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Nd(r,e){return tx(r,e)||r.state.dataUpdatedAt>0&&$u(r,e,e.refetchOnMount)}function $u(r,e,t){if(e.enabled!==!1){const i=typeof t=="function"?t(r):t;return i==="always"||i!==!1&&gh(r,e)}return!1}function Fd(r,e,t,i){return t.enabled!==!1&&(r!==e||i.enabled===!1)&&(!t.suspense||r.state.status!=="error")&&gh(r,t)}function gh(r,e){return r.isStaleByTime(e.staleTime)}function rx(r,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:!Bu(r.getCurrentResult(),e)}var Dg={exports:{}},Lg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os=N;function ix(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var sx=typeof Object.is=="function"?Object.is:ix,nx=os.useState,ax=os.useEffect,ox=os.useLayoutEffect,lx=os.useDebugValue;function ux(r,e){var t=e(),i=nx({inst:{value:t,getSnapshot:e}}),s=i[0].inst,n=i[1];return ox(function(){s.value=t,s.getSnapshot=e,xl(s)&&n({inst:s})},[r,t,e]),ax(function(){return xl(s)&&n({inst:s}),r(function(){xl(s)&&n({inst:s})})},[r]),lx(t),t}function xl(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!sx(r,t)}catch{return!0}}function cx(r,e){return e()}var hx=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cx:ux;Lg.useSyncExternalStore=os.useSyncExternalStore!==void 0?os.useSyncExternalStore:hx;Dg.exports=Lg;var dx=Dg.exports;const fx=dx.useSyncExternalStore,kd=N.createContext(void 0),Ng=N.createContext(!1);function Fg(r,e){return r||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=kd),window.ReactQueryClientContext):kd)}const px=({context:r}={})=>{const e=N.useContext(Fg(r,N.useContext(Ng)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mx=({client:r,children:e,context:t,contextSharing:i=!1})=>{N.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]);const s=Fg(t,i);return N.createElement(Ng.Provider,{value:!t&&i},N.createElement(s.Provider,{value:r},e))},kg=N.createContext(!1),gx=()=>N.useContext(kg);kg.Provider;function yx(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}const vx=N.createContext(yx()),bx=()=>N.useContext(vx);function xx(r,e){return typeof r=="function"?r(...e):!!r}const _x=(r,e)=>{(r.suspense||r.useErrorBoundary)&&(e.isReset()||(r.retryOnMount=!1))},wx=r=>{N.useEffect(()=>{r.clearReset()},[r])},Sx=({result:r,errorResetBoundary:e,useErrorBoundary:t,query:i})=>r.isError&&!e.isReset()&&!r.isFetching&&xx(t,[r.error,i]),Ex=r=>{r.suspense&&typeof r.staleTime!="number"&&(r.staleTime=1e3)},Tx=(r,e)=>r.isLoading&&r.isFetching&&!e,Ax=(r,e,t)=>(r==null?void 0:r.suspense)&&Tx(e,t),Cx=(r,e,t)=>e.fetchOptimistic(r).then(({data:i})=>{r.onSuccess==null||r.onSuccess(i),r.onSettled==null||r.onSettled(i,null)}).catch(i=>{t.clearReset(),r.onError==null||r.onError(i),r.onSettled==null||r.onSettled(void 0,i)});function Px(r,e){const t=px({context:r.context}),i=gx(),s=bx(),n=t.defaultQueryOptions(r);n._optimisticResults=i?"isRestoring":"optimistic",n.onError&&(n.onError=Le.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=Le.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=Le.batchCalls(n.onSettled)),Ex(n),_x(n,s),wx(s);const[a]=N.useState(()=>new e(t,n)),o=a.getOptimisticResult(n);if(fx(N.useCallback(l=>{const u=i?()=>{}:a.subscribe(Le.batchCalls(l));return a.updateResult(),u},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),N.useEffect(()=>{a.setOptions(n,{listeners:!1})},[n,a]),Ax(n,o,i))throw Cx(n,a,s);if(Sx({result:o,errorResetBoundary:s,useErrorBoundary:n.useErrorBoundary,query:a.getCurrentQuery()}))throw o.error;return n.notifyOnChangeProps?o:a.trackResult(o)}function Bg(r,e,t){const i=Ds(r,e,t);return Px(i,ex)}var Ug={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(Ie,function(){var t=1e3,i=6e4,s=36e5,n="millisecond",a="second",o="minute",l="hour",u="day",c="week",d="month",h="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var C=["th","st","nd","rd"],D=_%100;return"["+_+(C[(D-20)%10]||C[D]||C[0])+"]"}},y=function(_,C,D){var k=String(_);return!k||k.length>=C?_:""+Array(C+1-k.length).join(D)+_},v={s:y,z:function(_){var C=-_.utcOffset(),D=Math.abs(C),k=Math.floor(D/60),L=D%60;return(C<=0?"+":"-")+y(k,2,"0")+":"+y(L,2,"0")},m:function _(C,D){if(C.date()<D.date())return-_(D,C);var k=12*(D.year()-C.year())+(D.month()-C.month()),L=C.clone().add(k,d),B=D-L<0,F=C.clone().add(k+(B?-1:1),d);return+(-(k+(D-L)/(B?L-F:F-L))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:d,y:f,w:c,d:u,D:p,h:l,m:o,s:a,ms:n,Q:h}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},S="en",T={};T[S]=x;var w="$isDayjsObject",E=function(_){return _ instanceof O||!(!_||!_[w])},A=function _(C,D,k){var L;if(!C)return S;if(typeof C=="string"){var B=C.toLowerCase();T[B]&&(L=B),D&&(T[B]=D,L=B);var F=C.split("-");if(!L&&F.length>1)return _(F[0])}else{var U=C.name;T[U]=C,L=U}return!k&&L&&(S=L),L||!k&&S},M=function(_,C){if(E(_))return _.clone();var D=typeof C=="object"?C:{};return D.date=_,D.args=arguments,new O(D)},I=v;I.l=A,I.i=E,I.w=function(_,C){return M(_,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var O=function(){function _(D){this.$L=A(D.locale,null,!0),this.parse(D),this.$x=this.$x||D.x||{},this[w]=!0}var C=_.prototype;return C.parse=function(D){this.$d=function(k){var L=k.date,B=k.utc;if(L===null)return new Date(NaN);if(I.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var F=L.match(g);if(F){var U=F[2]-1||0,$=(F[7]||"0").substring(0,3);return B?new Date(Date.UTC(F[1],U,F[3]||1,F[4]||0,F[5]||0,F[6]||0,$)):new Date(F[1],U,F[3]||1,F[4]||0,F[5]||0,F[6]||0,$)}}return new Date(L)}(D),this.init()},C.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},C.$utils=function(){return I},C.isValid=function(){return this.$d.toString()!==m},C.isSame=function(D,k){var L=M(D);return this.startOf(k)<=L&&L<=this.endOf(k)},C.isAfter=function(D,k){return M(D)<this.startOf(k)},C.isBefore=function(D,k){return this.endOf(k)<M(D)},C.$g=function(D,k,L){return I.u(D)?this[k]:this.set(L,D)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(D,k){var L=this,B=!!I.u(k)||k,F=I.p(D),U=function(de,re){var le=I.w(L.$u?Date.UTC(L.$y,re,de):new Date(L.$y,re,de),L);return B?le:le.endOf(u)},$=function(de,re){return I.w(L.toDate()[de].apply(L.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(re)),L)},z=this.$W,q=this.$M,K=this.$D,ue="set"+(this.$u?"UTC":"");switch(F){case f:return B?U(1,0):U(31,11);case d:return B?U(1,q):U(0,q+1);case c:var se=this.$locale().weekStart||0,ge=(z<se?z+7:z)-se;return U(B?K-ge:K+(6-ge),q);case u:case p:return $(ue+"Hours",0);case l:return $(ue+"Minutes",1);case o:return $(ue+"Seconds",2);case a:return $(ue+"Milliseconds",3);default:return this.clone()}},C.endOf=function(D){return this.startOf(D,!1)},C.$set=function(D,k){var L,B=I.p(D),F="set"+(this.$u?"UTC":""),U=(L={},L[u]=F+"Date",L[p]=F+"Date",L[d]=F+"Month",L[f]=F+"FullYear",L[l]=F+"Hours",L[o]=F+"Minutes",L[a]=F+"Seconds",L[n]=F+"Milliseconds",L)[B],$=B===u?this.$D+(k-this.$W):k;if(B===d||B===f){var z=this.clone().set(p,1);z.$d[U]($),z.init(),this.$d=z.set(p,Math.min(this.$D,z.daysInMonth())).$d}else U&&this.$d[U]($);return this.init(),this},C.set=function(D,k){return this.clone().$set(D,k)},C.get=function(D){return this[I.p(D)]()},C.add=function(D,k){var L,B=this;D=Number(D);var F=I.p(k),U=function(q){var K=M(B);return I.w(K.date(K.date()+Math.round(q*D)),B)};if(F===d)return this.set(d,this.$M+D);if(F===f)return this.set(f,this.$y+D);if(F===u)return U(1);if(F===c)return U(7);var $=(L={},L[o]=i,L[l]=s,L[a]=t,L)[F]||1,z=this.$d.getTime()+D*$;return I.w(z,this)},C.subtract=function(D,k){return this.add(-1*D,k)},C.format=function(D){var k=this,L=this.$locale();if(!this.isValid())return L.invalidDate||m;var B=D||"YYYY-MM-DDTHH:mm:ssZ",F=I.z(this),U=this.$H,$=this.$m,z=this.$M,q=L.weekdays,K=L.months,ue=L.meridiem,se=function(re,le,pe,ve){return re&&(re[le]||re(k,B))||pe[le].slice(0,ve)},ge=function(re){return I.s(U%12||12,re,"0")},de=ue||function(re,le,pe){var ve=re<12?"AM":"PM";return pe?ve.toLowerCase():ve};return B.replace(b,function(re,le){return le||function(pe){switch(pe){case"YY":return String(k.$y).slice(-2);case"YYYY":return I.s(k.$y,4,"0");case"M":return z+1;case"MM":return I.s(z+1,2,"0");case"MMM":return se(L.monthsShort,z,K,3);case"MMMM":return se(K,z);case"D":return k.$D;case"DD":return I.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return se(L.weekdaysMin,k.$W,q,2);case"ddd":return se(L.weekdaysShort,k.$W,q,3);case"dddd":return q[k.$W];case"H":return String(U);case"HH":return I.s(U,2,"0");case"h":return ge(1);case"hh":return ge(2);case"a":return de(U,$,!0);case"A":return de(U,$,!1);case"m":return String($);case"mm":return I.s($,2,"0");case"s":return String(k.$s);case"ss":return I.s(k.$s,2,"0");case"SSS":return I.s(k.$ms,3,"0");case"Z":return F}return null}(re)||F.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(D,k,L){var B,F=this,U=I.p(k),$=M(D),z=($.utcOffset()-this.utcOffset())*i,q=this-$,K=function(){return I.m(F,$)};switch(U){case f:B=K()/12;break;case d:B=K();break;case h:B=K()/3;break;case c:B=(q-z)/6048e5;break;case u:B=(q-z)/864e5;break;case l:B=q/s;break;case o:B=q/i;break;case a:B=q/t;break;default:B=q}return L?B:I.a(B)},C.daysInMonth=function(){return this.endOf(d).$D},C.$locale=function(){return T[this.$L]},C.locale=function(D,k){if(!D)return this.$L;var L=this.clone(),B=A(D,k,!0);return B&&(L.$L=B),L},C.clone=function(){return I.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},_}(),R=O.prototype;return M.prototype=R,[["$ms",n],["$s",a],["$m",o],["$H",l],["$W",u],["$M",d],["$y",f],["$D",p]].forEach(function(_){R[_[1]]=function(C){return this.$g(C,_[0],_[1])}}),M.extend=function(_,C){return _.$i||(_(C,O,M),_.$i=!0),M},M.locale=A,M.isDayjs=E,M.unix=function(_){return M(1e3*_)},M.en=T[S],M.Ls=T,M.p={},M})})(Ug);var Rx=Ug.exports;const jr=In(Rx);var Bd={exports:{}};(function(r,e){(function(t,i){var s="1.0.36",n="",a="?",o="function",l="undefined",u="object",c="string",d="major",h="model",f="name",p="type",m="vendor",g="version",b="architecture",x="console",y="mobile",v="tablet",S="smarttv",T="wearable",w="embedded",E=350,A="Amazon",M="Apple",I="ASUS",O="BlackBerry",R="Browser",_="Chrome",C="Edge",D="Firefox",k="Google",L="Huawei",B="LG",F="Microsoft",U="Motorola",$="Opera",z="Samsung",q="Sharp",K="Sony",ue="Xiaomi",se="Zebra",ge="Facebook",de="Chromium OS",re="Mac OS",le=function(me,xe){var ne={};for(var we in me)xe[we]&&xe[we].length%2===0?ne[we]=xe[we].concat(me[we]):ne[we]=me[we];return ne},pe=function(me){for(var xe={},ne=0;ne<me.length;ne++)xe[me[ne].toUpperCase()]=me[ne];return xe},ve=function(me,xe){return typeof me===c?Me(xe).indexOf(Me(me))!==-1:!1},Me=function(me){return me.toLowerCase()},We=function(me){return typeof me===c?me.replace(/[^\d\.]/g,n).split(".")[0]:i},rr=function(me,xe){if(typeof me===c)return me=me.replace(/^\s\s*/,n),typeof xe===l?me:me.substring(0,E)},qr=function(me,xe){for(var ne=0,we,br,Lt,be,ee,Nt;ne<xe.length&&!ee;){var vl=xe[ne],_d=xe[ne+1];for(we=br=0;we<vl.length&&!ee&&vl[we];)if(ee=vl[we++].exec(me),ee)for(Lt=0;Lt<_d.length;Lt++)Nt=ee[++br],be=_d[Lt],typeof be===u&&be.length>0?be.length===2?typeof be[1]==o?this[be[0]]=be[1].call(this,Nt):this[be[0]]=be[1]:be.length===3?typeof be[1]===o&&!(be[1].exec&&be[1].test)?this[be[0]]=Nt?be[1].call(this,Nt,be[2]):i:this[be[0]]=Nt?Nt.replace(be[1],be[2]):i:be.length===4&&(this[be[0]]=Nt?be[3].call(this,Nt.replace(be[1],be[2])):i):this[be]=Nt||i;ne+=2}},vr=function(me,xe){for(var ne in xe)if(typeof xe[ne]===u&&xe[ne].length>0){for(var we=0;we<xe[ne].length;we++)if(ve(xe[ne][we],me))return ne===a?i:ne}else if(ve(xe[ne],me))return ne===a?i:ne;return me},H1={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},bd={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},xd={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,g],[/opios[\/ ]+([\w\.]+)/i],[g,[f,$+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[f,$]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[f,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+R],g],[/\bfocus\/([\w\.]+)/i],[g,[f,D+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[f,$+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[f,$+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[f,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[g,[f,D]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+R]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+R],g],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,ge],g],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[f,_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,_+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[f,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[g,vr,H1]],[/(webkit|khtml)\/([\w\.]+)/i],[f,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[f,D+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,g],[/(cobalt)\/([\w\.]+)/i],[f,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,Me]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,n,Me]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,Me]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[m,z],[p,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[m,z],[p,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[m,M],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[m,M],[p,v]],[/(macintosh);/i],[h,[m,M]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[m,q],[p,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[m,L],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[m,L],[p,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[m,ue],[p,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[m,ue],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[m,"OPPO"],[p,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[m,"Vivo"],[p,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[m,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[m,U],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[m,U],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[m,B],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[m,B],[p,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[m,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[m,"Nokia"],[p,y]],[/(pixel c)\b/i],[h,[m,k],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[m,k],[p,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[m,K],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[m,K],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[m,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[m,A],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[m,A],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[h,m,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[m,O],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[m,I],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[m,I],[p,y]],[/(nexus 9)/i],[h,[m,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[h,/_/g," "],[p,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[m,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[m,"Meizu"],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,h,[p,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,h,[p,v]],[/(surface duo)/i],[h,[m,F],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[m,"Fairphone"],[p,y]],[/(u304aa)/i],[h,[m,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[h,[m,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[h,[m,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[h,[m,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[h,[m,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[m,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[h,[m,"NuVision"],[p,v]],[/\b(k88) b/i],[h,[m,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[h,[m,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[h,[m,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[h,[m,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[h,[m,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],h,[p,v]],[/\b(ns-?\w{0,9}) b/i],[h,[m,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[m,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],h,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],h,[p,y]],[/\b(ph-1) /i],[h,[m,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[m,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[h,[m,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[h,[m,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[h,[m,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[m,h,[p,y]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[m,F],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[m,se],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[m,se],[p,y]],[/smart-tv.+(samsung)/i],[m,[p,S]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[m,z],[p,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,B],[p,S]],[/(apple) ?tv/i],[m,[h,M+" TV"],[p,S]],[/crkey/i],[[h,_+"cast"],[m,k],[p,S]],[/droid.+aft(\w+)( bui|\))/i],[h,[m,A],[p,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[m,q],[p,S]],[/(bravia[\w ]+)( bui|\))/i],[h,[m,K],[p,S]],[/(mitv-\w{5}) bui/i],[h,[m,ue],[p,S]],[/Hbbtv.*(technisat) (.*);/i],[m,h,[p,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,rr],[h,rr],[p,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,h,[p,x]],[/droid.+; (shield) bui/i],[h,[m,"Nvidia"],[p,x]],[/(playstation [345portablevi]+)/i],[h,[m,K],[p,x]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[m,F],[p,x]],[/((pebble))app/i],[m,h,[p,T]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[m,M],[p,T]],[/droid.+; (glass) \d/i],[h,[m,k],[p,T]],[/droid.+; (wt63?0{2,3})\)/i],[h,[m,se],[p,T]],[/(quest( 2| pro)?)/i],[h,[m,ge],[p,T]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,w]],[/(aeobc)\b/i],[h,[m,A],[p,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[f,C+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[g,vr,bd]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[g,vr,bd]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,re],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,g],[/\(bb(10);/i],[g,[f,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[f,D+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[f,_+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,de],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,g],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,g]]},yt=function(me,xe){if(typeof me===u&&(xe=me,me=i),!(this instanceof yt))return new yt(me,xe).getResult();var ne=typeof t!==l&&t.navigator?t.navigator:i,we=me||(ne&&ne.userAgent?ne.userAgent:n),br=ne&&ne.userAgentData?ne.userAgentData:i,Lt=xe?le(xd,xe):xd,be=ne&&ne.userAgent==we;return this.getBrowser=function(){var ee={};return ee[f]=i,ee[g]=i,qr.call(ee,we,Lt.browser),ee[d]=We(ee[g]),be&&ne&&ne.brave&&typeof ne.brave.isBrave==o&&(ee[f]="Brave"),ee},this.getCPU=function(){var ee={};return ee[b]=i,qr.call(ee,we,Lt.cpu),ee},this.getDevice=function(){var ee={};return ee[m]=i,ee[h]=i,ee[p]=i,qr.call(ee,we,Lt.device),be&&!ee[p]&&br&&br.mobile&&(ee[p]=y),be&&ee[h]=="Macintosh"&&ne&&typeof ne.standalone!==l&&ne.maxTouchPoints&&ne.maxTouchPoints>2&&(ee[h]="iPad",ee[p]=v),ee},this.getEngine=function(){var ee={};return ee[f]=i,ee[g]=i,qr.call(ee,we,Lt.engine),ee},this.getOS=function(){var ee={};return ee[f]=i,ee[g]=i,qr.call(ee,we,Lt.os),be&&!ee[f]&&br&&br.platform!="Unknown"&&(ee[f]=br.platform.replace(/chrome os/i,de).replace(/macos/i,re)),ee},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return we},this.setUA=function(ee){return we=typeof ee===c&&ee.length>E?rr(ee,E):ee,this},this.setUA(we),this};yt.VERSION=s,yt.BROWSER=pe([f,g,d]),yt.CPU=pe([b]),yt.DEVICE=pe([h,m,p,x,y,S,v,T,w]),yt.ENGINE=yt.OS=pe([f,g]),r.exports&&(e=r.exports=yt),e.UAParser=yt;var Ci=typeof t!==l&&(t.jQuery||t.Zepto);if(Ci&&!Ci.ua){var Vn=new yt;Ci.ua=Vn.getResult(),Ci.ua.get=function(){return Vn.getUA()},Ci.ua.set=function(me){Vn.setUA(me);var xe=Vn.getResult();for(var ne in xe)Ci.ua[ne]=xe[ne]}}})(typeof window=="object"?window:Ie)})(Bd,Bd.exports);const Ix=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M19.935 17.51q1.088 0 1.868.792.78.794.78 1.898 0 1.106-.78 1.898-.78.793-1.844.793t-1.869-.793a2.52 2.52 0 0 1-.78-1.922q0-.432.19-.936l-3.997-2.931q-1.16 1.2-2.79 1.2-1.633 0-2.791-1.176-1.16-1.177-1.183-2.86 0-.215.071-.624l-3.168-1.057a1.25 1.25 0 0 1-.852.337q-.567 0-.946-.385a1.32 1.32 0 0 1-.378-.96q0-.578.378-.938.38-.36.946-.384.474 0 .804.312.33.313.45.745l3.192 1.08a3.8 3.8 0 0 1 1.443-1.56 3.84 3.84 0 0 1 2.033-.577q1.23 0 2.27.745l4.706-4.781q-.378-.72-.378-1.321 0-1.106.78-1.898.78-.793 1.869-.793t1.844.793q.758.792.78 1.898a2.42 2.42 0 0 1-.78 1.873q-.804.77-1.868.793-.616 0-1.3-.408l-4.707 4.805q.734 1.056.733 2.306 0 .888-.402 1.753l3.997 2.907q.78-.624 1.679-.624"})]}),Mx=Ix,Ox=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M22.996 13.153q0 2.09-.873 3.987a10.6 10.6 0 0 1-2.336 3.292q-1.462 1.393-3.516 2.21t-4.26.817-4.287-.817-3.49-2.21a12.3 12.3 0 0 1-2.362-3.291A8.1 8.1 0 0 1 1 13.153q0-2.451 1.155-4.589t3.234-3.627q.616-.433 1.386-.337t1.181.673q.462.553.36 1.273-.104.72-.72 1.13a7 7 0 0 0-2.155 2.426 6.38 6.38 0 0 0-.18 5.717 7 7 0 0 0 1.566 2.186q.975.913 2.335 1.466a7.5 7.5 0 0 0 2.85.552 7.3 7.3 0 0 0 2.823-.552 8.3 8.3 0 0 0 2.36-1.466 6.04 6.04 0 0 0 1.567-2.186q.538-1.274.564-2.666 0-1.635-.77-3.051T16.4 7.675a1.75 1.75 0 0 1-.719-1.129q-.128-.697.36-1.273.436-.577 1.206-.673t1.36.337q2.079 1.466 3.234 3.627a9.6 9.6 0 0 1 1.155 4.589M13.833 2.846v8.6q0 .698-.54 1.202-.538.505-1.283.505t-1.309-.505q-.564-.505-.539-1.201v-8.6q0-.697.54-1.202.538-.504 1.308-.504t1.284.504.539 1.201"})]}),Ud=Ox,Dx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M20.584 13.536v7.458q0 .42-.294.699a1.06 1.06 0 0 1-.667.307H13.91v-5.978h-3.817V22H4.383a.85.85 0 0 1-.668-.307 1.16 1.16 0 0 1-.293-.699v-7.569l8.567-7.375 8.568 7.375q.027.027.027.111m3.31-1.09-.908 1.146a.54.54 0 0 1-.32.168h-.054a.6.6 0 0 1-.32-.084L11.989 4.682 1.687 13.676a.5.5 0 0 1-.347.084.54.54 0 0 1-.32-.168l-.935-1.145a.52.52 0 0 1-.08-.363.6.6 0 0 1 .16-.335l10.703-9.33q.48-.42 1.121-.419.64 0 1.148.419l3.63 3.156V2.56q0-.224.133-.363a.46.46 0 0 1 .347-.14h2.856q.214 0 .347.14a.5.5 0 0 1 .134.363v6.34l3.256 2.85q.16.111.16.335 0 .223-.107.363"})]}),Lx=Dx,Nx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M1.898 22.555c-.072-.145-.096-1.37-.048-2.691l.048-2.402h5.261v5.26l-2.595.049c-1.994.048-2.594 0-2.666-.216m7.76 0c-.049-.145-.073-1.37-.049-2.691l.072-2.402h5.238v5.26l-2.571.049c-2.018.048-2.595 0-2.69-.216m7.759 0c-.048-.145-.072-1.37-.048-2.691l.072-2.402h5.237v5.26l-2.57.049c-1.994.048-2.595 0-2.691-.216m-15.52-7.76c-.071-.168-.095-1.37-.047-2.69l.048-2.403h5.261v5.261l-2.595.048c-1.994.048-2.594 0-2.666-.216m7.76 0c-.048-.168-.072-1.37-.048-2.69l.072-2.403h5.238v5.261l-2.571.048c-2.018.048-2.595 0-2.69-.216m7.76 0c-.048-.168-.072-1.37-.048-2.69l.072-2.403h5.237v5.261l-2.57.048c-1.994.048-2.595 0-2.691-.216M1.897 7.011c-.071-.144-.095-1.345-.047-2.666l.048-2.402h5.261V7.18l-2.595.072c-1.994.048-2.594 0-2.666-.24m7.76 0c-.048-.144-.072-1.345-.048-2.666l.072-2.402h5.238V7.18l-2.571.072c-2.018.048-2.595 0-2.69-.24m7.76 0c-.048-.144-.072-1.345-.048-2.666l.072-2.402h5.237V7.18l-2.57.072c-1.994.048-2.595 0-2.691-.24"})]}),jd=Nx,Fx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12M7.123 7.667C8.276 5.958 9.745 5 12.013 5 14.425 5 17 6.941 17 9.5c0 2.113-1.377 2.932-2.418 3.552-.633.376-1.142.68-1.142 1.154v.169a.693.693 0 0 1-.682.703h-2.06a.693.693 0 0 1-.681-.703v-.287c0-1.768 1.269-2.5 2.266-3.075l.073-.042c.863-.499 1.392-.838 1.392-1.499 0-.874-1.082-1.454-1.956-1.454-1.112 0-1.64.53-2.351 1.449a.67.67 0 0 1-.945.121L7.27 8.63a.72.72 0 0 1-.147-.963M9.76 17.97c0-1.12.883-2.03 1.969-2.03 1.085 0 1.968.91 1.968 2.03S12.814 20 11.73 20c-1.086 0-1.969-.91-1.969-2.03",clipRule:"evenodd"})]}),kx=Fx,Bx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"m.5 21.257 7.46-8.216 4.052 2.403 4.052-2.403 7.46 8.216zm0-2.738V8.573l5.848 3.531zm0-12.084V3.048h23.024v3.387l-11.512 6.847zm17.176 5.67 5.848-3.532v9.946z"})]}),$d=Bx,Ux=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M13.07 13.07V6.54h-2.14v6.53zm0 4.4v-2.2h-2.14v2.2zM24 12l-2.65 3.01.35 4.04-3.93.86-2.04 3.48L12 21.8l-3.73 1.6-2.04-3.42-3.93-.92.35-4.04L0 12l2.65-3.06-.35-3.99 3.93-.86L8.27.6 12 2.2 15.73.6l2.04 3.48 3.93.86L21.34 9z"})]}),jx=Ux,$x=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M11.685 2C8.66 2 6.7 3.277 5.164 5.556A.96.96 0 0 0 5.36 6.84l1.634 1.278a.89.89 0 0 0 1.26-.162c.95-1.226 1.653-1.932 3.136-1.932 1.165 0 2.607.773 2.607 1.939 0 .88-.705 1.333-1.856 1.998-1.342.776-3.118 1.742-3.118 4.157v.382c0 .518.407.938.909.938h2.746c.502 0 .91-.42.91-.938v-.226c0-1.674 4.745-1.743 4.745-6.274 0-3.412-3.432-6-6.648-6m-.38 14.588c-1.447 0-2.625 1.214-2.625 2.706S9.858 22 11.305 22s2.624-1.214 2.624-2.706-1.177-2.706-2.624-2.706"})]}),Gx=$x,Hx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.051 12.366a456 456 0 0 1-2.746-1.822A6.5 6.5 0 0 1 .74 9.067q-.737-.94-.737-1.745a2.7 2.7 0 0 1 .141-.905c.098-.286.242-.542.424-.752Q1.12 5 2.15 5h19.7c.541-.016 1.071.195 1.507.6q.636.6.636 1.446 0 1.01-.657 1.93a6.2 6.2 0 0 1-1.632 1.567q-5.037 3.338-6.267 4.156l-.242.167-.323.222q-.436.303-.724.487-.288.183-.696.415a4 4 0 0 1-.77.345 2.2 2.2 0 0 1-.67.115h-.026a2.2 2.2 0 0 1-.67-.116 4 4 0 0 1-.77-.344q-.41-.23-.697-.415a30 30 0 0 1-.723-.487q-.433-.3-.565-.389-1.215-.817-3.51-2.334m10.943 3.962q2.276-1.578 6.667-4.416c.478-.306.927-.68 1.339-1.113v10.16q0 .845-.63 1.446c-.437.405-.97.614-1.512.594H2.149c-.545.02-1.08-.192-1.52-.601C.21 21.996 0 21.52 0 20.95V10.8c.416.437.871.81 1.356 1.113q4.848 3.148 6.656 4.416.768.537 1.243.837a7.7 7.7 0 0 0 1.265.614c.475.198.97.303 1.47.313h.026c.5-.01.995-.115 1.47-.313a7.7 7.7 0 0 0 1.265-.614q.48-.3 1.243-.837",clipRule:"evenodd"})]}),zx=Hx,Vx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("g",{clipPath:"url(#one-profile_svg__a)",children:P.jsx("path",{fill:"currentColor",d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24m0 4.65a4.26 4.26 0 1 1 0 8.51 4.26 4.26 0 0 1 0-8.51m0 16.64a9.27 9.27 0 0 1-7.09-3.3 5.4 5.4 0 0 1 4.77-2.9c.11 0 .23.03.34.06.63.2 1.29.33 1.98.33.7 0 1.35-.13 1.98-.33.11-.03.23-.05.34-.05a5.4 5.4 0 0 1 4.77 2.89 9.27 9.27 0 0 1-7.09 3.3"})}),P.jsx("defs",{children:P.jsx("clipPath",{id:"one-profile_svg__a",children:P.jsx("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}),Wx=Vx,qx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M1.27 11.552a7.75 7.75 0 0 1 0-4.156Q1.84 5.33 3.42 3.792a7.9 7.9 0 0 1 2.716-1.777q1.53-.6 3.161-.6 1.605 0 3.136.6 1.53.6 2.716 1.777a7.9 7.9 0 0 1 1.902 2.86 7.8 7.8 0 0 1 .518 3.29 7.65 7.65 0 0 1-.889 3.171q.692.192 1.21.697l4.297 4.156q.864.84.864 2.042t-.864 2.042-2.099.841-2.099-.84l-4.272-4.18a2.42 2.42 0 0 1-.74-1.178 8.3 8.3 0 0 1-3.68.84q-1.63 0-3.16-.6a8.1 8.1 0 0 1-2.717-1.753 7.85 7.85 0 0 1-2.149-3.628m2.495-2.066q0 2.235 1.605 3.796 1.63 1.56 3.926 1.561 2.272 0 3.877-1.561 1.605-1.562 1.63-3.796t-1.63-3.796q-1.63-1.585-3.877-1.585-2.272 0-3.926 1.585-1.605 1.561-1.605 3.796"})]}),Xx=qx,Yx=({title:r,titleId:e,...t})=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true","aria-labelledby":e,...t,children:[r?P.jsx("title",{id:e,children:r}):null,P.jsx("path",{fill:"currentColor",d:"M0 24.58V.53h24.05v4.28h-2.62V7.1h2.62v4.28h-2.62v2.35h2.62V18h-2.62v2.3h2.62v4.29H0zm4.64-6.85h12.12V14l-4.5-2.67q.9-.46 1.4-1.3t.53-1.85q0-1.4-1.01-2.43T10.7 4.72 8.25 5.75 7.24 8.18q0 1.03.53 1.85t1.4 1.3L4.63 14v3.73z"})]}),Qx=Yx;var Si=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Si||{}),jg=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(jg||{}),Gu=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Gu||{}),J=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(J||{}),Wt=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Wt||{}),G=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(G||{}),Qi=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(Qi||{}),Z=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Z||{}),V=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(V||{}),lr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(lr||{}),Lr=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Lr||{}),Qt=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(Qt||{}),et=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(et||{}),zt=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(zt||{}),yh=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(yh||{}),ft=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(ft||{}),ke=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(ke||{}),De=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(De||{}),Xt=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Xt||{});const Kx={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},W={ADAPTER:Kx,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var _l=/iPhone/i,Gd=/iPod/i,Hd=/iPad/i,zd=/\biOS-universal(?:.+)Mac\b/i,wl=/\bAndroid(?:.+)Mobile\b/i,Vd=/Android/i,Pi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Wn=/Silk/i,ir=/Windows Phone/i,Wd=/\bWindows(?:.+)ARM\b/i,qd=/BlackBerry/i,Xd=/BB10/i,Yd=/Opera Mini/i,Qd=/\b(CriOS|Chrome)(?:.+)Mobile/i,Kd=/Mobile(?:.+)Firefox\b/i,Zd=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function Zx(r){return function(e){return e.test(r)}}function Jd(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var s=Zx(t),n={apple:{phone:s(_l)&&!s(ir),ipod:s(Gd),tablet:!s(_l)&&(s(Hd)||Zd(e))&&!s(ir),universal:s(zd),device:(s(_l)||s(Gd)||s(Hd)||s(zd)||Zd(e))&&!s(ir)},amazon:{phone:s(Pi),tablet:!s(Pi)&&s(Wn),device:s(Pi)||s(Wn)},android:{phone:!s(ir)&&s(Pi)||!s(ir)&&s(wl),tablet:!s(ir)&&!s(Pi)&&!s(wl)&&(s(Wn)||s(Vd)),device:!s(ir)&&(s(Pi)||s(Wn)||s(wl)||s(Vd))||s(/\bokhttp\b/i)},windows:{phone:s(ir),tablet:s(Wd),device:s(ir)||s(Wd)},other:{blackberry:s(qd),blackberry10:s(Xd),opera:s(Yd),firefox:s(Kd),chrome:s(Qd),device:s(qd)||s(Xd)||s(Yd)||s(Kd)||s(Qd)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const Jx=Jd.default??Jd,ur=Jx(globalThis.navigator);W.RETINA_PREFIX=/@([0-9\.]+)x/;W.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var $g={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function n(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new s(c,d||l,h),p=t?t+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=t?t+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},o.prototype.listenerCount=function(u){var c=t?t+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,h,f,p){var m=t?t+u:u;if(!this._events[m])return!1;var g=this._events[m],b=arguments.length,x,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,h),!0;case 5:return g.fn.call(g.context,c,d,h,f),!0;case 6:return g.fn.call(g.context,c,d,h,f,p),!0}for(y=1,x=new Array(b-1);y<b;y++)x[y-1]=arguments[y];g.fn.apply(g.context,x)}else{var v=g.length,S;for(y=0;y<v;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),b){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,c);break;case 3:g[y].fn.call(g[y].context,c,d);break;case 4:g[y].fn.call(g[y].context,c,d,h);break;default:if(!x)for(S=1,x=new Array(b-1);S<b;S++)x[S-1]=arguments[S];g[y].fn.apply(g[y].context,x)}}return!0},o.prototype.on=function(u,c,d){return n(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return n(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,h){var f=t?t+u:u;if(!this._events[f])return this;if(!c)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!d||p.context===d)&&a(this,f);else{for(var m=0,g=[],b=p.length;m<b;m++)(p[m].fn!==c||h&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:a(this,f)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=t?t+u:u,this._events[c]&&a(this,c)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})($g);var e_=$g.exports;const On=In(e_);var vh={exports:{}};vh.exports=Uo;vh.exports.default=Uo;function Uo(r,e,t){t=t||2;var i=e&&e.length,s=i?e[0]*t:r.length,n=Gg(r,0,s,t,!0),a=[];if(!n||n.next===n.prev)return a;var o,l,u,c,d,h,f;if(i&&(n=n_(r,e,n,t)),r.length>80*t){o=u=r[0],l=c=r[1];for(var p=t;p<s;p+=t)d=r[p],h=r[p+1],d<o&&(o=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);f=Math.max(u-o,c-l),f=f!==0?32767/f:0}return on(n,a,t,o,l,f,0),a}function Gg(r,e,t,i,s){var n,a;if(s===Vu(r,e,t,i)>0)for(n=e;n<t;n+=i)a=ef(n,r[n],r[n+1],a);else for(n=t-i;n>=e;n-=i)a=ef(n,r[n],r[n+1],a);return a&&jo(a,a.next)&&(un(a),a=a.next),a}function mi(r,e){if(!r)return r;e||(e=r);var t=r,i;do if(i=!1,!t.steiner&&(jo(t,t.next)||Ae(t.prev,t,t.next)===0)){if(un(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function on(r,e,t,i,s,n,a){if(r){!a&&n&&c_(r,i,s,n);for(var o=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,n?r_(r,i,s,n):t_(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),un(r),r=u.next,o=u.next;continue}if(r=u,r===o){a?a===1?(r=i_(mi(r),e,t),on(r,e,t,i,s,n,2)):a===2&&s_(r,e,t,i,s,n):on(mi(r),e,t,i,s,n,1);break}}}}function t_(r){var e=r.prev,t=r,i=r.next;if(Ae(e,t,i)>=0)return!1;for(var s=e.x,n=t.x,a=i.x,o=e.y,l=t.y,u=i.y,c=s<n?s<a?s:a:n<a?n:a,d=o<l?o<u?o:u:l<u?l:u,h=s>n?s>a?s:a:n>a?n:a,f=o>l?o>u?o:u:l>u?l:u,p=i.next;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&Wi(s,o,n,l,a,u,p.x,p.y)&&Ae(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function r_(r,e,t,i){var s=r.prev,n=r,a=r.next;if(Ae(s,n,a)>=0)return!1;for(var o=s.x,l=n.x,u=a.x,c=s.y,d=n.y,h=a.y,f=o<l?o<u?o:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,m=o>l?o>u?o:u:l>u?l:u,g=c>d?c>h?c:h:d>h?d:h,b=Hu(f,p,e,t,i),x=Hu(m,g,e,t,i),y=r.prevZ,v=r.nextZ;y&&y.z>=b&&v&&v.z<=x;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==s&&y!==a&&Wi(o,c,l,d,u,h,y.x,y.y)&&Ae(y.prev,y,y.next)>=0||(y=y.prevZ,v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==s&&v!==a&&Wi(o,c,l,d,u,h,v.x,v.y)&&Ae(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;y&&y.z>=b;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==s&&y!==a&&Wi(o,c,l,d,u,h,y.x,y.y)&&Ae(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;v&&v.z<=x;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=g&&v!==s&&v!==a&&Wi(o,c,l,d,u,h,v.x,v.y)&&Ae(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function i_(r,e,t){var i=r;do{var s=i.prev,n=i.next.next;!jo(s,n)&&Hg(s,i,i.next,n)&&ln(s,n)&&ln(n,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(n.i/t|0),un(i),un(i.next),i=r=n),i=i.next}while(i!==r);return mi(i)}function s_(r,e,t,i,s,n){var a=r;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&f_(a,o)){var l=zg(a,o);a=mi(a,a.next),l=mi(l,l.next),on(a,e,t,i,s,n,0),on(l,e,t,i,s,n,0);return}o=o.next}a=a.next}while(a!==r)}function n_(r,e,t,i){var s=[],n,a,o,l,u;for(n=0,a=e.length;n<a;n++)o=e[n]*i,l=n<a-1?e[n+1]*i:r.length,u=Gg(r,o,l,i,!1),u===u.next&&(u.steiner=!0),s.push(d_(u));for(s.sort(a_),n=0;n<s.length;n++)t=o_(s[n],t);return t}function a_(r,e){return r.x-e.x}function o_(r,e){var t=l_(r,e);if(!t)return e;var i=zg(t,r);return mi(i,i.next),mi(t,t.next)}function l_(r,e){var t=e,i=r.x,s=r.y,n=-1/0,a;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){var o=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=i&&o>n&&(n=o,a=t.x<t.next.x?t:t.next,o===i))return a}t=t.next}while(t!==e);if(!a)return null;var l=a,u=a.x,c=a.y,d=1/0,h;t=a;do i>=t.x&&t.x>=u&&i!==t.x&&Wi(s<c?i:n,s,u,c,s<c?n:i,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(i-t.x),ln(t,r)&&(h<d||h===d&&(t.x>a.x||t.x===a.x&&u_(a,t)))&&(a=t,d=h)),t=t.next;while(t!==l);return a}function u_(r,e){return Ae(r.prev,r,e.prev)<0&&Ae(e.next,r,r.next)<0}function c_(r,e,t,i){var s=r;do s.z===0&&(s.z=Hu(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,h_(s)}function h_(r){var e,t,i,s,n,a,o,l,u=1;do{for(t=r,r=null,n=null,a=0;t;){for(a++,i=t,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,o--):(s=i,i=i.nextZ,l--),n?n.nextZ=s:r=s,s.prevZ=n,n=s;t=i}n.nextZ=null,u*=2}while(a>1);return r}function Hu(r,e,t,i,s){return r=(r-t)*s|0,e=(e-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function d_(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Wi(r,e,t,i,s,n,a,o){return(s-a)*(e-o)>=(r-a)*(n-o)&&(r-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(n-o)>=(s-a)*(i-o)}function f_(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!p_(r,e)&&(ln(r,e)&&ln(e,r)&&m_(r,e)&&(Ae(r.prev,r,e.prev)||Ae(r,e.prev,e))||jo(r,e)&&Ae(r.prev,r,r.next)>0&&Ae(e.prev,e,e.next)>0)}function Ae(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function jo(r,e){return r.x===e.x&&r.y===e.y}function Hg(r,e,t,i){var s=Xn(Ae(r,e,t)),n=Xn(Ae(r,e,i)),a=Xn(Ae(t,i,r)),o=Xn(Ae(t,i,e));return!!(s!==n&&a!==o||s===0&&qn(r,t,e)||n===0&&qn(r,i,e)||a===0&&qn(t,r,i)||o===0&&qn(t,e,i))}function qn(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Xn(r){return r>0?1:r<0?-1:0}function p_(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&Hg(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function ln(r,e){return Ae(r.prev,r,r.next)<0?Ae(r,e,r.next)>=0&&Ae(r,r.prev,e)>=0:Ae(r,e,r.prev)<0||Ae(r,r.next,e)<0}function m_(r,e){var t=r,i=!1,s=(r.x+e.x)/2,n=(r.y+e.y)/2;do t.y>n!=t.next.y>n&&t.next.y!==t.y&&s<(t.next.x-t.x)*(n-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function zg(r,e){var t=new zu(r.i,r.x,r.y),i=new zu(e.i,e.x,e.y),s=r.next,n=e.prev;return r.next=e,e.prev=r,t.next=s,s.prev=t,i.next=t,t.prev=i,n.next=i,i.prev=n,i}function ef(r,e,t,i){var s=new zu(r,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function un(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function zu(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Uo.deviation=function(r,e,t,i){var s=e&&e.length,n=s?e[0]*t:r.length,a=Math.abs(Vu(r,0,n,t));if(s)for(var o=0,l=e.length;o<l;o++){var u=e[o]*t,c=o<l-1?e[o+1]*t:r.length;a-=Math.abs(Vu(r,u,c,t))}var d=0;for(o=0;o<i.length;o+=3){var h=i[o]*t,f=i[o+1]*t,p=i[o+2]*t;d+=Math.abs((r[h]-r[p])*(r[f+1]-r[h+1])-(r[h]-r[f])*(r[p+1]-r[h+1]))}return a===0&&d===0?0:Math.abs((d-a)/a)};function Vu(r,e,t,i){for(var s=0,n=e,a=t-i;n<t;n+=i)s+=(r[a]-r[n])*(r[n+1]+r[a+1]),a=n;return s}Uo.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,s=0;s<r.length;s++){for(var n=0;n<r[s].length;n++)for(var a=0;a<e;a++)t.vertices.push(r[s][n][a]);s>0&&(i+=r[s-1].length,t.holes.push(i))}return t};var g_=vh.exports;const y_=In(g_);var Ya={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Ya.exports;(function(r,e){(function(t){var i=e&&!e.nodeType&&e,s=r&&!r.nodeType&&r,n=typeof Ie=="object"&&Ie;(n.global===n||n.window===n||n.self===n)&&(t=n);var a,o=2147483647,l=36,u=1,c=26,d=38,h=700,f=72,p=128,m="-",g=/^xn--/,b=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=l-u,S=Math.floor,T=String.fromCharCode,w;function E(F){throw new RangeError(y[F])}function A(F,U){for(var $=F.length,z=[];$--;)z[$]=U(F[$]);return z}function M(F,U){var $=F.split("@"),z="";$.length>1&&(z=$[0]+"@",F=$[1]),F=F.replace(x,".");var q=F.split("."),K=A(q,U).join(".");return z+K}function I(F){for(var U=[],$=0,z=F.length,q,K;$<z;)q=F.charCodeAt($++),q>=55296&&q<=56319&&$<z?(K=F.charCodeAt($++),(K&64512)==56320?U.push(((q&1023)<<10)+(K&1023)+65536):(U.push(q),$--)):U.push(q);return U}function O(F){return A(F,function(U){var $="";return U>65535&&(U-=65536,$+=T(U>>>10&1023|55296),U=56320|U&1023),$+=T(U),$}).join("")}function R(F){return F-48<10?F-22:F-65<26?F-65:F-97<26?F-97:l}function _(F,U){return F+22+75*(F<26)-((U!=0)<<5)}function C(F,U,$){var z=0;for(F=$?S(F/h):F>>1,F+=S(F/U);F>v*c>>1;z+=l)F=S(F/v);return S(z+(v+1)*F/(F+d))}function D(F){var U=[],$=F.length,z,q=0,K=p,ue=f,se,ge,de,re,le,pe,ve,Me,We;for(se=F.lastIndexOf(m),se<0&&(se=0),ge=0;ge<se;++ge)F.charCodeAt(ge)>=128&&E("not-basic"),U.push(F.charCodeAt(ge));for(de=se>0?se+1:0;de<$;){for(re=q,le=1,pe=l;de>=$&&E("invalid-input"),ve=R(F.charCodeAt(de++)),(ve>=l||ve>S((o-q)/le))&&E("overflow"),q+=ve*le,Me=pe<=ue?u:pe>=ue+c?c:pe-ue,!(ve<Me);pe+=l)We=l-Me,le>S(o/We)&&E("overflow"),le*=We;z=U.length+1,ue=C(q-re,z,re==0),S(q/z)>o-K&&E("overflow"),K+=S(q/z),q%=z,U.splice(q++,0,K)}return O(U)}function k(F){var U,$,z,q,K,ue,se,ge,de,re,le,pe=[],ve,Me,We,rr;for(F=I(F),ve=F.length,U=p,$=0,K=f,ue=0;ue<ve;++ue)le=F[ue],le<128&&pe.push(T(le));for(z=q=pe.length,q&&pe.push(m);z<ve;){for(se=o,ue=0;ue<ve;++ue)le=F[ue],le>=U&&le<se&&(se=le);for(Me=z+1,se-U>S((o-$)/Me)&&E("overflow"),$+=(se-U)*Me,U=se,ue=0;ue<ve;++ue)if(le=F[ue],le<U&&++$>o&&E("overflow"),le==U){for(ge=$,de=l;re=de<=K?u:de>=K+c?c:de-K,!(ge<re);de+=l)rr=ge-re,We=l-re,pe.push(T(_(re+rr%We,0))),ge=S(rr/We);pe.push(T(_(ge,0))),K=C($,Me,z==q),$=0,++z}++$,++U}return pe.join("")}function L(F){return M(F,function(U){return g.test(U)?D(U.slice(4).toLowerCase()):U})}function B(F){return M(F,function(U){return b.test(U)?"xn--"+k(U):U})}if(a={version:"1.4.1",ucs2:{decode:I,encode:O},decode:D,encode:k,toASCII:B,toUnicode:L},i&&s)if(r.exports==i)s.exports=a;else for(w in a)a.hasOwnProperty(w)&&(i[w]=a[w]);else t.punycode=a})(Ie)})(Ya,Ya.exports);var v_=Ya.exports,b_=Error,x_=EvalError,__=RangeError,w_=ReferenceError,Vg=SyntaxError,Dn=TypeError,S_=URIError,E_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var n=Object.getOwnPropertySymbols(e);if(n.length!==1||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==s||a.enumerable!==!0)return!1}return!0},tf=typeof Symbol<"u"&&Symbol,T_=E_,A_=function(){return typeof tf!="function"||typeof Symbol!="function"||typeof tf("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:T_()},Sl={__proto__:null,foo:{}},C_=Object,P_=function(){return{__proto__:Sl}.foo===Sl.foo&&!(Sl instanceof C_)},R_="Function.prototype.bind called on incompatible ",I_=Object.prototype.toString,M_=Math.max,O_="[object Function]",rf=function(e,t){for(var i=[],s=0;s<e.length;s+=1)i[s]=e[s];for(var n=0;n<t.length;n+=1)i[n+e.length]=t[n];return i},D_=function(e,t){for(var i=[],s=t||0,n=0;s<e.length;s+=1,n+=1)i[n]=e[s];return i},L_=function(r,e){for(var t="",i=0;i<r.length;i+=1)t+=r[i],i+1<r.length&&(t+=e);return t},N_=function(e){var t=this;if(typeof t!="function"||I_.apply(t)!==O_)throw new TypeError(R_+t);for(var i=D_(arguments,1),s,n=function(){if(this instanceof s){var c=t.apply(this,rf(i,arguments));return Object(c)===c?c:this}return t.apply(e,rf(i,arguments))},a=M_(0,t.length-i.length),o=[],l=0;l<a;l++)o[l]="$"+l;if(s=Function("binder","return function ("+L_(o,",")+"){ return binder.apply(this,arguments); }")(n),t.prototype){var u=function(){};u.prototype=t.prototype,s.prototype=new u,u.prototype=null}return s},F_=N_,bh=Function.prototype.bind||F_,k_=Function.prototype.call,B_=Object.prototype.hasOwnProperty,U_=bh,j_=U_.call(k_,B_),fe,$_=b_,G_=x_,H_=__,z_=w_,ls=Vg,Ki=Dn,V_=S_,Wg=Function,El=function(r){try{return Wg('"use strict"; return ('+r+").constructor;")()}catch{}},ui=Object.getOwnPropertyDescriptor;if(ui)try{ui({},"")}catch{ui=null}var Tl=function(){throw new Ki},W_=ui?function(){try{return arguments.callee,Tl}catch{try{return ui(arguments,"callee").get}catch{return Tl}}}():Tl,Ri=A_(),q_=P_(),Be=Object.getPrototypeOf||(q_?function(r){return r.__proto__}:null),Ui={},X_=typeof Uint8Array>"u"||!Be?fe:Be(Uint8Array),ci={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?fe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?fe:ArrayBuffer,"%ArrayIteratorPrototype%":Ri&&Be?Be([][Symbol.iterator]()):fe,"%AsyncFromSyncIteratorPrototype%":fe,"%AsyncFunction%":Ui,"%AsyncGenerator%":Ui,"%AsyncGeneratorFunction%":Ui,"%AsyncIteratorPrototype%":Ui,"%Atomics%":typeof Atomics>"u"?fe:Atomics,"%BigInt%":typeof BigInt>"u"?fe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?fe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?fe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?fe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$_,"%eval%":eval,"%EvalError%":G_,"%Float32Array%":typeof Float32Array>"u"?fe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?fe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?fe:FinalizationRegistry,"%Function%":Wg,"%GeneratorFunction%":Ui,"%Int8Array%":typeof Int8Array>"u"?fe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?fe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?fe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ri&&Be?Be(Be([][Symbol.iterator]())):fe,"%JSON%":typeof JSON=="object"?JSON:fe,"%Map%":typeof Map>"u"?fe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ri||!Be?fe:Be(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?fe:Promise,"%Proxy%":typeof Proxy>"u"?fe:Proxy,"%RangeError%":H_,"%ReferenceError%":z_,"%Reflect%":typeof Reflect>"u"?fe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?fe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ri||!Be?fe:Be(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?fe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ri&&Be?Be(""[Symbol.iterator]()):fe,"%Symbol%":Ri?Symbol:fe,"%SyntaxError%":ls,"%ThrowTypeError%":W_,"%TypedArray%":X_,"%TypeError%":Ki,"%Uint8Array%":typeof Uint8Array>"u"?fe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?fe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?fe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?fe:Uint32Array,"%URIError%":V_,"%WeakMap%":typeof WeakMap>"u"?fe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?fe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?fe:WeakSet};if(Be)try{null.error}catch(r){var Y_=Be(Be(r));ci["%Error.prototype%"]=Y_}var Q_=function r(e){var t;if(e==="%AsyncFunction%")t=El("async function () {}");else if(e==="%GeneratorFunction%")t=El("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=El("async function* () {}");else if(e==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&Be&&(t=Be(s.prototype))}return ci[e]=t,t},sf={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ln=bh,Qa=j_,K_=Ln.call(Function.call,Array.prototype.concat),Z_=Ln.call(Function.apply,Array.prototype.splice),nf=Ln.call(Function.call,String.prototype.replace),Ka=Ln.call(Function.call,String.prototype.slice),J_=Ln.call(Function.call,RegExp.prototype.exec),ew=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tw=/\\(\\)?/g,rw=function(e){var t=Ka(e,0,1),i=Ka(e,-1);if(t==="%"&&i!=="%")throw new ls("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new ls("invalid intrinsic syntax, expected opening `%`");var s=[];return nf(e,ew,function(n,a,o,l){s[s.length]=o?nf(l,tw,"$1"):a||n}),s},iw=function(e,t){var i=e,s;if(Qa(sf,i)&&(s=sf[i],i="%"+s[0]+"%"),Qa(ci,i)){var n=ci[i];if(n===Ui&&(n=Q_(i)),typeof n>"u"&&!t)throw new Ki("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:n}}throw new ls("intrinsic "+e+" does not exist!")},ps=function(e,t){if(typeof e!="string"||e.length===0)throw new Ki("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Ki('"allowMissing" argument must be a boolean');if(J_(/^%?[^%]*%?$/,e)===null)throw new ls("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=rw(e),s=i.length>0?i[0]:"",n=iw("%"+s+"%",t),a=n.name,o=n.value,l=!1,u=n.alias;u&&(s=u[0],Z_(i,K_([0,1],u)));for(var c=1,d=!0;c<i.length;c+=1){var h=i[c],f=Ka(h,0,1),p=Ka(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new ls("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),s+="."+h,a="%"+s+"%",Qa(ci,a))o=ci[a];else if(o!=null){if(!(h in o)){if(!t)throw new Ki("base intrinsic for "+e+" exists, but the property is not available.");return}if(ui&&c+1>=i.length){var m=ui(o,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?o=m.get:o=o[h]}else d=Qa(o,h),o=o[h];d&&!l&&(ci[a]=o)}}return o},qg={exports:{}},Al,af;function xh(){if(af)return Al;af=1;var r=ps,e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Al=e,Al}var sw=ps,Da=sw("%Object.getOwnPropertyDescriptor%",!0);if(Da)try{Da([],"length")}catch{Da=null}var Xg=Da,of=xh(),nw=Vg,Ii=Dn,lf=Xg,aw=function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new Ii("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Ii("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ii("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ii("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ii("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ii("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,l=!!lf&&lf(e,t);if(of)of(e,t,{configurable:a===null&&l?l.configurable:!a,enumerable:s===null&&l?l.enumerable:!s,value:i,writable:n===null&&l?l.writable:!n});else if(o||!s&&!n&&!a)e[t]=i;else throw new nw("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Wu=xh(),Yg=function(){return!!Wu};Yg.hasArrayLengthDefineBug=function(){if(!Wu)return null;try{return Wu([],"length",{value:1}).length!==1}catch{return!0}};var ow=Yg,lw=ps,uf=aw,uw=ow(),cf=Xg,hf=Dn,cw=lw("%Math.floor%"),hw=function(e,t){if(typeof e!="function")throw new hf("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||cw(t)!==t)throw new hf("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],s=!0,n=!0;if("length"in e&&cf){var a=cf(e,"length");a&&!a.configurable&&(s=!1),a&&!a.writable&&(n=!1)}return(s||n||!i)&&(uw?uf(e,"length",t,!0,!0):uf(e,"length",t)),e};(function(r){var e=bh,t=ps,i=hw,s=Dn,n=t("%Function.prototype.apply%"),a=t("%Function.prototype.call%"),o=t("%Reflect.apply%",!0)||e.call(a,n),l=xh(),u=t("%Math.max%");r.exports=function(h){if(typeof h!="function")throw new s("a function is required");var f=o(e,a,arguments);return i(f,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return o(e,n,arguments)};l?l(r.exports,"apply",{value:c}):r.exports.apply=c})(qg);var dw=qg.exports,Qg=ps,Kg=dw,fw=Kg(Qg("String.prototype.indexOf")),pw=function(e,t){var i=Qg(e,!!t);return typeof i=="function"&&fw(e,".prototype.")>-1?Kg(i):i};const mw={},gw=Object.freeze(Object.defineProperty({__proto__:null,default:mw},Symbol.toStringTag,{value:"Module"})),yw=W1(gw);var _h=typeof Map=="function"&&Map.prototype,Cl=Object.getOwnPropertyDescriptor&&_h?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Za=_h&&Cl&&typeof Cl.get=="function"?Cl.get:null,df=_h&&Map.prototype.forEach,wh=typeof Set=="function"&&Set.prototype,Pl=Object.getOwnPropertyDescriptor&&wh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ja=wh&&Pl&&typeof Pl.get=="function"?Pl.get:null,ff=wh&&Set.prototype.forEach,vw=typeof WeakMap=="function"&&WeakMap.prototype,Ws=vw?WeakMap.prototype.has:null,bw=typeof WeakSet=="function"&&WeakSet.prototype,qs=bw?WeakSet.prototype.has:null,xw=typeof WeakRef=="function"&&WeakRef.prototype,pf=xw?WeakRef.prototype.deref:null,_w=Boolean.prototype.valueOf,ww=Object.prototype.toString,Sw=Function.prototype.toString,Ew=String.prototype.match,Sh=String.prototype.slice,Pr=String.prototype.replace,Tw=String.prototype.toUpperCase,mf=String.prototype.toLowerCase,Zg=RegExp.prototype.test,gf=Array.prototype.concat,Vt=Array.prototype.join,Aw=Array.prototype.slice,yf=Math.floor,qu=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Rl=Object.getOwnPropertySymbols,Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,us=typeof Symbol=="function"&&typeof Symbol.iterator=="object",qe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===us||"symbol")?Symbol.toStringTag:null,Jg=Object.prototype.propertyIsEnumerable,vf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function bf(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Zg.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-yf(-r):yf(r);if(i!==r){var s=String(i),n=Sh.call(e,s.length+1);return Pr.call(s,t,"$&_")+"."+Pr.call(Pr.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pr.call(e,t,"$&_")}var Yu=yw,xf=Yu.custom,_f=ry(xf)?xf:null,ey={__proto__:null,double:'"',single:"'"},Cw={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Pw=function r(e,t,i,s){var n=t||{};if(ar(n,"quoteStyle")&&!ar(ey,n.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ar(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=ar(n,"customInspect")?n.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ar(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ar(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=n.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return sy(e,n);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return o?bf(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return o?bf(e,u):u}var c=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof e=="object")return Qu(e)?"[Array]":"[Object]";var d=Ww(n,i);if(typeof s>"u")s=[];else if(iy(s,e)>=0)return"[Circular]";function h(R,_,C){if(_&&(s=Aw.call(s),s.push(_)),C){var D={depth:n.depth};return ar(n,"quoteStyle")&&(D.quoteStyle=n.quoteStyle),r(R,D,i+1,s)}return r(R,n,i+1,s)}if(typeof e=="function"&&!wf(e)){var f=kw(e),p=Yn(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+Vt.call(p,", ")+" }":"")}if(ry(e)){var m=us?Pr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Xu.call(e);return typeof e=="object"&&!us?bs(m):m}if(Hw(e)){for(var g="<"+mf.call(String(e.nodeName)),b=e.attributes||[],x=0;x<b.length;x++)g+=" "+b[x].name+"="+ty(Rw(b[x].value),"double",n);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+mf.call(String(e.nodeName))+">",g}if(Qu(e)){if(e.length===0)return"[]";var y=Yn(e,h);return d&&!Vw(y)?"["+Ku(y,d)+"]":"[ "+Vt.call(y,", ")+" ]"}if(Mw(e)){var v=Yn(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!Jg.call(e,"cause")?"{ ["+String(e)+"] "+Vt.call(gf.call("[cause]: "+h(e.cause),v),", ")+" }":v.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Vt.call(v,", ")+" }"}if(typeof e=="object"&&a){if(_f&&typeof e[_f]=="function"&&Yu)return Yu(e,{depth:c-i});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Bw(e)){var S=[];return df&&df.call(e,function(R,_){S.push(h(_,e,!0)+" => "+h(R,e))}),Sf("Map",Za.call(e),S,d)}if($w(e)){var T=[];return ff&&ff.call(e,function(R){T.push(h(R,e))}),Sf("Set",Ja.call(e),T,d)}if(Uw(e))return Il("WeakMap");if(Gw(e))return Il("WeakSet");if(jw(e))return Il("WeakRef");if(Dw(e))return bs(h(Number(e)));if(Nw(e))return bs(h(qu.call(e)));if(Lw(e))return bs(_w.call(e));if(Ow(e))return bs(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Ie<"u"&&e===Ie)return"{ [object globalThis] }";if(!Iw(e)&&!wf(e)){var w=Yn(e,h),E=vf?vf(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",M=!E&&qe&&Object(e)===e&&qe in e?Sh.call($r(e),8,-1):A?"Object":"",I=E||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",O=I+(M||A?"["+Vt.call(gf.call([],M||[],A||[]),": ")+"] ":"");return w.length===0?O+"{}":d?O+"{"+Ku(w,d)+"}":O+"{ "+Vt.call(w,", ")+" }"}return String(e)};function ty(r,e,t){var i=t.quoteStyle||e,s=ey[i];return s+r+s}function Rw(r){return Pr.call(String(r),/"/g,"&quot;")}function Qu(r){return $r(r)==="[object Array]"&&(!qe||!(typeof r=="object"&&qe in r))}function Iw(r){return $r(r)==="[object Date]"&&(!qe||!(typeof r=="object"&&qe in r))}function wf(r){return $r(r)==="[object RegExp]"&&(!qe||!(typeof r=="object"&&qe in r))}function Mw(r){return $r(r)==="[object Error]"&&(!qe||!(typeof r=="object"&&qe in r))}function Ow(r){return $r(r)==="[object String]"&&(!qe||!(typeof r=="object"&&qe in r))}function Dw(r){return $r(r)==="[object Number]"&&(!qe||!(typeof r=="object"&&qe in r))}function Lw(r){return $r(r)==="[object Boolean]"&&(!qe||!(typeof r=="object"&&qe in r))}function ry(r){if(us)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Xu)return!1;try{return Xu.call(r),!0}catch{}return!1}function Nw(r){if(!r||typeof r!="object"||!qu)return!1;try{return qu.call(r),!0}catch{}return!1}var Fw=Object.prototype.hasOwnProperty||function(r){return r in this};function ar(r,e){return Fw.call(r,e)}function $r(r){return ww.call(r)}function kw(r){if(r.name)return r.name;var e=Ew.call(Sw.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function iy(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1}function Bw(r){if(!Za||!r||typeof r!="object")return!1;try{Za.call(r);try{Ja.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function Uw(r){if(!Ws||!r||typeof r!="object")return!1;try{Ws.call(r,Ws);try{qs.call(r,qs)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function jw(r){if(!pf||!r||typeof r!="object")return!1;try{return pf.call(r),!0}catch{}return!1}function $w(r){if(!Ja||!r||typeof r!="object")return!1;try{Ja.call(r);try{Za.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function Gw(r){if(!qs||!r||typeof r!="object")return!1;try{qs.call(r,qs);try{Ws.call(r,Ws)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Hw(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function sy(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,i="... "+t+" more character"+(t>1?"s":"");return sy(Sh.call(r,0,e.maxStringLength),e)+i}var s=Cw[e.quoteStyle||"single"];s.lastIndex=0;var n=Pr.call(Pr.call(r,s,"\\$1"),/[\x00-\x1f]/g,zw);return ty(n,"single",e)}function zw(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Tw.call(e.toString(16))}function bs(r){return"Object("+r+")"}function Il(r){return r+" { ? }"}function Sf(r,e,t,i){var s=i?Ku(t,i):Vt.call(t,", ");return r+" ("+e+") {"+s+"}"}function Vw(r){for(var e=0;e<r.length;e++)if(iy(r[e],`
`)>=0)return!1;return!0}function Ww(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=Vt.call(Array(r.indent+1)," ");else return null;return{base:t,prev:Vt.call(Array(e+1),t)}}function Ku(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+Vt.call(r,","+t)+`
`+e.prev}function Yn(r,e){var t=Qu(r),i=[];if(t){i.length=r.length;for(var s=0;s<r.length;s++)i[s]=ar(r,s)?e(r[s],r):""}var n=typeof Rl=="function"?Rl(r):[],a;if(us){a={};for(var o=0;o<n.length;o++)a["$"+n[o]]=n[o]}for(var l in r)ar(r,l)&&(t&&String(Number(l))===l&&l<r.length||us&&a["$"+l]instanceof Symbol||(Zg.call(/[^\w$]/,l)?i.push(e(l,r)+": "+e(r[l],r)):i.push(l+": "+e(r[l],r))));if(typeof Rl=="function")for(var u=0;u<n.length;u++)Jg.call(r,n[u])&&i.push("["+e(n[u])+"]: "+e(r[n[u]],r));return i}var ny=ps,ms=pw,qw=Pw,Xw=Dn,Qn=ny("%WeakMap%",!0),Kn=ny("%Map%",!0),Yw=ms("WeakMap.prototype.get",!0),Qw=ms("WeakMap.prototype.set",!0),Kw=ms("WeakMap.prototype.has",!0),Zw=ms("Map.prototype.get",!0),Jw=ms("Map.prototype.set",!0),eS=ms("Map.prototype.has",!0),Eh=function(r,e){for(var t=r,i;(i=t.next)!==null;t=i)if(i.key===e)return t.next=i.next,i.next=r.next,r.next=i,i},tS=function(r,e){var t=Eh(r,e);return t&&t.value},rS=function(r,e,t){var i=Eh(r,e);i?i.value=t:r.next={key:e,next:r.next,value:t}},iS=function(r,e){return!!Eh(r,e)},sS=function(){var e,t,i,s={assert:function(n){if(!s.has(n))throw new Xw("Side channel does not contain "+qw(n))},get:function(n){if(Qn&&n&&(typeof n=="object"||typeof n=="function")){if(e)return Yw(e,n)}else if(Kn){if(t)return Zw(t,n)}else if(i)return tS(i,n)},has:function(n){if(Qn&&n&&(typeof n=="object"||typeof n=="function")){if(e)return Kw(e,n)}else if(Kn){if(t)return eS(t,n)}else if(i)return iS(i,n);return!1},set:function(n,a){Qn&&n&&(typeof n=="object"||typeof n=="function")?(e||(e=new Qn),Qw(e,n,a)):Kn?(t||(t=new Kn),Jw(t,n,a)):(i||(i={key:{},next:null}),rS(i,n,a))}};return s},nS=String.prototype.replace,aS=/%20/g,Ml={RFC1738:"RFC1738",RFC3986:"RFC3986"},Th={default:Ml.RFC3986,formatters:{RFC1738:function(r){return nS.call(r,aS,"+")},RFC3986:function(r){return String(r)}},RFC1738:Ml.RFC1738,RFC3986:Ml.RFC3986},oS=Th,Ol=Object.prototype.hasOwnProperty,ii=Array.isArray,Ft=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),lS=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(ii(i)){for(var s=[],n=0;n<i.length;++n)typeof i[n]<"u"&&s.push(i[n]);t.obj[t.prop]=s}}},ay=function(e,t){for(var i=t&&t.plainObjects?{__proto__:null}:{},s=0;s<e.length;++s)typeof e[s]<"u"&&(i[s]=e[s]);return i},uS=function r(e,t,i){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(ii(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!Ol.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var s=e;return ii(e)&&!ii(t)&&(s=ay(e,i)),ii(e)&&ii(t)?(t.forEach(function(n,a){if(Ol.call(e,a)){var o=e[a];o&&typeof o=="object"&&n&&typeof n=="object"?e[a]=r(o,n,i):e.push(n)}else e[a]=n}),e):Object.keys(t).reduce(function(n,a){var o=t[a];return Ol.call(n,a)?n[a]=r(n[a],o,i):n[a]=o,n},s)},cS=function(e,t){return Object.keys(t).reduce(function(i,s){return i[s]=t[s],i},e)},hS=function(r,e,t){var i=r.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Dl=1024,dS=function(e,t,i,s,n){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),i==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var o="",l=0;l<a.length;l+=Dl){for(var u=a.length>=Dl?a.slice(l,l+Dl):a,c=[],d=0;d<u.length;++d){var h=u.charCodeAt(d);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||n===oS.RFC1738&&(h===40||h===41)){c[c.length]=u.charAt(d);continue}if(h<128){c[c.length]=Ft[h];continue}if(h<2048){c[c.length]=Ft[192|h>>6]+Ft[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=Ft[224|h>>12]+Ft[128|h>>6&63]+Ft[128|h&63];continue}d+=1,h=65536+((h&1023)<<10|u.charCodeAt(d)&1023),c[c.length]=Ft[240|h>>18]+Ft[128|h>>12&63]+Ft[128|h>>6&63]+Ft[128|h&63]}o+=c.join("")}return o},fS=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var n=t[s],a=n.obj[n.prop],o=Object.keys(a),l=0;l<o.length;++l){var u=o[l],c=a[u];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(t.push({obj:a,prop:u}),i.push(c))}return lS(t),e},pS=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},mS=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},gS=function(e,t){return[].concat(e,t)},yS=function(e,t){if(ii(e)){for(var i=[],s=0;s<e.length;s+=1)i.push(t(e[s]));return i}return t(e)},oy={arrayToObject:ay,assign:cS,combine:gS,compact:fS,decode:hS,encode:dS,isBuffer:mS,isRegExp:pS,maybeMap:yS,merge:uS},ly=sS,La=oy,Xs=Th,vS=Object.prototype.hasOwnProperty,uy={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Gt=Array.isArray,bS=Array.prototype.push,cy=function(r,e){bS.apply(r,Gt(e)?e:[e])},xS=Date.prototype.toISOString,Ef=Xs.default,Fe={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:La.encode,encodeValuesOnly:!1,filter:void 0,format:Ef,formatter:Xs.formatters[Ef],indices:!1,serializeDate:function(e){return xS.call(e)},skipNulls:!1,strictNullHandling:!1},_S=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Ll={},wS=function r(e,t,i,s,n,a,o,l,u,c,d,h,f,p,m,g,b,x){for(var y=e,v=x,S=0,T=!1;(v=v.get(Ll))!==void 0&&!T;){var w=v.get(e);if(S+=1,typeof w<"u"){if(w===S)throw new RangeError("Cyclic object value");T=!0}typeof v.get(Ll)>"u"&&(S=0)}if(typeof c=="function"?y=c(t,y):y instanceof Date?y=f(y):i==="comma"&&Gt(y)&&(y=La.maybeMap(y,function(F){return F instanceof Date?f(F):F})),y===null){if(a)return u&&!g?u(t,Fe.encoder,b,"key",p):t;y=""}if(_S(y)||La.isBuffer(y)){if(u){var E=g?t:u(t,Fe.encoder,b,"key",p);return[m(E)+"="+m(u(y,Fe.encoder,b,"value",p))]}return[m(t)+"="+m(String(y))]}var A=[];if(typeof y>"u")return A;var M;if(i==="comma"&&Gt(y))g&&u&&(y=La.maybeMap(y,u)),M=[{value:y.length>0?y.join(",")||null:void 0}];else if(Gt(c))M=c;else{var I=Object.keys(y);M=d?I.sort(d):I}var O=l?String(t).replace(/\./g,"%2E"):String(t),R=s&&Gt(y)&&y.length===1?O+"[]":O;if(n&&Gt(y)&&y.length===0)return R+"[]";for(var _=0;_<M.length;++_){var C=M[_],D=typeof C=="object"&&C&&typeof C.value<"u"?C.value:y[C];if(!(o&&D===null)){var k=h&&l?String(C).replace(/\./g,"%2E"):String(C),L=Gt(y)?typeof i=="function"?i(R,k):R:R+(h?"."+k:"["+k+"]");x.set(e,S);var B=ly();B.set(Ll,x),cy(A,r(D,L,i,s,n,a,o,l,i==="comma"&&g&&Gt(y)?null:u,c,d,h,f,p,m,g,b,B))}}return A},SS=function(e){if(!e)return Fe;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Fe.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Xs.default;if(typeof e.format<"u"){if(!vS.call(Xs.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=Xs.formatters[i],n=Fe.filter;(typeof e.filter=="function"||Gt(e.filter))&&(n=e.filter);var a;if(e.arrayFormat in uy?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=Fe.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var o=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Fe.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Fe.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Fe.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Fe.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Fe.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Fe.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Fe.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Fe.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Fe.encodeValuesOnly,filter:n,format:i,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Fe.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Fe.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Fe.strictNullHandling}},ES=function(r,e){var t=r,i=SS(e),s,n;typeof i.filter=="function"?(n=i.filter,t=n("",t)):Gt(i.filter)&&(n=i.filter,s=n);var a=[];if(typeof t!="object"||t===null)return"";var o=uy[i.arrayFormat],l=o==="comma"&&i.commaRoundTrip;s||(s=Object.keys(t)),i.sort&&s.sort(i.sort);for(var u=ly(),c=0;c<s.length;++c){var d=s[c],h=t[d];i.skipNulls&&h===null||cy(a,wS(h,d,o,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var f=a.join(i.delimiter),p=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},cs=oy,Zu=Object.prototype.hasOwnProperty,TS=Array.isArray,Pe={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:cs.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},AS=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},hy=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},CS="utf8=%26%2310003%3B",PS="utf8=%E2%9C%93",RS=function(e,t){var i={__proto__:null},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var n=t.parameterLimit===1/0?void 0:t.parameterLimit,a=s.split(t.delimiter,n),o=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===PS?u="utf-8":a[l]===CS&&(u="iso-8859-1"),o=l,l=a.length);for(l=0;l<a.length;++l)if(l!==o){var c=a[l],d=c.indexOf("]="),h=d===-1?c.indexOf("="):d+1,f,p;h===-1?(f=t.decoder(c,Pe.decoder,u,"key"),p=t.strictNullHandling?null:""):(f=t.decoder(c.slice(0,h),Pe.decoder,u,"key"),p=cs.maybeMap(hy(c.slice(h+1),t),function(g){return t.decoder(g,Pe.decoder,u,"value")})),p&&t.interpretNumericEntities&&u==="iso-8859-1"&&(p=AS(String(p))),c.indexOf("[]=")>-1&&(p=TS(p)?[p]:p);var m=Zu.call(i,f);m&&t.duplicates==="combine"?i[f]=cs.combine(i[f],p):(!m||t.duplicates==="last")&&(i[f]=p)}return i},IS=function(r,e,t,i){for(var s=i?e:hy(e,t),n=r.length-1;n>=0;--n){var a,o=r[n];if(o==="[]"&&t.parseArrays)a=t.allowEmptyArrays&&(s===""||t.strictNullHandling&&s===null)?[]:[].concat(s);else{a=t.plainObjects?{__proto__:null}:{};var l=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,u=t.decodeDotInKeys?l.replace(/%2E/g,"."):l,c=parseInt(u,10);!t.parseArrays&&u===""?a={0:s}:!isNaN(c)&&o!==u&&String(c)===u&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(a=[],a[c]=s):u!=="__proto__"&&(a[u]=s)}s=a}return s},MS=function(e,t,i,s){if(e){var n=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,l=i.depth>0&&a.exec(n),u=l?n.slice(0,l.index):n,c=[];if(u){if(!i.plainObjects&&Zu.call(Object.prototype,u)&&!i.allowPrototypes)return;c.push(u)}for(var d=0;i.depth>0&&(l=o.exec(n))!==null&&d<i.depth;){if(d+=1,!i.plainObjects&&Zu.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(l[1])}if(l){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");c.push("["+n.slice(l.index)+"]")}return IS(c,t,i,s)}},OS=function(e){if(!e)return Pe;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Pe.charset:e.charset,i=typeof e.duplicates>"u"?Pe.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Pe.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Pe.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Pe.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Pe.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Pe.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Pe.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Pe.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Pe.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Pe.decoder,delimiter:typeof e.delimiter=="string"||cs.isRegExp(e.delimiter)?e.delimiter:Pe.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Pe.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Pe.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Pe.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Pe.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Pe.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Pe.strictNullHandling}},DS=function(r,e){var t=OS(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?{__proto__:null}:{};for(var i=typeof r=="string"?RS(r,t):r,s=t.plainObjects?{__proto__:null}:{},n=Object.keys(i),a=0;a<n.length;++a){var o=n[a],l=MS(o,i[o],t,typeof r=="string");s=cs.merge(s,l,t)}return t.allowSparse===!0?s:cs.compact(s)},LS=ES,NS=DS,FS=Th,kS={formats:FS,parse:NS,stringify:LS},BS=v_;function fr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var US=/^([a-z0-9.+-]+:)/i,jS=/:[0-9]*$/,$S=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,GS=["<",">",'"',"`"," ","\r",`
`,"	"],HS=["{","}","|","\\","^","`"].concat(GS),Ju=["'"].concat(HS),Tf=["%","/","?",";","#"].concat(Ju),Af=["/","?","#"],zS=255,Cf=/^[+a-z0-9A-Z_-]{0,63}$/,VS=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,WS={javascript:!0,"javascript:":!0},ec={javascript:!0,"javascript:":!0},Zi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tc=kS;function qS(r,e,t){if(r&&typeof r=="object"&&r instanceof fr)return r;var i=new fr;return i.parse(r,e,t),i}fr.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),s=i!==-1&&i<r.indexOf("#")?"?":"#",n=r.split(s),a=/\\/g;n[0]=n[0].replace(a,"/"),r=n.join(s);var o=r;if(o=o.trim(),!t&&r.split("#").length===1){var l=$S.exec(o);if(l)return this.path=o,this.href=o,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=tc.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=US.exec(o);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,o=o.substr(u.length)}if(t||u||o.match(/^\/\/[^@/]+@[^@/]+/)){var d=o.substr(0,2)==="//";d&&!(u&&ec[u])&&(o=o.substr(2),this.slashes=!0)}if(!ec[u]&&(d||u&&!Zi[u])){for(var h=-1,f=0;f<Af.length;f++){var p=o.indexOf(Af[f]);p!==-1&&(h===-1||p<h)&&(h=p)}var m,g;h===-1?g=o.lastIndexOf("@"):g=o.lastIndexOf("@",h),g!==-1&&(m=o.slice(0,g),o=o.slice(g+1),this.auth=decodeURIComponent(m)),h=-1;for(var f=0;f<Tf.length;f++){var p=o.indexOf(Tf[f]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=o.length),this.host=o.slice(0,h),o=o.slice(h),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var x=this.hostname.split(/\./),f=0,y=x.length;f<y;f++){var v=x[f];if(v&&!v.match(Cf)){for(var S="",T=0,w=v.length;T<w;T++)v.charCodeAt(T)>127?S+="x":S+=v[T];if(!S.match(Cf)){var E=x.slice(0,f),A=x.slice(f+1),M=v.match(VS);M&&(E.push(M[1]),A.unshift(M[2])),A.length&&(o="/"+A.join(".")+o),this.hostname=E.join(".");break}}}this.hostname.length>zS?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=BS.toASCII(this.hostname));var I=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+I,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!WS[c])for(var f=0,y=Ju.length;f<y;f++){var R=Ju[f];if(o.indexOf(R)!==-1){var _=encodeURIComponent(R);_===R&&(_=escape(R)),o=o.split(R).join(_)}}var C=o.indexOf("#");C!==-1&&(this.hash=o.substr(C),o=o.slice(0,C));var D=o.indexOf("?");if(D!==-1?(this.search=o.substr(D),this.query=o.substr(D+1),e&&(this.query=tc.parse(this.query)),o=o.slice(0,D)):e&&(this.search="",this.query={}),o&&(this.pathname=o),Zi[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",k=this.search||"";this.path=I+k}return this.href=this.format(),this};fr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=tc.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||n&&"?"+n||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Zi[e])&&s!==!1?(s="//"+(s||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),t=t.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),e+s+t+a+i};fr.prototype.resolve=function(r){return this.resolveObject(qS(r,!1,!0)).format()};fr.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new fr;e.parse(r,!1,!0),r=e}for(var t=new fr,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];t[n]=this[n]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var a=Object.keys(r),o=0;o<a.length;o++){var l=a[o];l!=="protocol"&&(t[l]=r[l])}return Zi[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Zi[r.protocol]){for(var u=Object.keys(r),c=0;c<u.length;c++){var d=u[c];t[d]=r[d]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!ec[r.protocol]){for(var y=(r.pathname||"").split("/");y.length&&!(r.host=y.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var h=t.pathname||"",f=t.search||"";t.path=h+f}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=r.host||r.pathname&&r.pathname.charAt(0)==="/",g=m||p||t.host&&r.pathname,b=g,x=t.pathname&&t.pathname.split("/")||[],y=r.pathname&&r.pathname.split("/")||[],v=t.protocol&&!Zi[t.protocol];if(v&&(t.hostname="",t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host=null),g=g&&(y[0]===""||x[0]==="")),m)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,x=y;else if(y.length)x||(x=[]),x.pop(),x=x.concat(y),t.search=r.search,t.query=r.query;else if(r.search!=null){if(v){t.host=x.shift(),t.hostname=t.host;var S=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;S&&(t.auth=S.shift(),t.hostname=S.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!x.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var T=x.slice(-1)[0],w=(t.host||r.host||x.length>1)&&(T==="."||T==="..")||T==="",E=0,A=x.length;A>=0;A--)T=x[A],T==="."?x.splice(A,1):T===".."?(x.splice(A,1),E++):E&&(x.splice(A,1),E--);if(!g&&!b)for(;E--;E)x.unshift("..");g&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),w&&x.join("/").substr(-1)!=="/"&&x.push("");var M=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(v){t.hostname=M?"":x.length?x.shift():"",t.host=t.hostname;var S=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;S&&(t.auth=S.shift(),t.hostname=S.shift(),t.host=t.hostname)}return g=g||t.host&&x.length,g&&!M&&x.unshift(""),x.length>0?t.pathname=x.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};fr.prototype.parseHost=function(){var r=this.host,e=jS.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};const Pf={};function he(r,e,t=3){if(Pf[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(i=i.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(i))),Pf[e]=!0}function vt(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function xs(r){return r.split("?")[0].split("#")[0]}function XS(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function YS(r,e,t){return r.replace(new RegExp(XS(e),"g"),t)}function QS(r,e){let t="",i=0,s=-1,n=0,a=-1;for(let o=0;o<=r.length;++o){if(o<r.length)a=r.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(s===o-1||n===1))if(s!==o-1&&n===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),s=o,n=0;continue}}else if(t.length===2||t.length===1){t="",i=0,s=o,n=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+=`/${r.slice(s+1,o)}`:t=r.slice(s+1,o),i=o-s-1;s=o,n=0}else a===46&&n!==-1?++n:n=-1}return t}const je={toPosix(r){return YS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){vt(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(vt(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=xs(this.toPosix(e??W.ADAPTER.getBaseUrl())),s=xs(this.toPosix(t??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?je.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(vt(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const i=r.endsWith("/");return r=QS(r,!1),r.length>0&&i&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return vt(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const i=r[t];if(vt(i),i.length>0)if(e===void 0)e=i;else{const s=r[t-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(vt(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let i=-1,s=!0;const n=this.getProtocol(r),a=r;r=r.slice(n.length);for(let o=r.length-1;o>=1;--o)if(e=r.charCodeAt(o),e===47){if(!s){i=o;break}}else s=!1;return i===-1?t?"/":this.isUrl(a)?n+r:n:t&&i===1?"//":n+r.slice(0,i)},rootname(r){vt(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){vt(r),e&&vt(e),r=xs(this.toPosix(r));let t=0,i=-1,s=!0,n;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let a=e.length-1,o=-1;for(n=r.length-1;n>=0;--n){const l=r.charCodeAt(n);if(l===47){if(!s){t=n+1;break}}else o===-1&&(s=!1,o=n+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(i=n):(a=-1,i=o))}return t===i?i=o:i===-1&&(i=r.length),r.slice(t,i)}for(n=r.length-1;n>=0;--n)if(r.charCodeAt(n)===47){if(!s){t=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(t,i)},extname(r){vt(r),r=xs(this.toPosix(r));let e=-1,t=0,i=-1,s=!0,n=0;for(let a=r.length-1;a>=0;--a){const o=r.charCodeAt(a);if(o===47){if(!s){t=a+1;break}continue}i===-1&&(s=!1,i=a+1),o===46?e===-1?e=a:n!==1&&(n=1):e!==-1&&(n=-1)}return e===-1||i===-1||n===0||n===1&&e===i-1&&e===t+1?"":r.slice(e,i)},parse(r){vt(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=xs(this.toPosix(r));let t=r.charCodeAt(0);const i=this.isAbsolute(r);let s;e.root=this.rootname(r),i||this.hasProtocol(r)?s=1:s=0;let n=-1,a=0,o=-1,l=!0,u=r.length-1,c=0;for(;u>=s;--u){if(t=r.charCodeAt(u),t===47){if(!l){a=u+1;break}continue}o===-1&&(l=!1,o=u+1),t===46?n===-1?n=u:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||o===-1||c===0||c===1&&n===o-1&&n===a+1?o!==-1&&(a===0&&i?e.base=e.name=r.slice(1,o):e.base=e.name=r.slice(a,o)):(a===0&&i?(e.name=r.slice(1,n),e.base=r.slice(1,o)):(e.name=r.slice(a,n),e.base=r.slice(a,o)),e.ext=r.slice(n,o)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Nl;async function KS(){return Nl??(Nl=(async()=>{var n;const r=document.createElement("canvas").getContext("webgl");if(!r)return et.UNPACK;const e=await new Promise(a=>{const o=document.createElement("video");o.onloadeddata=()=>a(o),o.onerror=()=>a(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!e)return et.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,s),r.deleteFramebuffer(i),r.deleteTexture(t),(n=r.getExtension("WEBGL_lose_context"))==null||n.loseContext(),s[0]<=s[3]?et.PMA:et.UNPACK})()),Nl}let Fl;function ZS(){return typeof Fl>"u"&&(Fl=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:W.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!W.ADAPTER.getWebGLRenderingContext())return!1;const t=W.ADAPTER.createCanvas();let i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const s=!!((e=i==null?void 0:i.getContextAttributes())!=null&&e.stencil);if(i){const n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,s}catch{return!1}}()),Fl}var JS={grad:.9,turn:360,rad:360/(2*Math.PI)},sr=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Ue=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},pt=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},dy=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Rf=function(r){return{r:pt(r.r,0,255),g:pt(r.g,0,255),b:pt(r.b,0,255),a:pt(r.a)}},kl=function(r){return{r:Ue(r.r),g:Ue(r.g),b:Ue(r.b),a:Ue(r.a,3)}},eE=/^#([0-9a-f]{3,8})$/i,Zn=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},fy=function(r){var e=r.r,t=r.g,i=r.b,s=r.a,n=Math.max(e,t,i),a=n-Math.min(e,t,i),o=a?n===e?(t-i)/a:n===t?2+(i-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:n?a/n*100:0,v:n/255*100,a:s}},py=function(r){var e=r.h,t=r.s,i=r.v,s=r.a;e=e/360*6,t/=100,i/=100;var n=Math.floor(e),a=i*(1-t),o=i*(1-(e-n)*t),l=i*(1-(1-e+n)*t),u=n%6;return{r:255*[i,o,a,a,l,i][u],g:255*[l,i,i,o,a,a][u],b:255*[a,a,l,i,i,o][u],a:s}},If=function(r){return{h:dy(r.h),s:pt(r.s,0,100),l:pt(r.l,0,100),a:pt(r.a)}},Mf=function(r){return{h:Ue(r.h),s:Ue(r.s),l:Ue(r.l),a:Ue(r.a,3)}},Of=function(r){return py((t=(e=r).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Ys=function(r){return{h:(e=fy(r)).h,s:(s=(200-(t=e.s))*(i=e.v)/100)>0&&s<200?t*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,i,s},tE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,iE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rc={string:[[function(r){var e=eE.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Ue(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Ue(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=iE.exec(r)||sE.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:Rf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=tE.exec(r)||rE.exec(r);if(!e)return null;var t,i,s=If({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(JS[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Of(s)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,i=r.b,s=r.a,n=s===void 0?1:s;return sr(e)&&sr(t)&&sr(i)?Rf({r:Number(e),g:Number(t),b:Number(i),a:Number(n)}):null},"rgb"],[function(r){var e=r.h,t=r.s,i=r.l,s=r.a,n=s===void 0?1:s;if(!sr(e)||!sr(t)||!sr(i))return null;var a=If({h:Number(e),s:Number(t),l:Number(i),a:Number(n)});return Of(a)},"hsl"],[function(r){var e=r.h,t=r.s,i=r.v,s=r.a,n=s===void 0?1:s;if(!sr(e)||!sr(t)||!sr(i))return null;var a=function(o){return{h:dy(o.h),s:pt(o.s,0,100),v:pt(o.v,0,100),a:pt(o.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(n)});return py(a)},"hsv"]]},Df=function(r,e){for(var t=0;t<e.length;t++){var i=e[t][0](r);if(i)return[i,e[t][1]]}return[null,void 0]},nE=function(r){return typeof r=="string"?Df(r.trim(),rc.string):typeof r=="object"&&r!==null?Df(r,rc.object):[null,void 0]},Bl=function(r,e){var t=Ys(r);return{h:t.h,s:pt(t.s+100*e,0,100),l:t.l,a:t.a}},Ul=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Lf=function(r,e){var t=Ys(r);return{h:t.h,s:t.s,l:pt(t.l+100*e,0,100),a:t.a}},ic=function(){function r(e){this.parsed=nE(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Ue(Ul(this.rgba),2)},r.prototype.isDark=function(){return Ul(this.rgba)<.5},r.prototype.isLight=function(){return Ul(this.rgba)>=.5},r.prototype.toHex=function(){return e=kl(this.rgba),t=e.r,i=e.g,s=e.b,a=(n=e.a)<1?Zn(Ue(255*n)):"","#"+Zn(t)+Zn(i)+Zn(s)+a;var e,t,i,s,n,a},r.prototype.toRgb=function(){return kl(this.rgba)},r.prototype.toRgbString=function(){return e=kl(this.rgba),t=e.r,i=e.g,s=e.b,(n=e.a)<1?"rgba("+t+", "+i+", "+s+", "+n+")":"rgb("+t+", "+i+", "+s+")";var e,t,i,s,n},r.prototype.toHsl=function(){return Mf(Ys(this.rgba))},r.prototype.toHslString=function(){return e=Mf(Ys(this.rgba)),t=e.h,i=e.s,s=e.l,(n=e.a)<1?"hsla("+t+", "+i+"%, "+s+"%, "+n+")":"hsl("+t+", "+i+"%, "+s+"%)";var e,t,i,s,n},r.prototype.toHsv=function(){return e=fy(this.rgba),{h:Ue(e.h),s:Ue(e.s),v:Ue(e.v),a:Ue(e.a,3)};var e},r.prototype.invert=function(){return kt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),kt(Bl(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),kt(Bl(this.rgba,-e))},r.prototype.grayscale=function(){return kt(Bl(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),kt(Lf(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),kt(Lf(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?kt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ue(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=Ys(this.rgba);return typeof e=="number"?kt({h:e,s:t.s,l:t.l,a:t.a}):Ue(t.h)},r.prototype.isEqual=function(e){return this.toHex()===kt(e).toHex()},r}(),kt=function(r){return r instanceof ic?r:new ic(r)},Nf=[],aE=function(r){r.forEach(function(e){Nf.indexOf(e)<0&&(e(ic,rc),Nf.push(e))})};function oE(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in t)i[t[s]]=s;var n={};r.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,u=i[this.toHex()];if(u)return u;if(a!=null&&a.closest){var c=this.toRgb(),d=1/0,h="black";if(!n.length)for(var f in t)n[f]=new r(t[f]).toRgb();for(var p in t){var m=(o=c,l=n[p],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));m<d&&(d=m,h=p)}return h}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":t[o];return l?new r(l).toRgb():null},"name"])}aE([oE]);const ji=class Na{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Na)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,n)=>s===t[n]);if(e!==null&&t!==null){const s=Object.keys(e),n=Object.keys(t);return s.length!==n.length?!1:s.every(a=>e[a]===t[a])}return e===t}toRgba(){const[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,s,n]=Na.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return t&&(i=i*e+.5|0,s=s*e+.5|0,n=n*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,s,n]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}normalize(e){let t,i,s,n;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;t=(a>>16&255)/255,i=(a>>8&255)/255,s=(a&255)/255,n=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,s,n=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,s,n=255]=e,t/=255,i/=255,s/=255,n/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=Na.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const a=kt(e);a.isValid()&&({r:t,g:i,b:s,a:n}=a.rgba,t/=255,i/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,n)=>{e[n]=Math.min(Math.max(s,t),i)}),e)}};ji.shared=new ji,ji.temp=new ji,ji.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Se=ji;function lE(r){return he("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Se.shared.setValue(r).toHex()}function uE(r){return he("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Se.shared.setValue(r).toNumber()}function cE(){const r=[],e=[];for(let i=0;i<32;i++)r[i]=i,e[i]=i;r[J.NORMAL_NPM]=J.NORMAL,r[J.ADD_NPM]=J.ADD,r[J.SCREEN_NPM]=J.SCREEN,e[J.NORMAL]=J.NORMAL_NPM,e[J.ADD]=J.ADD_NPM,e[J.SCREEN]=J.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const my=cE();function gy(r,e){return my[e?1:0][r]}function hE(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,s=0;i<t;i+=6,s+=4)e[i+0]=s+0,e[i+1]=s+1,e[i+2]=s+2,e[i+3]=s+0,e[i+4]=s+2,e[i+5]=s+3;return e}function yy(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function eo(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Ff(r){return!(r&r-1)&&!!r}function kf(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Ji(r,e,t){const i=r.length;let s;if(e>=i||t===0)return;t=e+t>i?i-e:t;const n=i-t;for(s=e;s<n;++s)r[s]=r[s+t];r.length=n}function Rr(r){return r===0?0:r<0?-1:1}let dE=0;function gi(){return++dE}const sc=class{constructor(r,e,t,i){this.left=r,this.top=e,this.right=t,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};sc.EMPTY=new sc(0,0,0,0);let Bf=sc;const Uf={},Bt=Object.create(null),xr=Object.create(null);class fE{constructor(e,t,i){this._canvas=W.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||W.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function jf(r,e,t){for(let i=0,s=4*t*e;i<e;++i,s+=4)if(r[s+3]!==0)return!1;return!0}function $f(r,e,t,i,s){const n=4*e;for(let a=i,o=i*n+4*t;a<=s;++a,o+=n)if(r[o+3]!==0)return!1;return!0}function pE(r){const{width:e,height:t}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,e,t).data;let n=0,a=0,o=e-1,l=t-1;for(;a<t&&jf(s,e,a);)++a;if(a===t)return Bf.EMPTY;for(;jf(s,e,l);)--l;for(;$f(s,e,n,a,l);)++n;for(;$f(s,e,o,a,l);)--o;return++o,++l,new Bf(n,a,o,l)}function mE(r){const e=pE(r),{width:t,height:i}=e;let s=null;if(!e.isEmpty()){const n=r.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");s=n.getImageData(e.left,e.top,t,i)}return{width:t,height:i,data:s}}function gE(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function mr(r,e=1){var i;const t=(i=W.RETINA_PREFIX)==null?void 0:i.exec(r);return t?parseFloat(t[1]):e}var H=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(H||{});const nc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Gf=(r,e)=>nc(r).priority??e,Y={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(nc).forEach(e=>{e.type.forEach(t=>{var i,s;return(s=(i=this._removeHandlers)[t])==null?void 0:s.call(i,e)})}),this},add(...r){return r.map(nc).forEach(e=>{e.type.forEach(t=>{var n,a;const i=this._addHandlers,s=this._queue;i[t]?(n=i[t])==null||n.call(i,e):(s[t]=s[t]||[],(a=s[t])==null||a.push(e))})}),this},handle(r,e,t){var a;const i=this._addHandlers,s=this._removeHandlers;if(i[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=e,s[r]=t;const n=this._queue;return n[r]&&((a=n[r])==null||a.forEach(o=>e(o)),delete n[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((s,n)=>Gf(n,t)-Gf(s,t)))},i=>{const s=e.indexOf(i.ref);s!==-1&&e.splice(s,1)})}};class ac{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const yE=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function vE(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function bE(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=yE.replace(/%forloop%/gi,vE(r));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const jl=0,$l=1,Gl=2,Hl=3,zl=4,Vl=5;class tr{constructor(){this.data=0,this.blendMode=J.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<jl)}set blend(e){!!(this.data&1<<jl)!==e&&(this.data^=1<<jl)}get offsets(){return!!(this.data&1<<$l)}set offsets(e){!!(this.data&1<<$l)!==e&&(this.data^=1<<$l)}get culling(){return!!(this.data&1<<Gl)}set culling(e){!!(this.data&1<<Gl)!==e&&(this.data^=1<<Gl)}get depthTest(){return!!(this.data&1<<Hl)}set depthTest(e){!!(this.data&1<<Hl)!==e&&(this.data^=1<<Hl)}get depthMask(){return!!(this.data&1<<Vl)}set depthMask(e){!!(this.data&1<<Vl)!==e&&(this.data^=1<<Vl)}get clockwiseFrontFace(){return!!(this.data&1<<zl)}set clockwiseFrontFace(e){!!(this.data&1<<zl)!==e&&(this.data^=1<<zl)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==J.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new tr;return e.depthTest=!1,e.blend=!0,e}}tr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const oc=[];function vy(r,e){if(!r)return null;let t="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(t=i[1].toLowerCase())}for(let i=oc.length-1;i>=0;--i){const s=oc[i];if(s.test&&s.test(r,t))return new s(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Tt{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,i,s,n,a,o,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:c}=this;this._aliasCount++;for(let d=0,h=c.length;d<h;d++)c[d][u](e,t,i,s,n,a,o,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Tt.prototype,{dispatch:{value:Tt.prototype.emit},run:{value:Tt.prototype.emit}});class cn{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Tt("setRealSize"),this.onUpdate=new Tt("update"),this.onError=new Tt("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class $o extends cn{constructor(e,t){const{width:i,height:s}=t||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,i){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===et.UNPACK);const n=t.realWidth,a=t.realHeight;return i.width===n&&i.height===a?s.texSubImage2D(t.target,0,0,0,n,a,t.format,i.type,this.data):(i.width=n,i.height=a,s.texImage2D(t.target,0,i.internalFormat,n,a,0,t.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const xE={scaleMode:lr.NEAREST,alphaMode:et.NPM},lc=class $i extends On{constructor(e=null,t=null){super(),t=Object.assign({},$i.defaultOptions,t);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:a,width:o,height:l,wrapMode:u,format:c,type:d,target:h,resolution:f,resourceOptions:p}=t;e&&!(e instanceof cn)&&(e=vy(e,p),e.internal=!0),this.resolution=f||W.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=u,this._scaleMode=a,this.format=c,this.type=d,this.target=h,this.alphaMode=i,this.uid=gi(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Ff(this.realWidth)&&Ff(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xr[this.cacheId],delete Bt[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),$i.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=W.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${gi()}`}n=e._pixiId}let a=xr[n];if(s&&i&&!a)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return a||(a=new $i(e,t),a.cacheId=n,$i.addToCache(a,n)),a}static fromBuffer(e,t,i,s){e=e||new Float32Array(t*i*4);const n=new $o(e,{width:t,height:i,...s==null?void 0:s.resourceOptions});let a,o;return e instanceof Float32Array?(a=G.RGBA,o=Z.FLOAT):e instanceof Int32Array?(a=G.RGBA_INTEGER,o=Z.INT):e instanceof Uint32Array?(a=G.RGBA_INTEGER,o=Z.UNSIGNED_INT):e instanceof Int16Array?(a=G.RGBA_INTEGER,o=Z.SHORT):e instanceof Uint16Array?(a=G.RGBA_INTEGER,o=Z.UNSIGNED_SHORT):e instanceof Int8Array?(a=G.RGBA,o=Z.BYTE):(a=G.RGBA,o=Z.UNSIGNED_BYTE),n.internal=!0,new $i(n,Object.assign({},xE,{type:o,format:a},s))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),xr[t]&&xr[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),xr[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=xr[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete xr[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete xr[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};lc.defaultOptions={mipmap:Qt.POW2,anisotropicLevel:0,scaleMode:lr.LINEAR,wrapMode:Lr.CLAMP,alphaMode:et.UNPACK,target:Qi.TEXTURE_2D,format:G.RGBA,type:Z.UNSIGNED_BYTE},lc._globalBatch=0;let te=lc;class uc{constructor(){this.texArray=null,this.blend=0,this.type=Wt.TRIANGLES,this.start=0,this.size=0,this.data=null}}let _E=0;class Re{constructor(e,t=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=_E++,this.disposeRunner=new Tt("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Xt.ELEMENT_ARRAY_BUFFER:Xt.ARRAY_BUFFER}get index(){return this.type===Xt.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Re(e)}}class to{constructor(e,t=0,i=!1,s=Z.FLOAT,n,a,o,l=1){this.buffer=e,this.size=t,this.normalized=i,this.type=s,this.stride=n,this.start=a,this.instance=o,this.divisor=l}destroy(){this.buffer=null}static from(e,t,i,s,n){return new to(e,t,i,s,n)}}const wE={Float32Array,Uint32Array,Int32Array,Uint8Array};function SE(r,e){let t=0,i=0;const s={};for(let l=0;l<r.length;l++)i+=e[l],t+=r[l].length;const n=new ArrayBuffer(t*4);let a=null,o=0;for(let l=0;l<r.length;l++){const u=e[l],c=r[l],d=yy(c);s[d]||(s[d]=new wE[d](n)),a=s[d];for(let h=0;h<c.length;h++){const f=(h/u|0)*i+o,p=h%u;a[f+p]=c[h]}o+=u}return new Float32Array(n)}const Hf={5126:4,5123:2,5121:1};let EE=0;const TE={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Fr{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=EE++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Tt("disposeGeometry"),this.refCount=0}addAttribute(e,t,i=0,s=!1,n,a,o,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Re||(t instanceof Array&&(t=new Float32Array(t)),t=new Re(t));const u=e.split("|");if(u.length>1){for(let d=0;d<u.length;d++)this.addAttribute(u[d],t,i,s,n);return this}let c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new to(c,i,s,n,a,o,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Re||(e instanceof Array&&(e=new Uint16Array(e)),e=new Re(e)),e.type=Xt.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],i=new Re;let s;for(s in this.attributes){const n=this.attributes[s],a=this.buffers[n.buffer];e.push(a.data),t.push(n.size*Hf[n.type]/4),n.buffer=0}for(i.data=SE(e,t),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Fr;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new Re(this.buffers[t].data.slice(0));for(const t in this.attributes){const i=this.attributes[t];e.attributes[t]=new to(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Xt.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new Fr,i=[],s=[],n=[];let a;for(let o=0;o<e.length;o++){a=e[o];for(let l=0;l<a.buffers.length;l++)s[l]=s[l]||0,s[l]+=a.buffers[l].data.length,n[l]=0}for(let o=0;o<a.buffers.length;o++)i[o]=new TE[yy(a.buffers[o].data)](s[o]),t.buffers[o]=new Re(i[o]);for(let o=0;o<e.length;o++){a=e[o];for(let l=0;l<a.buffers.length;l++)i[l].set(a.buffers[l].data,n[l]),n[l]+=a.buffers[l].data.length}if(t.attributes=a.attributes,a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)],t.indexBuffer.type=Xt.ELEMENT_ARRAY_BUFFER;let o=0,l=0,u=0,c=0;for(let d=0;d<a.buffers.length;d++)if(a.buffers[d]!==a.indexBuffer){c=d;break}for(const d in a.attributes){const h=a.attributes[d];(h.buffer|0)===c&&(l+=h.size*Hf[h.type]/4)}for(let d=0;d<e.length;d++){const h=e[d].indexBuffer.data;for(let f=0;f<h.length;f++)t.indexBuffer.data[f+u]+=o;o+=e[d].buffers[c].data.length/l,u+=h.length}}return t}}class by extends Fr{constructor(e=!1){super(),this._buffer=new Re(null,e,!1),this._indexBuffer=new Re(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Z.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Z.FLOAT).addAttribute("aColor",this._buffer,4,!0,Z.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Z.FLOAT).addIndex(this._indexBuffer)}}const ro=Math.PI*2,AE=180/Math.PI,CE=Math.PI/180;var He=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(He||{});class ye{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new ye(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}ye.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Jn=[new ye,new ye,new ye,new ye];class ae{constructor(e=0,t=0,i=0,s=0){this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(s),this.type=He.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ae(0,0,0,0)}clone(){return new ae(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const E=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=E)return!1;const A=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>A}const i=this.left,s=this.right,n=this.top,a=this.bottom;if(s<=i||a<=n)return!1;const o=Jn[0].set(e.left,e.top),l=Jn[1].set(e.left,e.bottom),u=Jn[2].set(e.right,e.top),c=Jn[3].set(e.right,e.bottom);if(u.x<=o.x||l.y<=o.y)return!1;const d=Math.sign(t.a*t.d-t.b*t.c);if(d===0||(t.apply(o,o),t.apply(l,l),t.apply(u,u),t.apply(c,c),Math.max(o.x,l.x,u.x,c.x)<=i||Math.min(o.x,l.x,u.x,c.x)>=s||Math.max(o.y,l.y,u.y,c.y)<=n||Math.min(o.y,l.y,u.y,c.y)>=a))return!1;const h=d*(l.y-o.y),f=d*(o.x-l.x),p=h*i+f*n,m=h*s+f*n,g=h*i+f*a,b=h*s+f*a;if(Math.max(p,m,g,b)<=h*o.x+f*o.y||Math.min(p,m,g,b)>=h*c.x+f*c.y)return!1;const x=d*(o.y-u.y),y=d*(u.x-o.x),v=x*i+y*n,S=x*s+y*n,T=x*i+y*a,w=x*s+y*a;return!(Math.max(v,S,T,w)<=x*o.x+y*o.y||Math.min(v,S,T,w)>=x*c.x+y*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),n=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=s-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=s,this.height=n-s,this}}ae.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Go{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.radius=i,this.type=He.CIRC}clone(){return new Go(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-e,n=this.y-t;return s*=s,n*=n,s+n<=i}getBounds(){return new ae(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Go.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ho{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.width=i,this.height=s,this.type=He.ELIP}clone(){return new Ho(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,s=(t-this.y)/this.height;return i*=i,s*=s,i+s<=1}getBounds(){return new ae(this.x-this.width,this.y-this.height,this.width,this.height)}}Ho.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class hi{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const i=[];for(let s=0,n=t.length;s<n;s++)i.push(t[s].x,t[s].y);t=i}this.points=t,this.type=He.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new hi(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let i=!1;const s=this.points.length/2;for(let n=0,a=s-1;n<s;a=n++){const o=this.points[n*2],l=this.points[n*2+1],u=this.points[a*2],c=this.points[a*2+1];l>t!=c>t&&e<(u-o)*((t-l)/(c-l))+o&&(i=!i)}return i}}hi.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class zo{constructor(e=0,t=0,i=0,s=0,n=20){this.x=e,this.y=t,this.width=i,this.height=s,this.radius=n,this.type=He.RREC}clone(){return new zo(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let s=e-(this.x+i),n=t-(this.y+i);const a=i*i;if(s*s+n*n<=a||(s=e-(this.x+this.width-i),s*s+n*n<=a)||(n=t-(this.y+this.height-i),s*s+n*n<=a)||(s=e-(this.x+i),s*s+n*n<=a))return!0}return!1}}zo.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Ee{constructor(e=1,t=0,i=0,s=1,n=0,a=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=s,this.tx=n,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,s,n,a){return this.a=e,this.b=t,this.c=i,this.d=s,this.tx=n,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new ye;const i=e.x,s=e.y;return t.x=this.a*i+this.c*s+this.tx,t.y=this.b*i+this.d*s+this.ty,t}applyInverse(e,t){t=t||new ye;const i=1/(this.a*this.d+this.c*-this.b),s=e.x,n=e.y;return t.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.a,n=this.c,a=this.tx;return this.a=s*t-this.b*i,this.b=s*i+this.b*t,this.c=n*t-this.d*i,this.d=n*i+this.d*t,this.tx=a*t-this.ty*i,this.ty=a*i+this.ty*t,this}append(e){const t=this.a,i=this.b,s=this.c,n=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*i+e.b*n,this.c=e.c*t+e.d*s,this.d=e.c*i+e.d*n,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*n+this.ty,this}setTransform(e,t,i,s,n,a,o,l,u){return this.a=Math.cos(o+u)*n,this.b=Math.sin(o+u)*n,this.c=-Math.sin(o-l)*a,this.d=Math.cos(o-l)*a,this.tx=e-(i*this.a+s*this.c),this.ty=t-(i*this.b+s*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,s=this.c,n=this.d,a=e.pivot,o=-Math.atan2(-s,n),l=Math.atan2(i,t),u=Math.abs(o+l);return u<1e-5||Math.abs(ro-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(s*s+n*n),e.position.x=this.tx+(a.x*t+a.y*s),e.position.y=this.ty+(a.x*i+a.y*n),e}invert(){const e=this.a,t=this.b,i=this.c,s=this.d,n=this.tx,a=e*s-t*i;return this.a=s/a,this.b=-t/a,this.c=-i/a,this.d=e/a,this.tx=(i*this.ty-s*n)/a,this.ty=-(e*this.ty-t*n)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ee;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Ee}static get TEMP_MATRIX(){return new Ee}}Ee.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Qr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Kr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Zr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Jr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],cc=[],xy=[],ea=Math.sign;function PE(){for(let r=0;r<16;r++){const e=[];cc.push(e);for(let t=0;t<16;t++){const i=ea(Qr[r]*Qr[t]+Zr[r]*Kr[t]),s=ea(Kr[r]*Qr[t]+Jr[r]*Kr[t]),n=ea(Qr[r]*Zr[t]+Zr[r]*Jr[t]),a=ea(Kr[r]*Zr[t]+Jr[r]*Jr[t]);for(let o=0;o<16;o++)if(Qr[o]===i&&Kr[o]===s&&Zr[o]===n&&Jr[o]===a){e.push(o);break}}}for(let r=0;r<16;r++){const e=new Ee;e.set(Qr[r],Kr[r],Zr[r],Jr[r],0,0),xy.push(e)}}PE();const Te={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Qr[r],uY:r=>Kr[r],vX:r=>Zr[r],vY:r=>Jr[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>cc[r][e],sub:(r,e)=>cc[r][Te.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Te.S:Te.N:Math.abs(e)*2<=Math.abs(r)?r>0?Te.E:Te.W:e>0?r>0?Te.SE:Te.SW:r>0?Te.NE:Te.NW,matrixAppendRotationInv:(r,e,t=0,i=0)=>{const s=xy[Te.inv(e)];s.tx=t,s.ty=i,r.append(s)}};class cr{constructor(e,t,i=0,s=0){this._x=i,this._y=s,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new cr(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}cr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const hc=class{constructor(){this.worldTransform=new Ee,this.localTransform=new Ee,this.position=new cr(this.onChange,this,0,0),this.scale=new cr(this.onChange,this,1,1),this.pivot=new cr(this.onChange,this,0,0),this.skew=new cr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,i=this.worldTransform;i.a=e.a*t.a+e.b*t.c,i.b=e.a*t.b+e.b*t.d,i.c=e.c*t.a+e.d*t.c,i.d=e.c*t.b+e.d*t.d,i.tx=e.tx*t.a+e.ty*t.c+t.tx,i.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};hc.IDENTITY=new hc;let Ah=hc;Ah.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var RE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,IE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function zf(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}function Wl(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function _y(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Wl(2*e);case"bvec3":return Wl(3*e);case"bvec4":return Wl(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const es=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],ME={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},OE={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function DE(r,e){var i;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in r.uniforms){const n=e[s];if(!n){((i=r.uniforms[s])==null?void 0:i.group)===!0&&(r.uniforms[s].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const a=r.uniforms[s];let o=!1;for(let l=0;l<es.length;l++)if(es[l].test(n,a)){t.push(es[l].code(s,a)),o=!0;break}if(!o){const l=(n.size===1&&!n.isArray?ME:OE)[n.type].replace("location",`ud["${s}"].location`);t.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const wy={};let Mi=wy;function LE(){if(Mi===wy||Mi!=null&&Mi.isContextLost()){const r=W.ADAPTER.createCanvas();let e;W.PREFER_ENV>=Si.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Mi=e}return Mi}let ta;function NE(){if(!ta){ta=ft.MEDIUM;const r=LE();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(ta=e.precision?ft.HIGH:ft.MEDIUM)}}return ta}function Vf(r,e){const t=r.getShaderSource(e).split(`
`).map((u,c)=>`${c}: ${u}`),i=r.getShaderInfoLog(e),s=i.split(`
`),n={},a=s.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!n[u]?(n[u]=!0,!0):!1),o=[""];a.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);o[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function FE(r,e,t,i){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||Vf(r,t),r.getShaderParameter(i,r.COMPILE_STATUS)||Vf(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const kE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Sy(r){return kE[r]}let ra=null;const Wf={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ey(r,e){if(!ra){const t=Object.keys(Wf);ra={};for(let i=0;i<t.length;++i){const s=t[i];ra[r[s]]=Wf[s]}}return ra[e]}function qf(r,e,t){if(r.substring(0,9)!=="precision"){let i=e;return e===ft.HIGH&&t!==ft.HIGH&&(i=ft.MEDIUM),`precision ${i} float;
${r}`}else if(t!==ft.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let _s;function BE(){if(typeof _s=="boolean")return _s;try{_s=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{_s=!1}return _s}let UE=0;const ia={},dc=class Gi{constructor(e,t,i="pixi-shader",s={}){this.extra={},this.id=UE++,this.vertexSrc=e||Gi.defaultVertexSrc,this.fragmentSrc=t||Gi.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),ia[i]?(ia[i]++,i+=`-${ia[i]}`):ia[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=qf(this.vertexSrc,Gi.defaultVertexPrecision,ft.HIGH),this.fragmentSrc=qf(this.fragmentSrc,Gi.defaultFragmentPrecision,NE())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return IE}static get defaultFragmentSrc(){return RE}static from(e,t,i){const s=e+t;let n=Uf[s];return n||(Uf[s]=n=new Gi(e,t,i)),n}};dc.defaultVertexPrecision=ft.HIGH,dc.defaultFragmentPrecision=ur.apple.device?ft.HIGH:ft.MEDIUM;let hr=dc,jE=0;class At{constructor(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=jE++,this.static=!!t,this.ubo=!!i,e instanceof Re?(this.buffer=e,this.buffer.type=Xt.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Re(new Float32Array(1)),this.buffer.type=Xt.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,i){if(!this.ubo)this.uniforms[e]=new At(t,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,i){return new At(e,t,i)}static uboFrom(e,t){return new At(e,t??!0,!0)}}class Yt{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof At?this.uniformGroup=t:this.uniformGroup=new At(t):this.uniformGroup=new At({}),this.disposeRunner=new Tt("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const i in t.uniforms){const s=t.uniforms[i];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,i){const s=hr.from(e,t);return new Yt(s,i)}}class $E{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let n=0;n<e;n++)i[n]=n;this.defaultGroupCache[e]=At.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new hr(this.vertexSrc,s)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ee,default:this.defaultGroupCache[e]};return new Yt(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let i=0;i<e;i++)i>0&&(t+=`
else `),i<e-1&&(t+=`if(vTextureId < ${i}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class fc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function GE(){return!ur.apple.device}function HE(r){let e=!0;const t=W.ADAPTER.getNavigator();if(ur.tablet||ur.phone){if(ur.apple.device){const i=t.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(ur.android.device){const i=t.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?r:4}class Vo{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var zE=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,VE=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ls=class xt extends Vo{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=by,this.vertexSize=6,this.state=tr.for2d(),this.size=xt.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??HE(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??GE(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return he("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return VE}static get defaultFragmentTemplate(){return zE}setShaderGenerator({vertex:e=xt.defaultVertexSrc,fragment:t=xt.defaultFragmentTemplate}={}){this.shaderGenerator=new $E(e,t)}contextChange(){const e=this.renderer.gl;W.PREFER_ENV===Si.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),xt.defaultMaxTextures),this.maxTextures=bE(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=xt,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new uc);for(;t.length<s;)t.push(new fc);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=xt._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,a=this.renderer.textureGC.count;let o=++te._globalBatch,l=0,u=i[0],c=0;s.copyBoundTextures(n,t);for(let d=0;d<this._bufferSize;++d){const h=e[d];e[d]=null,h._batchEnabled!==o&&(u.count>=t&&(s.boundArray(u,n,o,t),this.buildDrawCalls(u,c,d),c=d,u=i[++l],++o),h._batchEnabled=o,h.touched=a,u.elements[u.count++]=h)}u.count>0&&(s.boundArray(u,n,o,t),this.buildDrawCalls(u,c,this._bufferSize),++l,++o);for(let d=0;d<n.length;d++)n[d]=null;te._globalBatch=o}buildDrawCalls(e,t,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:a,vertexSize:o}=this,l=xt._drawCallPool;let u=this._dcIndex,c=this._aIndex,d=this._iIndex,h=l[u];h.start=this._iIndex,h.texArray=e;for(let f=t;f<i;++f){const p=s[f],m=p._texture.baseTexture,g=my[m.alphaMode?1:0][p.blendMode];s[f]=null,t<f&&h.blend!==g&&(h.size=d-h.start,t=f,h=l[++u],h.texArray=e,h.start=d),this.packInterleavedGeometry(p,n,a,c,d),c+=p.vertexData.length/2*o,d+=p.indices.length,h.blend=g}t<i&&(h.size=d-h.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=d}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;xt.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,s=xt._drawCallPool;let n=null;for(let a=0;a<e;a++){const{texArray:o,type:l,size:u,start:c,blend:d}=s[a];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=d,i.set(this.state),t.drawElements(l,u,t.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),xt.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=eo(Math.ceil(e/8)),i=kf(t),s=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new ac(s*this.vertexSize*4)),n}getIndexBuffer(e){const t=eo(Math.ceil(e/12)),i=kf(t),s=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(e,t,i,s,n){const{uint32View:a,float32View:o}=t,l=s/this.vertexSize,u=e.uvs,c=e.indices,d=e.vertexData,h=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=Se.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<d.length;m+=2)o[s++]=d[m],o[s++]=d[m+1],o[s++]=u[m],o[s++]=u[m+1],a[s++]=p,o[s++]=h;for(let m=0;m<c.length;m++)i[n++]=l+c[m]}};Ls.defaultBatchSize=4096,Ls.extension={name:"batch",type:H.RendererPlugin},Ls._drawCallPool=[],Ls._textureArrayPool=[];let ei=Ls;Y.add(ei);var WE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,qE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const pc=class Ns extends Yt{constructor(e,t,i){const s=hr.from(e||Ns.defaultVertexSrc,t||Ns.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=Ns.defaultResolution,this.multisample=Ns.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new tr}apply(e,t,i,s,n){e.applyFilter(this,t,i,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return qE}static get defaultFragmentSrc(){return WE}};pc.defaultResolution=1,pc.defaultMultisample=De.NONE;let Ye=pc;class io{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Se(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:i,backgroundAlpha:s}=e,n=i??t;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}io.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},io.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"background"};Y.add(io);class Ty{constructor(e){this.renderer=e,this.emptyRenderer=new Vo(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:i}=this.renderer.texture;for(let s=t-1;s>=0;--s)e[s]=i[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,t,i,s){const{elements:n,ids:a,count:o}=e;let l=0;for(let u=0;u<o;u++){const c=n[u],d=c._batchLocation;if(d>=0&&d<s&&t[d]===c){a[u]=d;continue}for(;l<s;){const h=t[l];if(h&&h._batchEnabled===i&&h._batchLocation===l){l++;continue}a[u]=l,c._batchLocation=l,t[l]=c;break}}}destroy(){this.renderer=null}}Ty.extension={type:H.RendererSystem,name:"batch"};Y.add(Ty);let Xf=0;class so{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Xf++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Xf++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let i;if(W.PREFER_ENV>=Si.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}so.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},so.extension={type:H.RendererSystem,name:"context"};Y.add(so);class mc{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Tt("disposeFramebuffer"),this.multisample=De.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new te(null,{scaleMode:lr.NEAREST,resolution:1,mipmap:Qt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new te(null,{scaleMode:lr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Qt.OFF,format:G.DEPTH_COMPONENT,type:Z.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const s=this.colorTextures[i],n=s.resolution;s.setSize(e/n,t/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Ay extends te{constructor(e={}){if(typeof e=="number"){const t=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];e={width:t,height:i,scaleMode:s,resolution:n}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=De.NONE),super(null,e),this.mipmap=Qt.OFF,this.valid=!0,this._clear=new Se([0,0,0,0]),this.framebuffer=new mc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class gr extends cn{constructor(e){const t=e,i=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,s=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(i,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,i){i===void 0&&!t.startsWith("data:")?e.crossOrigin=gE(t):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,t,i,s){const n=e.gl,a=t.realWidth,o=t.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===et.UNPACK),!this.noSubImage&&t.target===n.TEXTURE_2D&&i.width===a&&i.height===o?n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.format,i.type,s):(i.width=a,i.height=o,n.texImage2D(t.target,0,i.internalFormat,t.format,i.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(t,i),super.update()}dispose(){this.source=null}}class Cy extends gr{constructor(e,t){if(t=t||{},typeof e=="string"){const i=new Image;gr.crossOrigin(i,e,t.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??W.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,i)=>{const s=this.source;this.url=s.src;const n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=a=>{i(a),this.onError.emit(a)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>t(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===et.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,i){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,i,this.bitmap),!this.preserveBitmap){let s=!0;const n=t._glTextures;for(const a in n){const o=n[a];if(o!==i&&o.dirtyId!==t.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Ch{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,i){const s=t.width,n=t.height;if(i){const a=e.width/2/s,o=e.height/2/n,l=e.x/s+a,u=e.y/n+o;i=Te.add(i,Te.NW),this.x0=l+a*Te.uX(i),this.y0=u+o*Te.uY(i),i=Te.add(i,2),this.x1=l+a*Te.uX(i),this.y1=u+o*Te.uY(i),i=Te.add(i,2),this.x2=l+a*Te.uX(i),this.y2=u+o*Te.uY(i),i=Te.add(i,2),this.x3=l+a*Te.uX(i),this.y3=u+o*Te.uY(i)}else this.x0=e.x/s,this.y0=e.y/n,this.x1=(e.x+e.width)/s,this.y1=e.y/n,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/n,this.x3=e.x/s,this.y3=(e.y+e.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Ch.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Yf=new Ch;function sa(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class X extends On{constructor(e,t,i,s,n,a,o){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new ae(0,0,1,1)),e instanceof X&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=Yf,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new ye(a.x,a.y):new ye(0,0),this.defaultBorders=o,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&Bt[t.url]&&X.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,X.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),i=new X(this.baseTexture,!this.noFrame&&e,t,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===Yf&&(this._uvs=new Ch),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},i=W.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else if(e instanceof te){if(!e.cacheId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${o}-${gi()}`,te.addToCache(e,e.cacheId)}n=e.cacheId}else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${gi()}`}n=e._pixiId}let a=Bt[n];if(s&&i&&!a)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!a&&!(e instanceof te)?(t.resolution||(t.resolution=mr(e)),a=new X(new te(e,t)),a.baseTexture.cacheId=n,te.addToCache(a.baseTexture,n),X.addToCache(a,n)):!a&&e instanceof te&&(a=new X(e),X.addToCache(a,n)),a}static fromURL(e,t){const i=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),s=X.from(e,Object.assign({resourceOptions:i},t),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(e,t,i,s){return new X(te.fromBuffer(e,t,i,s))}static fromLoader(e,t,i,s){const n=new te(e,Object.assign({scaleMode:te.defaultOptions.scaleMode,resolution:mr(t)},s)),{resource:a}=n;a instanceof Cy&&(a.url=t);const o=new X(n);return i||(i=t),te.addToCache(o.baseTexture,i),X.addToCache(o,i),i!==t&&(te.addToCache(o.baseTexture,t),X.addToCache(o,t)),o.baseTexture.valid?Promise.resolve(o):new Promise(l=>{o.baseTexture.once("loaded",()=>l(o))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Bt[t]&&Bt[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Bt[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Bt[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Bt[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Bt[e.textureCacheIds[t]]===e&&delete Bt[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:i,width:s,height:n}=e,a=t+s>this.baseTexture.width,o=i+n>this.baseTexture.height;if(a||o){const l=a&&o?"and":"or",u=`X: ${t} + ${s} = ${t+s} > ${this.baseTexture.width}`,c=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${c}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return X._EMPTY||(X._EMPTY=new X(new te),sa(X._EMPTY),sa(X._EMPTY.baseTexture)),X._EMPTY}static get WHITE(){if(!X._WHITE){const e=W.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),X._WHITE=new X(te.from(e)),sa(X._WHITE),sa(X._WHITE.baseTexture)}return X._WHITE}}class Ei extends X{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,i=!0){const s=this.baseTexture.resolution,n=Math.round(e*s)/s,a=Math.round(t*s)/s;this.valid=n>0&&a>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(n,a),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Ei(new Ay(e))}}class Py{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,i=De.NONE){const s=new Ay(Object.assign({width:e,height:t,resolution:1,multisample:i},this.textureOptions));return new Ei(s)}getOptimalTexture(e,t,i=1,s=De.NONE){let n;e=Math.max(Math.ceil(e*i-1e-6),1),t=Math.max(Math.ceil(t*i-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=eo(e),t=eo(t),n=((e&65535)<<16|t&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let a=this.texturePool[n].pop();return a||(a=this.createTexture(e,t,s)),a.filterPoolKey=n,a.setResolution(i),a}getFilterTexture(e,t,i){const s=this.getOptimalTexture(e.width,e.height,t||e.resolution,i||De.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const i=this.texturePool[t];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const i=this.texturePool[t];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}Py.SCREEN_KEY=-1;class XE extends Fr{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Ry extends Fr{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Re(this.vertices),this.uvBuffer=new Re(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+t.width/e.width,this.uvs[3]=s,this.uvs[4]=i+t.width/e.width,this.uvs[5]=s+t.height/e.height,this.uvs[6]=i,this.uvs[7]=s+t.height/e.height,i=t.x,s=t.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+t.width,this.vertices[3]=s,this.vertices[4]=i+t.width,this.vertices[5]=s+t.height,this.vertices[6]=i,this.vertices[7]=s+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class YE{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=De.NONE,this.sourceFrame=new ae,this.destinationFrame=new ae,this.bindingSourceFrame=new ae,this.bindingDestinationFrame=new ae,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const na=[new ye,new ye,new ye,new ye],ql=new Ee;class Iy{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Py,this.statePool=[],this.quad=new XE,this.quadUv=new Ry,this.tempRect=new ae,this.activeState={},this.globalUniforms=new At({outputFrame:new ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new YE,a=i.renderTexture;let o,l;if(a.current){const g=a.current;o=g.resolution,l=g.multisample}else o=i.resolution,l=i.multisample;let u=t[0].resolution||o,c=t[0].multisample??l,d=t[0].padding,h=t[0].autoFit,f=t[0].legacy??!0;for(let g=1;g<t.length;g++){const b=t[g];u=Math.min(u,b.resolution||o),c=Math.min(c,b.multisample??l),d=this.useMaxPadding?Math.max(d,b.padding):d+b.padding,h=h&&b.autoFit,f=f||(b.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),s.push(n),n.resolution=u,n.multisample=c,n.legacy=f,n.target=e,n.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),n.sourceFrame.pad(d);const p=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(ql.copyFrom(i.projection.transform).invert(),p),h?(n.sourceFrame.fit(p),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(p)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,u,c),n.filters=t,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=n.sourceFrame.width,m.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(a.sourceFrame),n.bindingDestinationFrame.copyFrom(a.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,a.bind(n.renderTexture,n.sourceFrame,m),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;const s=this.globalUniforms.uniforms;s.outputFrame=t.sourceFrame,s.resolution=t.resolution;const n=s.inputSize,a=s.inputPixel,o=s.inputClamp;if(n[0]=t.destinationFrame.width,n[1]=t.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],a[0]=Math.round(n[0]*t.resolution),a[1]=Math.round(n[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=t.sourceFrame.width*n[2]-.5*a[2],o[3]=t.sourceFrame.height*n[3]-.5*a[3],t.legacy){const u=s.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,t.renderTexture,l.renderTexture,zt.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;let d=0;for(d=0;d<i.length-1;++d){d===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,t.resolution),c.filterFrame=u.filterFrame),i[d].apply(this,u,c,zt.CLEAR,t);const h=u;u=c,c=h}i[d].apply(this,u,l.renderTexture,zt.BLEND,t),d>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=zt.CLEAR){const{renderTexture:i,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,i.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=s.stateId&1||this.forceClear;(t===zt.CLEAR||t===zt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,i,s){const n=this.renderer;n.state.set(e.state),this.bindAndClear(i,s),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(Wt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(Wt.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=t._texture,a=e.set(s.width,0,0,s.height,i.x,i.y),o=t.worldTransform.copyTo(Ee.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/n.width,1/n.height),a.translate(t.anchor.x,t.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,i=1,s=De.NONE){return this.texturePool.getOptimalTexture(e,t,i,s)}getFilterTexture(e,t,i){if(typeof e=="number"){const n=e;e=t,t=n}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,i||De.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const i=na[0],s=na[1],n=na[2],a=na[3];i.set(t.left,t.top),s.set(t.left,t.bottom),n.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(i,i),e.apply(s,s),e.apply(n,n),e.apply(a,a);const o=Math.min(i.x,s.x,n.x,a.x),l=Math.min(i.y,s.y,n.y,a.y),u=Math.max(i.x,s.x,n.x,a.x),c=Math.max(i.y,s.y,n.y,a.y);t.x=o,t.y=l,t.width=u-o,t.height=c-l}roundFrame(e,t,i,s,n){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(n){const{a,b:o,c:l,d:u}=n;if((Math.abs(o)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}n=n?ql.copyFrom(n):ql.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,e),e.ceil(t),this.transformAABB(n.invert(),e)}}}Iy.extension={type:H.RendererSystem,name:"filter"};Y.add(Iy);class QE{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=De.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const KE=new ae;class My{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new mc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ae,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;W.PREFER_ENV===Si.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=s=>t.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,i=0){const{gl:s}=this;if(e){const n=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,n.mipLevel=i),n.dirtyId!==e.dirtyId&&(n.dirtyId=e.dirtyId,n.dirtyFormat!==e.dirtyFormat?(n.dirtyFormat=e.dirtyFormat,n.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):n.dirtySize!==e.dirtySize&&(n.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let a=0;a<e.colorTextures.length;a++){const o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const a=t.width>>i,o=t.height>>i,l=a/t.width;this.setViewport(t.x*l,t.y*l,a,o)}else{const a=e.width>>i,o=e.height>>i;this.setViewport(0,0,a,o)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,i,s){const n=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==e||n.y!==t)&&(n.x=e,n.y=t,n.width=i,n.height=s,this.gl.viewport(e,t,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,i,s,n=Gu.COLOR|Gu.DEPTH){const{gl:a}=this;a.clearColor(e,t,i,s),a.clear(n)}initFramebuffer(e){const{gl:t}=this,i=new QE(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID];if(i.stencil){t.bindRenderbuffer(t.RENDERBUFFER,i.stencil);let a;this.renderer.context.webGLVersion===1?a=t.DEPTH_STENCIL:e.depth&&e.stencil?a=t.DEPTH24_STENCIL8:e.depth?a=t.DEPTH_COMPONENT24:a=t.STENCIL_INDEX8,i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,a,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,a,e.width,e.height)}const s=e.colorTextures;let n=s.length;t.drawBuffers||(n=Math.min(n,1));for(let a=0;a<n;a++){const o=s[a],l=o.parentTextureArray||o;this.renderer.texture.bind(l,0),a===0&&i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:i}=this,s=e.glFramebuffers[this.CONTEXT_UID],n=e.colorTextures;let a=n.length;i.drawBuffers||(a=Math.min(a,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const o=[];for(let l=0;l<a;l++){const u=n[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),l===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,t),o.push(i.COLOR_ATTACHMENT0+l))}if(o.length>1&&i.drawBuffers(o),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||i.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):e.depth&&e.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):e.depth?(l=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,u,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,u,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,s.stencil)}else s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let i=De.NONE;if(e<=1||t===null)return i;for(let s=0;s<t.length;s++)if(t[s]<=e){i=t[s];break}return i===1&&(i=De.NONE),i}blit(e,t,i){const{current:s,renderer:n,gl:a,CONTEXT_UID:o}=this;if(n.context.webGLVersion!==2||!s)return;const l=s.glFramebuffers[o];if(!l)return;if(!e){if(!l.msaaBuffer)return;const c=s.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new mc(s.width,s.height),l.blitFramebuffer.addColorTexture(0,c)),e=l.blitFramebuffer,e.colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=KE,t.width=s.width,t.height=s.height),i||(i=t);const u=t.width===i.width&&t.height===i.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,l.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,u?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const i=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(e);n>=0&&this.managedFramebuffers.splice(n,1),e.disposeRunner.remove(this),t||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const i=e.width,s=e.height,n=this.gl,a=t.stencil=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,a);let o,l;this.renderer.context.webGLVersion===1?(o=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH_STENCIL):e.depth?(o=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH24_STENCIL8):(o=n.STENCIL_ATTACHMENT,l=n.STENCIL_INDEX8),t.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,t.multisample,l,i,s):n.renderbufferStorage(n.RENDERBUFFER,l,i,s),n.framebufferRenderbuffer(n.FRAMEBUFFER,o,n.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ae}destroy(){this.renderer=null}}My.extension={type:H.RendererSystem,name:"framebuffer"};Y.add(My);const Xl={5126:4,5123:2,5121:1};class Oy{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;W.PREFER_ENV===Si.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=s=>i.bindVertexArrayOES(s),e.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),e.drawElementsInstanced=(s,n,a,o,l)=>i.drawElementsInstancedANGLE(s,n,a,o,l),e.drawArraysInstanced=(s,n,a,o)=>i.drawArraysInstancedANGLE(s,n,a,o)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:i}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);const a=s[t.program.id]||this.initGeometryVao(e,t,n);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const s=e.buffers[i];t.update(s)}}checkCompatibility(e,t){const i=e.attributes,s=t.attributeData;for(const n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(e,t){const i=e.attributes,s=t.attributeData,n=["g",e.id];for(const a in i)s[a]&&n.push(a,s[a].location);return n.join("-")}initGeometryVao(e,t,i=!0){const s=this.gl,n=this.CONTEXT_UID,a=this.renderer.buffer,o=t.program;o.glPrograms[n]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,o);const l=this.getSignature(e,o),u=e.glVertexArrayObjects[this.CONTEXT_UID];let c=u[l];if(c)return u[o.id]=c,c;const d=e.buffers,h=e.attributes,f={},p={};for(const m in d)f[m]=0,p[m]=0;for(const m in h)!h[m].size&&o.attributeData[m]?h[m].size=o.attributeData[m].size:h[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[h[m].buffer]+=h[m].size*Xl[h[m].type];for(const m in h){const g=h[m],b=g.size;g.stride===void 0&&(f[g.buffer]===b*Xl[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=b*Xl[g.type])}c=s.createVertexArray(),s.bindVertexArray(c);for(let m=0;m<d.length;m++){const g=d[m];a.bind(g),i&&g._glBuffers[n].refCount++}return this.activateVao(e,o),u[o.id]=c,u[l]=c,s.bindVertexArray(null),a.unbind(Xt.ARRAY_BUFFER),c}disposeGeometry(e,t){var o;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=e.buffers,a=(o=this.renderer)==null?void 0:o.buffer;if(e.disposeRunner.remove(this),!!i){if(a)for(let l=0;l<n.length;l++){const u=n[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&a.dispose(n[l],t))}if(!t){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),s.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)}activateVao(e,t){const i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,a=e.buffers,o=e.attributes;e.indexBuffer&&n.bind(e.indexBuffer);let l=null;for(const u in o){const c=o[u],d=a[c.buffer],h=d._glBuffers[s];if(t.attributeData[u]){l!==h&&(n.bind(d),l=h);const f=t.attributeData[u].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)i.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,s){const{gl:n}=this,a=this._activeGeometry;if(a.indexBuffer){const o=a.indexBuffer.data.BYTES_PER_ELEMENT,l=o===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?n.drawElementsInstanced(e,t||a.indexBuffer.data.length,l,(i||0)*o,s||1):n.drawElements(e,t||a.indexBuffer.data.length,l,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?n.drawArraysInstanced(e,i,t||a.getSize(),s||1):n.drawArrays(e,i,t||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Oy.extension={type:H.RendererSystem,name:"geometry"};Y.add(Oy);const Qf=new Ee;class Dy{constructor(e,t){this._texture=e,this.mapCoord=new Ee,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const i=this.mapCoord;for(let s=0;s<e.length;s+=2){const n=e[s],a=e[s+1];t[s]=n*i.a+a*i.c+i.tx,t[s+1]=n*i.b+a*i.d+i.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=t.orig,n=t.trim;n&&(Qf.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Qf));const a=t.baseTexture,o=this.uClampFrame,l=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(t._frame.x+l+u)/a.width,o[1]=(t._frame.y+l+u)/a.height,o[2]=(t._frame.x+t._frame.width-l+u)/a.width,o[3]=(t._frame.y+t._frame.height-l+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&t.rotate===0,!0}}var ZE=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,JE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class eT extends Ye{constructor(e,t,i){let s=null;typeof e!="string"&&t===void 0&&i===void 0&&(s=e,e=void 0,t=void 0,i=void 0),super(e||JE,t||ZE,i),this.maskSprite=s,this.maskMatrix=new Ee}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,i,s){const n=this._maskSprite,a=n._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Dy(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,t,i,s))}}class tT{constructor(e=null){this.type=ke.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ye.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ke.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Ly{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let i=t;if(!i.isMaskData){const n=this.maskDataPool.pop()||new tT;n.pooled=!0,n.maskObject=t,i=n}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==ke.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case ke.SCISSOR:this.renderer.scissor.push(i);break;case ke.STENCIL:this.renderer.stencil.push(i);break;case ke.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case ke.COLOR:this.pushColorMask(i);break}i.type===ke.SPRITE&&this.maskStack.push(i)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case ke.SCISSOR:this.renderer.scissor.pop(t);break;case ke.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case ke.SPRITE:this.popSpriteMask(t);break;case ke.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===ke.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=ke.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=ke.SCISSOR:e.type=ke.STENCIL:e.type=ke.COLOR}pushSpriteMask(e){const{maskObject:t}=e,i=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new eT])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=t;const n=i.filterArea;i.filterArea=t.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=n,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const t=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==t&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}Ly.extension={type:H.RendererSystem,name:"mask"};Y.add(Ly);class Ny{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,i=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==i&&(s===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Kf=new Ee,Zf=[],Fy=class Fa extends Ny{constructor(e){super(e),this.glConst=W.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:s}=this,n=s.renderTexture,a=i.getBounds(!0,Zf.pop()??new ae);this.roundFrameToPixels(a,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),t&&a.fit(t),e._scissorRectLocal=a}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:s,d:n}=e;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Fa.isMatrixRotated(t.worldTransform)||Fa.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,s,n){Fa.isMatrixRotated(n)||(n=n?Kf.copyFrom(n):Kf.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Zf.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Fy.extension={type:H.RendererSystem,name:"scissor"};let rT=Fy;Y.add(rT);class ky extends Ny{constructor(e){super(e),this.glConst=W.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:i}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const n=e._colorMask;n!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(e._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(i._colorMask=s,t.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}ky.extension={type:H.RendererSystem,name:"stencil"};Y.add(ky);class By{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return he("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return he("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return he("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}By.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"_plugin"};Y.add(By);class Uy{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ee,this.transform=null}update(e,t,i,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(e,t,i,s){const n=this.projectionMatrix,a=s?-1:1;n.identity(),n.a=1/t.width*2,n.d=a*(1/t.height*2),n.tx=-1-t.x*n.a,n.ty=-a-t.y*n.d}setTransform(e){}destroy(){this.renderer=null}}Uy.extension={type:H.RendererSystem,name:"projection"};Y.add(Uy);const iT=new Ah,Jf=new ae;class jy{constructor(e){this.renderer=e,this._tempMatrix=new Ee}generateTexture(e,t){const{region:i,...s}=t||{},n=(i==null?void 0:i.copyTo(Jf))||e.getLocalBounds(Jf,!0),a=s.resolution||this.renderer.resolution;n.width=Math.max(n.width,1/a),n.height=Math.max(n.height,1/a),s.width=n.width,s.height=n.height,s.resolution=a,s.multisample??(s.multisample=this.renderer.multisample);const o=Ei.create(s);this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const l=e.transform;return e.transform=iT,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,o}destroy(){}}jy.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"textureGenerator"};Y.add(jy);const Xr=new ae,ws=new ae;class $y{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ae,this.destinationFrame=new ae,this.viewportFrame=new ae}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,i){const s=this.renderer;this.current=e;let n,a,o;e?(n=e.baseTexture,o=n.resolution,t||(Xr.width=e.frame.width,Xr.height=e.frame.height,t=Xr),i||(ws.x=e.frame.x,ws.y=e.frame.y,ws.width=t.width,ws.height=t.height,i=ws),a=n.framebuffer):(o=s.resolution,t||(Xr.width=s._view.screen.width,Xr.height=s._view.screen.height,t=Xr),i||(i=Xr,i.width=t.width,i.height=t.height));const l=this.viewportFrame;l.x=i.x*o,l.y=i.y*o,l.width=i.width*o,l.height=i.height*o,e||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(a,l),this.renderer.projection.update(i,t,o,!a),e?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)}clear(e,t){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Se.shared.setValue(e||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const n=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,o=n.width!==a.width||n.height!==a.height;if(o){let{x:l,y:u,width:c,height:d}=this.viewportFrame;l=Math.round(l),u=Math.round(u),c=Math.round(c),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,d)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,t),o&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}$y.extension={type:H.RendererSystem,name:"renderTexture"};Y.add($y);class sT{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function nT(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const n=e.getActiveAttrib(r,s);if(n.name.startsWith("gl_"))continue;const a=Ey(e,n.type),o={type:a,name:n.name,size:Sy(a),location:e.getAttribLocation(r,n.name)};t[n.name]=o}return t}function aT(r,e){const t={},i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const n=e.getActiveUniform(r,s),a=n.name.replace(/\[.*?\]$/,""),o=!!n.name.match(/\[.*?\]$/),l=Ey(e,n.type);t[a]={name:a,index:s,type:l,size:n.size,isArray:o,value:_y(l,n.size)}}return t}function oT(r,e){var o;const t=zf(r,r.VERTEX_SHADER,e.vertexSrc),i=zf(r,r.FRAGMENT_SHADER,e.fragmentSrc),s=r.createProgram();r.attachShader(s,t),r.attachShader(s,i);const n=(o=e.extra)==null?void 0:o.transformFeedbackVaryings;if(n&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||FE(r,s,t,i),e.attributeData=nT(s,r),e.uniformData=aT(s,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,c)=>u>c?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,r.bindAttribLocation(s,u,l[u]);r.linkProgram(s)}r.deleteShader(t),r.deleteShader(i);const a={};for(const l in e.uniformData){const u=e.uniformData[l];a[l]={location:r.getUniformLocation(s,l),value:_y(u.type,u.size)}}return new sT(s,a)}function lT(r,e,t,i,s){t.buffer.update(s)}const uT={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Gy={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function cT(r){const e=r.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let t=0,i=0,s=0;for(let n=0;n<e.length;n++){const a=e[n];if(t=Gy[a.data.type],a.data.size>1&&(t=Math.max(t,16)*a.data.size),a.dataLen=t,i%t!==0&&i<16){const o=i%t%16;i+=o,s+=o}i+t>16?(s=Math.ceil(s/16)*16,a.offset=s,s+=t,i=t):(a.offset=s,i+=t,s+=t)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function hT(r,e){const t=[];for(const i in r)e[i]&&t.push(e[i]);return t.sort((i,s)=>i.index-s.index),t}function dT(r,e){if(!r.autoManage)return{size:0,syncFunc:lT};const t=hT(r.uniforms,e),{uboElements:i,size:s}=cT(t),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let a=0;a<i.length;a++){const o=i[a],l=r.uniforms[o.data.name],u=o.data.name;let c=!1;for(let d=0;d<es.length;d++){const h=es[d];if(h.codeUbo&&h.test(o.data,l)){n.push(`offset = ${o.offset/4};`,es[d].codeUbo(o.data.name,l)),c=!0;break}}if(!c)if(o.data.size>1){const d=Sy(o.data.type),h=Math.max(Gy[o.data.type]/16,1),f=d/h,p=(4-f%4)%4;n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${o.offset/4};

                t = 0;

                for(var i=0; i < ${o.data.size*h}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const d=uT[o.data.type];n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${o.offset/4};
                ${d};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let fT=0;const aa={textureCount:0,uboCount:0};class Hy{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=fT++}systemCheck(){if(!BE())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),t||(aa.textureCount=0,aa.uboCount=0,this.syncUniformGroup(e.uniformGroup,aa)),s}setUniforms(e){const t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,t){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))}syncUniforms(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=DE(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const s=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),s(i.uniformData,e.uniforms,this.renderer,aa,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])}createSyncBufferGroup(e,t,i){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const n=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(t.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const a=this.getSignature(e,this.shader.program.uniformData,"ubo");let o=this._uboCache[a];if(o||(o=this._uboCache[a]=dT(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(o.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=o.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,i){const s=e.uniforms,n=[`${i}-`];for(const a in s)n.push(a),t[a]&&n.push(t[a].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,i=e.program,s=oT(t,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Hy.extension={type:H.RendererSystem,name:"shader"};Y.add(Hy);class no{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.2 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}no.defaultOptions={hello:!1},no.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"startup"};Y.add(no);function pT(r,e=[]){return e[J.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.ADD]=[r.ONE,r.ONE],e[J.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.NONE]=[0,0],e[J.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[J.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[J.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[J.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[J.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[J.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[J.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[J.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[J.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[J.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[J.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const mT=0,gT=1,yT=2,vT=3,bT=4,xT=5,zy=class gc{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=J.NONE,this._blendEq=!1,this.map=[],this.map[mT]=this.setBlend,this.map[gT]=this.setOffset,this.map[yT]=this.setCullFace,this.map[vT]=this.setDepthTest,this.map[bT]=this.setFrontFace,this.map[xT]=this.setDepthMask,this.checks=[],this.defaultState=new tr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=pT(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(gc.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(gc.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};zy.extension={type:H.RendererSystem,name:"state"};let _T=zy;Y.add(_T);class wT extends On{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(s=>e.systems[s]),i=[...t,...Object.keys(e.systems).filter(s=>!t.includes(s))];for(const s of i)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Tt(t)})}addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(e,t){const i=Object.keys(this._systemsHash);e.items.forEach(s=>{const n=i.find(a=>this._systemsHash[a]===s);s[e.name](t[n])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Fs=class ka{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ka.defaultMaxIdle,this.checkCountMax=ka.defaultCheckCountMax,this.mode=ka.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==yh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let s=0;s<t.length;s++){const n=t[s];n.resource&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[s++]=t[n]);t.length=s}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};Fs.defaultMode=yh.AUTO,Fs.defaultMaxIdle=60*60,Fs.defaultCheckCountMax=60*10,Fs.extension={type:H.RendererSystem,name:"textureGC"};let ti=Fs;Y.add(ti);class Yl{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Z.UNSIGNED_BYTE,this.internalFormat=G.RGBA,this.samplerType=0}}function ST(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:V.FLOAT,[r.RGBA]:V.FLOAT,[r.ALPHA]:V.FLOAT,[r.LUMINANCE]:V.FLOAT,[r.LUMINANCE_ALPHA]:V.FLOAT,[r.R8]:V.FLOAT,[r.R8_SNORM]:V.FLOAT,[r.RG8]:V.FLOAT,[r.RG8_SNORM]:V.FLOAT,[r.RGB8]:V.FLOAT,[r.RGB8_SNORM]:V.FLOAT,[r.RGB565]:V.FLOAT,[r.RGBA4]:V.FLOAT,[r.RGB5_A1]:V.FLOAT,[r.RGBA8]:V.FLOAT,[r.RGBA8_SNORM]:V.FLOAT,[r.RGB10_A2]:V.FLOAT,[r.RGB10_A2UI]:V.FLOAT,[r.SRGB8]:V.FLOAT,[r.SRGB8_ALPHA8]:V.FLOAT,[r.R16F]:V.FLOAT,[r.RG16F]:V.FLOAT,[r.RGB16F]:V.FLOAT,[r.RGBA16F]:V.FLOAT,[r.R32F]:V.FLOAT,[r.RG32F]:V.FLOAT,[r.RGB32F]:V.FLOAT,[r.RGBA32F]:V.FLOAT,[r.R11F_G11F_B10F]:V.FLOAT,[r.RGB9_E5]:V.FLOAT,[r.R8I]:V.INT,[r.R8UI]:V.UINT,[r.R16I]:V.INT,[r.R16UI]:V.UINT,[r.R32I]:V.INT,[r.R32UI]:V.UINT,[r.RG8I]:V.INT,[r.RG8UI]:V.UINT,[r.RG16I]:V.INT,[r.RG16UI]:V.UINT,[r.RG32I]:V.INT,[r.RG32UI]:V.UINT,[r.RGB8I]:V.INT,[r.RGB8UI]:V.UINT,[r.RGB16I]:V.INT,[r.RGB16UI]:V.UINT,[r.RGB32I]:V.INT,[r.RGB32UI]:V.UINT,[r.RGBA8I]:V.INT,[r.RGBA8UI]:V.UINT,[r.RGBA16I]:V.INT,[r.RGBA16UI]:V.UINT,[r.RGBA32I]:V.INT,[r.RGBA32UI]:V.UINT,[r.DEPTH_COMPONENT16]:V.FLOAT,[r.DEPTH_COMPONENT24]:V.FLOAT,[r.DEPTH_COMPONENT32F]:V.FLOAT,[r.DEPTH_STENCIL]:V.FLOAT,[r.DEPTH24_STENCIL8]:V.FLOAT,[r.DEPTH32F_STENCIL8]:V.FLOAT}:e={[r.RGB]:V.FLOAT,[r.RGBA]:V.FLOAT,[r.ALPHA]:V.FLOAT,[r.LUMINANCE]:V.FLOAT,[r.LUMINANCE_ALPHA]:V.FLOAT,[r.DEPTH_STENCIL]:V.FLOAT},e}function ET(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[Z.UNSIGNED_BYTE]:{[G.RGBA]:r.RGBA8,[G.RGB]:r.RGB8,[G.RG]:r.RG8,[G.RED]:r.R8,[G.RGBA_INTEGER]:r.RGBA8UI,[G.RGB_INTEGER]:r.RGB8UI,[G.RG_INTEGER]:r.RG8UI,[G.RED_INTEGER]:r.R8UI,[G.ALPHA]:r.ALPHA,[G.LUMINANCE]:r.LUMINANCE,[G.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Z.BYTE]:{[G.RGBA]:r.RGBA8_SNORM,[G.RGB]:r.RGB8_SNORM,[G.RG]:r.RG8_SNORM,[G.RED]:r.R8_SNORM,[G.RGBA_INTEGER]:r.RGBA8I,[G.RGB_INTEGER]:r.RGB8I,[G.RG_INTEGER]:r.RG8I,[G.RED_INTEGER]:r.R8I},[Z.UNSIGNED_SHORT]:{[G.RGBA_INTEGER]:r.RGBA16UI,[G.RGB_INTEGER]:r.RGB16UI,[G.RG_INTEGER]:r.RG16UI,[G.RED_INTEGER]:r.R16UI,[G.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[Z.SHORT]:{[G.RGBA_INTEGER]:r.RGBA16I,[G.RGB_INTEGER]:r.RGB16I,[G.RG_INTEGER]:r.RG16I,[G.RED_INTEGER]:r.R16I},[Z.UNSIGNED_INT]:{[G.RGBA_INTEGER]:r.RGBA32UI,[G.RGB_INTEGER]:r.RGB32UI,[G.RG_INTEGER]:r.RG32UI,[G.RED_INTEGER]:r.R32UI,[G.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[Z.INT]:{[G.RGBA_INTEGER]:r.RGBA32I,[G.RGB_INTEGER]:r.RGB32I,[G.RG_INTEGER]:r.RG32I,[G.RED_INTEGER]:r.R32I},[Z.FLOAT]:{[G.RGBA]:r.RGBA32F,[G.RGB]:r.RGB32F,[G.RG]:r.RG32F,[G.RED]:r.R32F,[G.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[Z.HALF_FLOAT]:{[G.RGBA]:r.RGBA16F,[G.RGB]:r.RGB16F,[G.RG]:r.RG16F,[G.RED]:r.R16F},[Z.UNSIGNED_SHORT_5_6_5]:{[G.RGB]:r.RGB565},[Z.UNSIGNED_SHORT_4_4_4_4]:{[G.RGBA]:r.RGBA4},[Z.UNSIGNED_SHORT_5_5_5_1]:{[G.RGBA]:r.RGB5_A1},[Z.UNSIGNED_INT_2_10_10_10_REV]:{[G.RGBA]:r.RGB10_A2,[G.RGBA_INTEGER]:r.RGB10_A2UI},[Z.UNSIGNED_INT_10F_11F_11F_REV]:{[G.RGB]:r.R11F_G11F_B10F},[Z.UNSIGNED_INT_5_9_9_9_REV]:{[G.RGB]:r.RGB9_E5},[Z.UNSIGNED_INT_24_8]:{[G.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[Z.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[G.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[Z.UNSIGNED_BYTE]:{[G.RGBA]:r.RGBA,[G.RGB]:r.RGB,[G.ALPHA]:r.ALPHA,[G.LUMINANCE]:r.LUMINANCE,[G.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Z.UNSIGNED_SHORT_5_6_5]:{[G.RGB]:r.RGB},[Z.UNSIGNED_SHORT_4_4_4_4]:{[G.RGBA]:r.RGBA},[Z.UNSIGNED_SHORT_5_5_5_1]:{[G.RGBA]:r.RGBA}},e}class Vy{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new te,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=ET(e),this.samplerTypes=ST(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let s=0;s<t;s++)this.boundTextures[s]=null;this.emptyTextures={};const i=new Yl(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Yl(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,t=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===e&&(this.currentLocation!==s&&(t.activeTexture(t.TEXTURE0+s),this.currentLocation=s),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[s]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=e-1;n>=0;--n){const a=t[n];a&&a._glTextures[s].samplerType!==V.FLOAT&&this.renderer.texture.unbind(a)}}initTexture(e){const t=new Yl(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var i;t.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??V.FLOAT,this.webGLVersion===2&&e.type===Z.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var s;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const i=this.renderer;if(this.initTextureType(e,t),(s=e.resource)==null?void 0:s.upload(i,e,t))t.samplerType!==V.FLOAT&&(this.hasIntegerTextures=!0);else{const n=e.realWidth,a=e.realHeight,o=i.gl;(t.width!==n||t.height!==a||t.dirtyId<0)&&(t.width=n,t.height=a,o.texImage2D(e.target,0,t.internalFormat,n,a,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const s=this.managedTextures.indexOf(e);s!==-1&&Ji(this.managedTextures,s,1)}}updateTextureStyle(e){var i;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Qt.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Lr.CLAMP:t.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const i=this.gl;if(t.mipmap&&e.mipmap!==Qt.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===lr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===lr.LINEAR){const n=Math.min(e.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===lr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===lr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}Vy.extension={type:H.RendererSystem,name:"texture"};Y.add(Vy);class Wy{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,s=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:i,renderer:s}=this;t&&s.shader.bind(t),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:i,CONTEXT_UID:s}=this,n=t.createTransformFeedback();e._glTransformFeedbacks[s]=n,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n);for(let a=0;a<e.buffers.length;a++){const o=e.buffers[a];o&&(i.buffer.update(o),o._glBuffers[s].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a,o._glBuffers[s].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),n}disposeTransformFeedback(e,t){const i=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let a=0;a<e.buffers.length;a++){const o=e.buffers[a];if(!o)continue;const l=o._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&n.dispose(o,t))}i&&(t||s.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Wy.extension={type:H.RendererSystem,name:"transformFeedback"};Y.add(Wy);class ao{constructor(e){this.renderer=e}init(e){this.screen=new ae(0,0,e.width,e.height),this.element=e.view||W.ADAPTER.createCanvas(),this.resolution=e.resolution||W.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ao.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ao.extension={type:[H.RendererSystem,H.CanvasRendererSystem],name:"_view"};Y.add(ao);W.PREFER_ENV=Si.WEBGL2;W.STRICT_TEXTURE_CACHE=!1;W.RENDER_OPTIONS={...so.defaultOptions,...io.defaultOptions,...ao.defaultOptions,...no.defaultOptions};Object.defineProperties(W,{WRAP_MODE:{get(){return te.defaultOptions.wrapMode},set(r){he("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),te.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return te.defaultOptions.scaleMode},set(r){he("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),te.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return te.defaultOptions.mipmap},set(r){he("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),te.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return te.defaultOptions.anisotropicLevel},set(r){he("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),te.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return he("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ye.defaultResolution},set(r){Ye.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return he("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ye.defaultMultisample},set(r){Ye.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return ei.defaultMaxTextures},set(r){he("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ei.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return ei.defaultBatchSize},set(r){he("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ei.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return ei.canUploadSameBuffer},set(r){he("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ei.canUploadSameBuffer=r}},GC_MODE:{get(){return ti.defaultMode},set(r){he("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),ti.defaultMode=r}},GC_MAX_IDLE:{get(){return ti.defaultMaxIdle},set(r){he("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),ti.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return ti.defaultCheckCountMax},set(r){he("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),ti.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return hr.defaultVertexPrecision},set(r){he("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),hr.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return hr.defaultFragmentPrecision},set(r){he("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),hr.defaultFragmentPrecision=r}}});var yi=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(yi||{});class Ql{constructor(e,t=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=s}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const qy=class it{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ql(null,null,1/0),this.deltaMS=1/it.targetFPMS,this.elapsedMS=1/it.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=yi.NORMAL){return this._addListener(new Ql(e,t,i))}addOnce(e,t,i=yi.NORMAL){return this._addListener(new Ql(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*it.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,it.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!it._shared){const e=it._shared=new it;e.autoStart=!0,e._protected=!0}return it._shared}static get system(){if(!it._system){const e=it._system=new it;e.autoStart=!0,e._protected=!0}return it._system}};qy.targetFPMS=.06;let nt=qy;Object.defineProperties(W,{TARGET_FPMS:{get(){return nt.targetFPMS},set(r){he("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),nt.targetFPMS=r}}});class Xy{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,yi.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?nt.shared:new nt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Xy.extension=H.Application;Y.add(Xy);const Yy=[];Y.handleByList(H.Renderer,Yy);function TT(r){for(const e of Yy)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var AT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,CT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const PT=AT,Qy=CT;class Ky{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=De.HIGH?this.multisample=De.HIGH:t>=De.MEDIUM?this.multisample=De.MEDIUM:t>=De.LOW?this.multisample=De.LOW:this.multisample=De.NONE}destroy(){}}Ky.extension={type:H.RendererSystem,name:"_multisample"};Y.add(Ky);class RT{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Zy{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,s=e._glBuffers[i]||this.createGLBuffer(e);t.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[t]!==e){const n=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,n.buffer)}}bindBufferRange(e,t,i){const{gl:s,CONTEXT_UID:n}=this;i=i||0;const a=e._glBuffers[n]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,a.buffer,i*256,256)}update(e){const{gl:t,CONTEXT_UID:i}=this,s=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,t.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const n=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,n)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),i&&(t||s.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:i}=this;return e._glBuffers[t]=new RT(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}Zy.extension={type:H.RendererSystem,name:"buffer"};Y.add(Zy);class Jy{constructor(e){this.renderer=e}render(e,t){const i=this.renderer;let s,n,a,o;if(t&&(s=t.renderTexture,n=t.clear,a=t.transform,o=t.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=a,!i.context.isLost){if(s||(this.lastObjectRendered=e),!o){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),s&&(t.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Jy.extension={type:H.RendererSystem,name:"objectRenderer"};Y.add(Jy);const Ba=class yc extends wT{constructor(e){super(),this.type=jg.WEBGL,e=Object.assign({},W.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new At({projectionMatrix:new Ee},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:yc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(he("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=yc.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:ZS()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return he("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return he("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return he("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return he("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){he("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return he("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){he("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return he("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Ba.extension={type:H.Renderer,priority:1},Ba.__plugins={},Ba.__systems={};let Ph=Ba;Y.handleByMap(H.RendererPlugin,Ph.__plugins);Y.handleByMap(H.RendererSystem,Ph.__systems);Y.add(Ph);class ev extends cn{constructor(e,t){const{width:i,height:s}=t||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<e;n++){const a=new te;this.items.push(a),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof cn?this.addResourceAt(e[i],i):this.addResourceAt(vy(e[i],t),i))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:i}=this.items[0];return this.resize(t,i),this.update(),Promise.resolve(this)}),this._load}}class IT extends ev{constructor(e,t){const{width:i,height:s}=t||{};let n,a;Array.isArray(e)?(n=e,a=e.length):a=e,super(a,{width:i,height:s}),n&&this.initFromArray(n,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Qi.TEXTURE_2D_ARRAY}upload(e,t,i){const{length:s,itemDirtyIds:n,items:a}=this,{gl:o}=e;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,t.format,i.type,null);for(let l=0;l<s;l++){const u=a[l];n[l]<u.dirtyId&&(n[l]=u.dirtyId,u.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,i.type,u.resource.source))}return!0}}class MT extends gr{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const tv=class ks extends ev{constructor(e,t){const{width:i,height:s,autoLoad:n,linkBaseTexture:a}=t||{};if(e&&e.length!==ks.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:s});for(let o=0;o<ks.SIDES;o++)this.items[o].target=Qi.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=a!==!1,e&&this.initFromArray(e,t),n!==!1&&this.load()}bind(e){super.bind(e),e.target=Qi.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Qi.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const s=this.itemDirtyIds;for(let n=0;n<ks.SIDES;n++){const a=this.items[n];(s[n]<a.dirtyId||i.dirtyId<t.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(e,a,i),s[n]=a.dirtyId):s[n]<-1&&(e.gl.texImage2D(a.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),s[n]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===ks.SIDES}};tv.SIDES=6;let OT=tv;class qi extends gr{constructor(e,t){t=t||{};let i,s,n;typeof e=="string"?(i=qi.EMPTY,s=e,n=!0):(i=e,s=null,n=!1),super(i),this.url=s,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??n,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const i=await W.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===et.UNPACK?"premultiply":"none"});if(this.destroyed){n.close();return}this.source=n,this.update(),e(this)}catch(i){if(this.destroyed)return;t(i),this.onError.emit(i)}}),this._load)}upload(e,t,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return qi._EMPTY=qi._EMPTY??W.ADAPTER.createCanvas(0,0),qi._EMPTY}}const vc=class Ua extends gr{constructor(e,t){t=t||{},super(W.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Ua.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;gr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*t,n=this._overrideHeight||this._overrideWidth/t*i),s=Math.round(s),n=Math.round(n);const a=this.source;a.width=s,a.height=n,a._pixiId=`canvas_${gi()}`,a.getContext("2d").drawImage(e,0,0,t,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(e){const t=Ua.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Ua.SVG_XML.test(e)}};vc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,vc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let bc=vc;class DT extends gr{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const xc=class _c extends gr{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");t.autoLoad!==!1&&i.setAttribute("preload","auto"),t.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),t.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),t.loop===!0&&i.setAttribute("loop",""),t.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];gr.crossOrigin(i,s,t.crossorigin);for(let n=0;n<e.length;++n){const a=document.createElement("source");let{src:o,mime:l}=e[n];if(o=o||e[n],o.startsWith("data:"))l=o.slice(5,o.indexOf(";"));else if(!o.startsWith("blob:")){const u=o.split("?").shift().toLowerCase(),c=u.slice(u.lastIndexOf(".")+1);l=l||_c.MIME_TYPES[c]||`video/${c}`}a.src=o,l&&(a.type=l),i.appendChild(a)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=nt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,i)=>{this.valid?t(this):(this._resolve=t,this._reject=i,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(nt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(nt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(nt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||_c.TYPES.includes(t)}};xc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],xc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let rv=xc;oc.push(qi,Cy,MT,rv,DT,bc,$o,OT,IT);class oo{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ae.EMPTY:(e=e||new ae(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:i,b:s,c:n,d:a,tx:o,ty:l}=e,u=i*t.x+n*t.y+o,c=s*t.x+a*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,i=this.minY,s=this.maxX,n=this.maxY,a=e[0],o=e[1];t=a<t?a:t,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,a=e[2],o=e[3],t=a<t?a:t,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,a=e[4],o=e[5],t=a<t?a:t,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,a=e[6],o=e[7],t=a<t?a:t,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,this.minX=t,this.minY=i,this.maxX=s,this.maxY=n}addFrame(e,t,i,s,n){this.addFrameMatrix(e.worldTransform,t,i,s,n)}addFrameMatrix(e,t,i,s,n){const a=e.a,o=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=a*t+l*i+c,b=o*t+u*i+d;h=g<h?g:h,f=b<f?b:f,p=g>p?g:p,m=b>m?b:m,g=a*s+l*i+c,b=o*s+u*i+d,h=g<h?g:h,f=b<f?b:f,p=g>p?g:p,m=b>m?b:m,g=a*t+l*n+c,b=o*t+u*n+d,h=g<h?g:h,f=b<f?b:f,p=g>p?g:p,m=b>m?b:m,g=a*s+l*n+c,b=o*s+u*n+d,h=g<h?g:h,f=b<f?b:f,p=g>p?g:p,m=b>m?b:m,this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,t,i){let s=this.minX,n=this.minY,a=this.maxX,o=this.maxY;for(let l=t;l<i;l+=2){const u=e[l],c=e[l+1];s=u<s?u:s,n=c<n?c:n,a=u>a?u:a,o=c>o?c:o}this.minX=s,this.minY=n,this.maxX=a,this.maxY=o}addVertices(e,t,i,s){this.addVerticesMatrix(e.worldTransform,t,i,s)}addVerticesMatrix(e,t,i,s,n=0,a=n){const o=e.a,l=e.b,u=e.c,c=e.d,d=e.tx,h=e.ty;let f=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let b=i;b<s;b+=2){const x=t[b],y=t[b+1],v=o*x+u*y+d,S=c*y+l*x+h;f=Math.min(f,v-n),m=Math.max(m,v+n),p=Math.min(p,S-a),g=Math.max(g,S+a)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=g}addBounds(e){const t=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>n?e.maxY:n}addBoundsMask(e,t){const i=e.minX>t.minX?e.minX:t.minX,s=e.minY>t.minY?e.minY:t.minY,n=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=n&&s<=a){const o=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<o?i:o,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=a>c?a:c}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const i=e.minX>t.x?e.minX:t.x,s=e.minY>t.y?e.minY:t.y,n=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=n&&s<=a){const o=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<o?i:o,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=a>c?a:c}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,i,s,n,a){e-=n,t-=a,i+=n,s+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>s?this.maxY:s}}class Ce extends On{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Ah,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new oo,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let i=0;i<t.length;++i){const s=t[i];Object.defineProperty(Ce.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ae),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ae),e=this._localBoundsRect),this._localBounds||(this._localBounds=new oo);const t=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,e);return this.parent=i,this.transform=t,this._bounds=s,this._bounds.updateID+=this._boundsID-n,a}toGlobal(e,t,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,i,s){return t&&(e=t.toGlobal(e,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,i=1,s=1,n=0,a=0,o=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=a,this.skew.y=o,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new LT),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*AE}set angle(e){this.transform.rotation=e*CE}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class LT extends Ce{constructor(){super(...arguments),this.sortDirty=null}}Ce.prototype.displayObjectUpdateTransform=Ce.prototype.updateTransform;const NT=new Ee;function FT(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const iv=class wc extends Ce{constructor(){super(),this.children=[],this.sortableChildren=wc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),s=this.getChildIndex(t);this.children[i]=t,this.children[s]=e,this.onChildrenChange(i<s?i:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);Ji(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,Ji(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ji(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,s=t,n=s-i;let a;if(n>0&&n<=s){a=this.children.splice(i,n);for(let o=0;o<a.length;++o)a[o].parent=null,a[o].transform&&(a[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<a.length;++o)a[o].emit("removed",this),this.emit("childRemoved",a[o],this,o);return a}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(FT),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let s=0,n=this.children.length;s<n;++s){const a=this.children[s];a.visible&&a.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==wc.prototype._render&&(i=this.getBounds(!0));const n=e.projection.transform;if(n&&(s?(s=NT.copyFrom(s),s.prepend(n)):s=n),i&&t.intersects(i,s))this._render(e);else if(this.cullArea)return;for(let a=0,o=this.children.length;a<o;++a){const l=this.children[a],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(e)}}renderAdvanced(e){var n,a,o;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const s=t&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==ke.NONE));if(s&&e.batch.flush(),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}s&&e.batch.flush(),i&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<i.length;++s)i[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};iv.defaultSortableChildren=!1;let Rt=iv;Rt.prototype.containerUpdateTransform=Rt.prototype.updateTransform;Object.defineProperties(W,{SORTABLE_CHILDREN:{get(){return Rt.defaultSortableChildren},set(r){he("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Rt.defaultSortableChildren=r}}});var Wo=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Wo||{});const Ss=new ye,kT=new Uint16Array([0,1,2,0,2,3]);class gs extends Rt{constructor(e){super(),this._anchor=new cr(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Se(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=J.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||X.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=kT,this.pluginName="batch",this.isSprite=!0,this._roundPixels=W.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Rr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Rr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,i=t.a,s=t.b,n=t.c,a=t.d,o=t.tx,l=t.ty,u=this.vertexData,c=e.trim,d=e.orig,h=this._anchor;let f=0,p=0,m=0,g=0;if(c?(p=c.x-h._x*d.width,f=p+c.width,g=c.y-h._y*d.height,m=g+c.height):(p=-h._x*d.width,f=p+d.width,g=-h._y*d.height,m=g+d.height),u[0]=i*p+n*g+o,u[1]=a*g+s*p+l,u[2]=i*f+n*g+o,u[3]=a*g+s*f+l,u[4]=i*f+n*m+o,u[5]=a*m+s*f+l,u[6]=i*p+n*m+o,u[7]=a*m+s*p+l,this._roundPixels){const b=W.RESOLUTION;for(let x=0;x<u.length;++x)u[x]=Math.round(u[x]*b)/b}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,i=e.orig,s=this._anchor,n=this.transform.worldTransform,a=n.a,o=n.b,l=n.c,u=n.d,c=n.tx,d=n.ty,h=-s._x*i.width,f=h+i.width,p=-s._y*i.height,m=p+i.height;if(t[0]=a*h+l*p+c,t[1]=u*p+o*h+d,t[2]=a*f+l*p+c,t[3]=u*p+o*f+d,t[4]=a*f+l*m+c,t[5]=u*m+o*f+d,t[6]=a*h+l*m+c,t[7]=u*m+o*h+d,this._roundPixels){const g=W.RESOLUTION;for(let b=0;b<t.length;++b)t[b]=Math.round(t[b]*g)/g}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new oo),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ae),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Ss);const t=this._texture.orig.width,i=this._texture.orig.height,s=-t*this.anchor.x;let n=0;return Ss.x>=s&&Ss.x<s+t&&(n=-i*this.anchor.y,Ss.y>=n&&Ss.y<n+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const i=e instanceof X?e:X.from(e,t);return new gs(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Rr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Rr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||X.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const oa={willReadFrequently:!0},Ut=class Q{static get experimentalLetterSpacingSupported(){let e=Q._experimentalLetterSpacingSupported;if(e!==void 0){const t=W.ADAPTER.getCanvasRenderingContext2D().prototype;e=Q._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,s,n,a,o,l,u){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=n,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,t,i,s=Q._canvas){i=i??t.wordWrap;const n=t.toFontString(),a=Q.measureFont(n);a.fontSize===0&&(a.fontSize=t.fontSize,a.ascent=t.fontSize);const o=s.getContext("2d",oa);o.font=n;const l=(i?Q.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const m=Q._measureText(l[p],t.letterSpacing,o);u[p]=m,c=Math.max(c,m)}let d=c+t.strokeThickness;t.dropShadow&&(d+=t.dropShadowDistance);const h=t.lineHeight||a.fontSize+t.strokeThickness;let f=Math.max(h,a.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(h+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new Q(e,t,d,f,l,u,h+t.leading,c,a)}static _measureText(e,t,i){let s=!1;Q.experimentalLetterSpacingSupported&&(Q.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(e).width;return n>0&&(s?n-=t:n+=(Q.graphemeSegmenter(e).length-1)*t),n}static wordWrap(e,t,i=Q._canvas){const s=i.getContext("2d",oa);let n=0,a="",o="";const l=Object.create(null),{letterSpacing:u,whiteSpace:c}=t,d=Q.collapseSpaces(c),h=Q.collapseNewlines(c);let f=!d;const p=t.wordWrapWidth+u,m=Q.tokenize(e);for(let g=0;g<m.length;g++){let b=m[g];if(Q.isNewline(b)){if(!h){o+=Q.addLine(a),f=!d,a="",n=0;continue}b=" "}if(d){const y=Q.isBreakingSpace(b),v=Q.isBreakingSpace(a[a.length-1]);if(y&&v)continue}const x=Q.getFromCache(b,u,l,s);if(x>p)if(a!==""&&(o+=Q.addLine(a),a="",n=0),Q.canBreakWords(b,t.breakWords)){const y=Q.wordWrapSplit(b);for(let v=0;v<y.length;v++){let S=y[v],T=S,w=1;for(;y[v+w];){const A=y[v+w];if(!Q.canBreakChars(T,A,b,v,t.breakWords))S+=A;else break;T=A,w++}v+=w-1;const E=Q.getFromCache(S,u,l,s);E+n>p&&(o+=Q.addLine(a),f=!1,a="",n=0),a+=S,n+=E}}else{a.length>0&&(o+=Q.addLine(a),a="",n=0);const y=g===m.length-1;o+=Q.addLine(b,!y),f=!1,a="",n=0}else x+n>p&&(f=!1,o+=Q.addLine(a),a="",n=0),(a.length>0||!Q.isBreakingSpace(b)||f)&&(a+=b,n+=x)}return o+=Q.addLine(a,!1),o}static addLine(e,t=!0){return e=Q.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,s){let n=i[e];return typeof n!="number"&&(n=Q._measureText(e,t,s)+t,i[e]=n),n}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!Q.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Q._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Q._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const n=e[s],a=e[s+1];if(Q.isBreakingSpace(n,a)||Q.isNewline(n)){i!==""&&(t.push(i),i=""),t.push(n);continue}i+=n}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,s,n){return!0}static wordWrapSplit(e){return Q.graphemeSegmenter(e)}static measureFont(e){if(Q._fonts[e])return Q._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=Q._canvas,s=Q._context;s.font=e;const n=Q.METRICS_STRING+Q.BASELINE_SYMBOL,a=Math.ceil(s.measureText(n).width);let o=Math.ceil(s.measureText(Q.BASELINE_SYMBOL).width);const l=Math.ceil(Q.HEIGHT_MULTIPLIER*o);if(o=o*Q.BASELINE_MULTIPLIER|0,a===0||l===0)return Q._fonts[e]=t,t;i.width=a,i.height=l,s.fillStyle="#f00",s.fillRect(0,0,a,l),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,o);const u=s.getImageData(0,0,a,l).data,c=u.length,d=a*4;let h=0,f=0,p=!1;for(h=0;h<o;++h){for(let m=0;m<d;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f+=d;else break}for(t.ascent=o-h,f=c-d,p=!1,h=l;h>o;--h){for(let m=0;m<d;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f-=d;else break}return t.descent=h-o,t.fontSize=t.ascent+t.descent,Q._fonts[e]=t,t}static clearMetrics(e=""){e?delete Q._fonts[e]:Q._fonts={}}static get _canvas(){var e;if(!Q.__canvas){let t;try{const i=new OffscreenCanvas(0,0);if((e=i.getContext("2d",oa))!=null&&e.measureText)return Q.__canvas=i,i;t=W.ADAPTER.createCanvas()}catch{t=W.ADAPTER.createCanvas()}t.width=t.height=10,Q.__canvas=t}return Q.__canvas}static get _context(){return Q.__context||(Q.__context=Q._canvas.getContext("2d",oa)),Q.__context}};Ut.METRICS_STRING="|ÉqÅ",Ut.BASELINE_SYMBOL="M",Ut.BASELINE_MULTIPLIER=1.4,Ut.HEIGHT_MULTIPLIER=2,Ut.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),Ut.experimentalLetterSpacing=!1,Ut._fonts={},Ut._newlines=[10,13],Ut._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Ar=Ut;const BT=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],sv=class Bs{constructor(e){this.styleID=0,this.reset(),Zl(this,e,e)}clone(){const e={};return Zl(e,this,Bs.defaultStyle),new Bs(e)}reset(){Zl(this,Bs.defaultStyle,Bs.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Kl(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Kl(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){UT(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Kl(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!BT.includes(s)&&(s=`"${s}"`),t[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};sv.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Wo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let kr=sv;function Kl(r){const e=Se.shared,t=i=>{const s=e.setValue(i);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function UT(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function Zl(r,e,t){for(const i in t)Array.isArray(e[i])?r[i]=e[i].slice():r[i]=e[i]}const jT={texture:!0,children:!1,baseTexture:!0},nv=class Sc extends gs{constructor(e,t,i){let s=!1;i||(i=W.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=X.from(i);n.orig=new ae,n.trim=new ae,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Sc.defaultResolution??W.RESOLUTION,this._autoResolution=Sc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Ar.experimentalLetterSpacing}static set experimentalLetterSpacing(e){he("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Ar.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,s=Ar.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,a=s.height,o=s.lines,l=s.lineHeight,u=s.lineWidths,c=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let h,f;const p=t.dropShadow?2:1;for(let m=0;m<p;++m){const g=t.dropShadow&&m===0,b=g?Math.ceil(Math.max(1,a)+t.padding*2):0,x=b*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";const v=t.dropShadowColor,S=t.dropShadowBlur*this._resolution,T=t.dropShadowDistance*this._resolution;i.shadowColor=Se.shared.setValue(v).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=S,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*T,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*T+x}else i.fillStyle=this._generateFillStyle(t,o,s),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let y=(l-d.fontSize)/2;l-d.fontSize<0&&(y=0);for(let v=0;v<o.length;v++)h=t.strokeThickness/2,f=t.strokeThickness/2+v*l+d.ascent+y,t.align==="right"?h+=c-u[v]:t.align==="center"&&(h+=(c-u[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[v],h+t.padding,f+t.padding-b,!0),t.fill&&this.drawLetterSpacing(o[v],h+t.padding,f+t.padding-b)}this.updateTexture()}drawLetterSpacing(e,t,i,s=!1){const n=this._style.letterSpacing;let a=!1;if(Ar.experimentalLetterSpacingSupported&&(Ar.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,a=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||a){s?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let o=t;const l=Ar.graphemeSegmenter(e);let u=this.context.measureText(e).width,c=0;for(let d=0;d<l.length;++d){const h=l[d];s?this.context.strokeText(h,o,i):this.context.fillText(h,o,i);let f="";for(let p=d+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,o+=u-c+n,u=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const a=mE(e);a.data&&(e.width=a.width,e.height=a.height,this.context.putImageData(a.data,0,0))}const t=this._texture,i=this._style,s=i.trim?0:i.padding,n=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const a=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,l=this.canvas.width/this._resolution-a-o*2,u=this.canvas.height/this._resolution-a-o*2,c=s.slice(),d=e.fillGradientStops.slice();if(!d.length){const h=c.length+1;for(let f=1;f<h;++f)d.push(f/h)}if(c.unshift(s[0]),d.unshift(0),c.push(s[s.length-1]),d.push(1),e.fillGradientType===Wo.LINEAR_VERTICAL){n=this.context.createLinearGradient(l/2,o,l/2,u+o);const h=i.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const p=i.lineHeight*(f-1)+h,m=i.lineHeight*f;let g=m;f>0&&p>m&&(g=(m+p)/2);const b=m+h,x=i.lineHeight*(f+1);let y=b;f+1<t.length&&x<b&&(y=(b+x)/2);const v=(y-g)/u;for(let S=0;S<c.length;S++){let T=0;typeof d[S]=="number"?T=d[S]:T=S/c.length;let w=Math.min(1,Math.max(0,g/u+T*v));w=Number(w.toFixed(5)),n.addColorStop(w,c[S])}}}else{n=this.context.createLinearGradient(o,u/2,l+o,u/2);const h=c.length+1;let f=1;for(let p=0;p<c.length;p++){let m;typeof d[p]=="number"?m=d[p]:m=f/h,n.addColorStop(m,c[p]),f++}}return n}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},jT,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Rr(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Rr(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof kr?this._style=e:this._style=new kr(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};nv.defaultAutoResolution=!0;let av=nv;class lo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ja{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in t){const a=t[n].match(/^[a-z]+/gm)[0],o=t[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in o){const c=o[u].split("="),d=c[0],h=c[1].replace(/"/gm,""),f=parseFloat(h),p=isNaN(f)?h:f;l[d]=p}i[a].push(l)}const s=new lo;return i.info.forEach(n=>s.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>s.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>s.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>s.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>s.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>s.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),s}}class Ec{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new lo,i=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),n=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),o=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)t.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<s.length;u++)t.common.push({lineHeight:parseInt(s[u].getAttribute("lineHeight"),10)});for(let u=0;u<n.length;u++)t.page.push({id:parseInt(n[u].getAttribute("id"),10)||0,file:n[u].getAttribute("file")});for(let u=0;u<a.length;u++){const c=a[u];t.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<o.length;u++)t.kerning.push({first:parseInt(o[u].getAttribute("first"),10),second:parseInt(o[u].getAttribute("second"),10),amount:parseInt(o[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}}class Tc{static test(e){return typeof e=="string"&&e.includes("<font>")?Ec.test(W.ADAPTER.parseXML(e)):!1}static parse(e){return Ec.parse(W.ADAPTER.parseXML(e))}}const Jl=[ja,Ec,Tc];function $T(r){for(let e=0;e<Jl.length;e++)if(Jl[e].test(r))return Jl[e];return null}function GT(r,e,t,i,s,n){const a=t.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;let o;const l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=r.width/i-l-u*2,d=r.height/i-l-u*2,h=a.slice(),f=t.fillGradientStops.slice();if(!f.length){const p=h.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(h.unshift(a[0]),f.unshift(0),h.push(a[a.length-1]),f.push(1),t.fillGradientType===Wo.LINEAR_VERTICAL){o=e.createLinearGradient(c/2,u,c/2,d+u);let p=0;const m=(n.fontProperties.fontSize+t.strokeThickness)/d;for(let g=0;g<s.length;g++){const b=n.lineHeight*g;for(let x=0;x<h.length;x++){let y=0;typeof f[x]=="number"?y=f[x]:y=x/h.length;const v=b/d+y*m;let S=Math.max(p,v);S=Math.min(S,1),o.addColorStop(S,h[x]),p=S}}}else{o=e.createLinearGradient(u,d/2,c+u,d/2);const p=h.length+1;let m=1;for(let g=0;g<h.length;g++){let b;typeof f[g]=="number"?b=f[g]:b=m/p,o.addColorStop(b,h[g]),m++}}return o}function HT(r,e,t,i,s,n,a){const o=t.text,l=t.fontProperties;e.translate(i,s),e.scale(n,n);const u=a.strokeThickness/2,c=-(a.strokeThickness/2);if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=GT(r,e,a,n,[o],t),e.strokeStyle=a.stroke,a.dropShadow){const d=a.dropShadowColor,h=a.dropShadowBlur*n,f=a.dropShadowDistance*n;e.shadowColor=Se.shared.setValue(d).setAlpha(a.dropShadowAlpha).toRgbaString(),e.shadowBlur=h,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(o,u,c+t.lineHeight-l.descent),a.fill&&e.fillText(o,u,c+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function $a(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function ov(r){return Array.from?Array.from(r):r.split("")}function zT(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,i=r.length;t<i;t++){const s=r[t];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const n=s[0].charCodeAt(0),a=s[1].charCodeAt(0);if(a<n)throw new Error("[BitmapFont]: Invalid character range.");for(let o=n,l=a;o<=l;o++)e.push(String.fromCharCode(o))}else e.push(...ov(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Sr=class jt{constructor(e,t,i){var c;const[s]=e.info,[n]=e.common,[a]=e.page,[o]=e.distanceField,l=mr(a.file),u={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/l,this.chars={},this.pageTextures=u;for(let d=0;d<e.page.length;d++){const{id:h,file:f}=e.page[d];u[h]=t instanceof Array?t[d]:t[f],o!=null&&o.fieldType&&o.fieldType!=="none"&&(u[h].baseTexture.alphaMode=et.NO_PREMULTIPLIED_ALPHA,u[h].baseTexture.mipmap=Qt.OFF)}for(let d=0;d<e.char.length;d++){const{id:h,page:f}=e.char[d];let{x:p,y:m,width:g,height:b,xoffset:x,yoffset:y,xadvance:v}=e.char[d];p/=l,m/=l,g/=l,b/=l,x/=l,y/=l,v/=l;const S=new ae(p+u[f].frame.x/l,m+u[f].frame.y/l,g,b);this.chars[h]={xOffset:x,yOffset:y,xAdvance:v,kerning:{},texture:new X(u[f].baseTexture,S),page:f}}for(let d=0;d<e.kerning.length;d++){let{first:h,second:f,amount:p}=e.kerning[d];h/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[h]=p)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((c=o==null?void 0:o.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let s;if(e instanceof lo)s=e;else{const a=$T(e);if(!a)throw new Error("Unrecognized data format for font.");s=a.parse(e)}t instanceof X&&(t=[t]);const n=new jt(s,t,i);return jt.available[n.font]=n,n}static uninstall(e){const t=jt.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete jt.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:a,textureWidth:o,textureHeight:l,...u}=Object.assign({},jt.defaultOptions,i),c=zT(s),d=t instanceof kr?t:new kr(t),h=o,f=new lo;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let p=0,m=0,g,b,x,y=0;const v=[];for(let T=0;T<c.length;T++){g||(g=W.ADAPTER.createCanvas(),g.width=o,g.height=l,b=g.getContext("2d"),x=new te(g,{resolution:a,...u}),v.push(new X(x)),f.page.push({id:v.length-1,file:""}));const w=c[T],E=Ar.measureText(w,d,!1,g),A=E.width,M=Math.ceil(E.height),I=Math.ceil((d.fontStyle==="italic"?2:1)*A);if(m>=l-M*a){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${w}')`);--T,g=null,b=null,x=null,m=0,p=0,y=0;continue}if(y=Math.max(M+E.fontProperties.descent,y),I*a+p>=h){if(p===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${w}')`);--T,m+=y*a,m=Math.ceil(m),p=0,y=0;continue}HT(g,b,E,p,m,a,d);const O=$a(E.text);f.char.push({id:O,page:v.length-1,x:p/a,y:m/a,width:I,height:M,xoffset:0,yoffset:0,xadvance:A-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),p+=(I+2*n)*a,p=Math.ceil(p)}if(!(i!=null&&i.skipKerning))for(let T=0,w=c.length;T<w;T++){const E=c[T];for(let A=0;A<w;A++){const M=c[A],I=b.measureText(E).width,O=b.measureText(M).width,R=b.measureText(E+M).width-(I+O);R&&f.kerning.push({first:$a(E),second:$a(M),amount:R})}}const S=new jt(f,v,!0);return jt.available[e]!==void 0&&jt.uninstall(e),jt.available[e]=S,S}};Sr.ALPHA=[["a","z"],["A","Z"]," "],Sr.NUMERIC=[["0","9"]],Sr.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Sr.ASCII=[[" ","~"]],Sr.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Sr.ALPHANUMERIC},Sr.available={};let Er=Sr;class VT{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const eu=new ye,ep=new hi,lv=class uv extends Rt{constructor(e,t,i,s=Wt.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||tr.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=W.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Wt.TRIANGLES&&t.length<uv.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const s=this.transform.worldTransform,n=s.a,a=s.b,o=s.c,l=s.d,u=s.tx,c=s.ty,d=this.vertexData;for(let h=0;h<d.length/2;h++){const f=t[h*2],p=t[h*2+1];d[h*2]=n*f+o*p+u,d[h*2+1]=a*f+l*p+c}if(this._roundPixels){const h=W.RESOLUTION;for(let f=0;f<d.length;++f)d[f]=Math.round(d[f]*h)/h}this.vertexDirty=i}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new VT(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,eu);const t=this.geometry.getBuffer("aVertexPosition").data,i=ep.points,s=this.geometry.getIndex().data,n=s.length,a=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=a){const l=s[o]*2,u=s[o+1]*2,c=s[o+2]*2;if(i[0]=t[l],i[1]=t[l+1],i[2]=t[u],i[3]=t[u+1],i[4]=t[c],i[5]=t[c+1],ep.contains(eu.x,eu.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};lv.BATCHABLE_SIZE=100;let tp=lv;class WT extends Fr{constructor(e,t,i){super();const s=new Re(e),n=new Re(t,!0),a=new Re(i,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,Z.FLOAT).addAttribute("aTextureCoord",n,2,!1,Z.FLOAT).addIndex(a),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var qT=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,XT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class rp extends Yt{constructor(e,t){const i={uSampler:e,alpha:1,uTextureMatrix:Ee.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(i,t.uniforms),super(t.program||hr.from(XT,qT),i),this._colorDirty=!1,this.uvMatrix=new Dy(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new Se(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Se.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var YT=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,QT=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const ip=[],sp=[],np=[],KT=class cv extends Rt{constructor(e,t={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:a,fontName:o,fontSize:l}=Object.assign({},cv.styleDefaults,t);if(!Er.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Se(s),this._font=void 0,this._fontName=o,this._fontSize=l,this.text=e,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=a,this._anchor=new cr(()=>{this.dirty=!0},this,0,0),this._roundPixels=W.ROUND_PIXELS,this.dirty=!0,this._resolution=W.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var I;const e=Er.available[this._fontName],t=this.fontSize,i=t/e.size,s=new ye,n=[],a=[],o=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=ov(l),c=this._maxWidth*e.size/t,d=e.distanceFieldType==="none"?ip:sp;let h=null,f=0,p=0,m=0,g=-1,b=0,x=0,y=0,v=0;for(let O=0;O<u.length;O++){const R=u[O],_=$a(R);if(/(?:\s)/.test(R)&&(g=O,b=f,v++),R==="\r"||R===`
`){a.push(f),o.push(-1),p=Math.max(p,f),++m,++x,s.x=0,s.y+=e.lineHeight,h=null,v=0;continue}const C=e.chars[_];if(!C)continue;h&&C.kerning[h]&&(s.x+=C.kerning[h]);const D=np.pop()||{texture:X.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ye};D.texture=C.texture,D.line=m,D.charCode=_,D.position.x=Math.round(s.x+C.xOffset+this._letterSpacing/2),D.position.y=Math.round(s.y+C.yOffset),D.prevSpaces=v,n.push(D),f=D.position.x+Math.max(C.xAdvance-C.xOffset,C.texture.orig.width),s.x+=C.xAdvance+this._letterSpacing,y=Math.max(y,C.yOffset+C.texture.height),h=_,g!==-1&&c>0&&s.x>c&&(++x,Ji(n,1+g-x,1+O-g),O=g,g=-1,a.push(b),o.push(n.length>0?n[n.length-1].prevSpaces:0),p=Math.max(p,b),m++,s.x=0,s.y+=e.lineHeight,h=null,v=0)}const S=u[u.length-1];S!=="\r"&&S!==`
`&&(/(?:\s)/.test(S)&&(f=b),a.push(f),p=Math.max(p,f),o.push(-1));const T=[];for(let O=0;O<=m;O++){let R=0;this._align==="right"?R=p-a[O]:this._align==="center"?R=(p-a[O])/2:this._align==="justify"&&(R=o[O]<0?0:(p-a[O])/o[O]),T.push(R)}const w=n.length,E={},A=[],M=this._activePagesMeshData;d.push(...M);for(let O=0;O<w;O++){const R=n[O].texture,_=R.baseTexture.uid;if(!E[_]){let C=d.pop();if(!C){const k=new WT;let L,B;e.distanceFieldType==="none"?(L=new rp(X.EMPTY),B=J.NORMAL):(L=new rp(X.EMPTY,{program:hr.from(QT,YT),uniforms:{uFWidth:0}}),B=J.NORMAL_NPM);const F=new tp(k,L);F.blendMode=B,C={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:F,vertices:null,uvs:null,indices:null}}C.index=0,C.indexCount=0,C.vertexCount=0,C.uvsCount=0,C.total=0;const{_textureCache:D}=this;D[_]=D[_]||new X(R.baseTexture),C.mesh.texture=D[_],C.mesh.tint=this._tintColor.value,A.push(C),E[_]=C}E[_].total++}for(let O=0;O<M.length;O++)A.includes(M[O])||this.removeChild(M[O].mesh);for(let O=0;O<A.length;O++)A[O].mesh.parent!==this&&this.addChild(A[O].mesh);this._activePagesMeshData=A;for(const O in E){const R=E[O],_=R.total;if(!(((I=R.indices)==null?void 0:I.length)>6*_)||R.vertices.length<tp.BATCHABLE_SIZE*2)R.vertices=new Float32Array(4*2*_),R.uvs=new Float32Array(4*2*_),R.indices=new Uint16Array(6*_);else{const C=R.total,D=R.vertices;for(let k=C*4*2;k<D.length;k++)D[k]=0}R.mesh.size=6*_}for(let O=0;O<w;O++){const R=n[O];let _=R.position.x+T[R.line]*(this._align==="justify"?R.prevSpaces:1);this._roundPixels&&(_=Math.round(_));const C=_*i,D=R.position.y*i,k=R.texture,L=E[k.baseTexture.uid],B=k.frame,F=k._uvs,U=L.index++;L.indices[U*6+0]=0+U*4,L.indices[U*6+1]=1+U*4,L.indices[U*6+2]=2+U*4,L.indices[U*6+3]=0+U*4,L.indices[U*6+4]=2+U*4,L.indices[U*6+5]=3+U*4,L.vertices[U*8+0]=C,L.vertices[U*8+1]=D,L.vertices[U*8+2]=C+B.width*i,L.vertices[U*8+3]=D,L.vertices[U*8+4]=C+B.width*i,L.vertices[U*8+5]=D+B.height*i,L.vertices[U*8+6]=C,L.vertices[U*8+7]=D+B.height*i,L.uvs[U*8+0]=F.x0,L.uvs[U*8+1]=F.y0,L.uvs[U*8+2]=F.x1,L.uvs[U*8+3]=F.y1,L.uvs[U*8+4]=F.x2,L.uvs[U*8+5]=F.y2,L.uvs[U*8+6]=F.x3,L.uvs[U*8+7]=F.y3}this._textWidth=p*i,this._textHeight=(s.y+e.lineHeight)*i;for(const O in E){const R=E[O];if(this.anchor.x!==0||this.anchor.y!==0){let k=0;const L=this._textWidth*this.anchor.x,B=this._textHeight*this.anchor.y;for(let F=0;F<R.total;F++)R.vertices[k++]-=L,R.vertices[k++]-=B,R.vertices[k++]-=L,R.vertices[k++]-=B,R.vertices[k++]-=L,R.vertices[k++]-=B,R.vertices[k++]-=L,R.vertices[k++]-=B}this._maxLineHeight=y*i;const _=R.mesh.geometry.getBuffer("aVertexPosition"),C=R.mesh.geometry.getBuffer("aTextureCoord"),D=R.mesh.geometry.getIndex();_.data=R.vertices,C.data=R.uvs,D.data=R.indices,_.update(),C.update(),D.update()}for(let O=0;O<n.length;O++)np.push(n[O]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:s}=Er.available[this._fontName];if(i!=="none"){const{a:n,b:a,c:o,d:l}=this.worldTransform,u=Math.sqrt(n*n+a*a),c=Math.sqrt(o*o+l*l),d=(Math.abs(u)+Math.abs(c))/2,h=this.fontSize/s,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=d*t*h*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Er.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Er.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Er.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,i=Er.available[this._fontName].distanceFieldType==="none"?ip:sp;i.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],i.filter(s=>t[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=X.EMPTY});for(const s in t)t[s].destroy(),delete t[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};KT.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const ap={loader:H.LoadParser,resolver:H.ResolveParser,cache:H.CacheParser,detection:H.DetectionParser};Y.handle(H.Asset,r=>{const e=r.ref;Object.entries(ap).filter(([t])=>!!e[t]).forEach(([t,i])=>Y.add(Object.assign(e[t],{extension:e[t].extension??i})))},r=>{const e=r.ref;Object.keys(ap).filter(t=>!!e[t]).forEach(t=>Y.remove(e[t]))});class ZT{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function ys(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function Gr(r,e){const t=r.split("?")[0],i=je.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const St=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(i=>typeof i=="string"||t?e(i):i):r),Ac=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function hv(r,e,t,i,s){const n=e[t];for(let a=0;a<n.length;a++){const o=n[a];t<e.length-1?hv(r.replace(i[t],o),e,t+1,i,s):s.push(r.replace(i[t],o))}}function JT(r){const e=/\{(.*?)\}/g,t=r.match(e),i=[];if(t){const s=[];t.forEach(n=>{const a=n.substring(1,n.length-1).split(",");s.push(a)}),hv(r,s,0,t,i)}else i.push(r);return i}const uo=r=>!Array.isArray(r);class eA{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const i=St(e);let s;for(let o=0;o<this.parsers.length;o++){const l=this.parsers[o];if(l.test(t)){s=l.getCacheableAssets(i,t);break}}s||(s={},i.forEach(o=>{s[o]=t}));const n=Object.keys(s),a={cacheKeys:n,keys:i};if(i.forEach(o=>{this._cacheMap.set(o,a)}),n.forEach(o=>{this._cache.has(o)&&this._cache.get(o)!==t&&console.warn("[Cache] already has key:",o),this._cache.set(o,s[o])}),t instanceof X){const o=t;i.forEach(l=>{o.baseTexture!==X.EMPTY.baseTexture&&te.addToCache(o.baseTexture,l),X.addToCache(o,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const si=new eA;class tA{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const i={promise:null,parser:null};return i.promise=(async()=>{var a,o;let s=null,n=null;if(t.loadParser&&(n=this._parserHash[t.loadParser],n||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!n){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((a=u.test)!=null&&a.call(u,e,t,this))){n=u;break}}if(!n)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await n.load(e,t,this),i.parser=n;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((o=u.testParse)==null?void 0:o.call(u,s,t,this))&&(s=await u.parse(s,t,this)||s,i.parser=u)}return s})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0;const s={},n=uo(e),a=St(e,u=>({alias:[u],src:u})),o=a.length,l=a.map(async u=>{const c=je.toAbsolute(u.src);if(!s[u.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,u)),s[u.src]=await this.promiseCache[c].promise,t&&t(++i/o)}catch(d){throw delete this.promiseCache[c],delete s[u.src],new Error(`[Loader.load] Failed to load ${c}.
${d}`)}});return await Promise.all(l),n?s[a[0].src]:s}async unload(e){const t=St(e,i=>({alias:[i],src:i})).map(async i=>{var a,o;const s=je.toAbsolute(i.src),n=this.promiseCache[s];if(n){const l=await n.promise;delete this.promiseCache[s],(o=(a=n.parser)==null?void 0:a.unload)==null||o.call(a,l,i,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Dt=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Dt||{});const rA=".json",iA="application/json",sA={extension:{type:H.LoadParser,priority:Dt.Low},name:"loadJson",test(r){return ys(r,iA)||Gr(r,rA)},async load(r){return await(await W.ADAPTER.fetch(r)).json()}};Y.add(sA);const nA=".txt",aA="text/plain",oA={name:"loadTxt",extension:{type:H.LoadParser,priority:Dt.Low},test(r){return ys(r,aA)||Gr(r,nA)},async load(r){return await(await W.ADAPTER.fetch(r)).text()}};Y.add(oA);const lA=["normal","bold","100","200","300","400","500","600","700","800","900"],uA=[".ttf",".otf",".woff",".woff2"],cA=["font/ttf","font/otf","font/woff","font/woff2"],hA=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function dA(r){const e=je.extname(r),t=je.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1));let i=t.length>0;for(const n of t)if(!n.match(hA)){i=!1;break}let s=t.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const fA=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function pA(r){return fA.test(r)?r:encodeURI(r)}const mA={extension:{type:H.LoadParser,priority:Dt.Low},name:"loadWebFont",test(r){return ys(r,cA)||Gr(r,uA)},async load(r,e){var i,s,n;const t=W.ADAPTER.getFontFaceSet();if(t){const a=[],o=((i=e.data)==null?void 0:i.family)??dA(r),l=((n=(s=e.data)==null?void 0:s.weights)==null?void 0:n.filter(c=>lA.includes(c)))??["normal"],u=e.data??{};for(let c=0;c<l.length;c++){const d=l[c],h=new FontFace(o,`url(${pA(r)})`,{...u,weight:d});await h.load(),t.add(h),a.push(h)}return a.length===1?a[0]:a}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>W.ADAPTER.getFontFaceSet().delete(e))}};Y.add(mA);const gA=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let ts=null,Cc=class{constructor(){ts||(ts=URL.createObjectURL(new Blob([gA],{type:"application/javascript"}))),this.worker=new Worker(ts)}};Cc.revokeObjectURL=function(){ts&&(URL.revokeObjectURL(ts),ts=null)};const yA=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let rs=null;class dv{constructor(){rs||(rs=URL.createObjectURL(new Blob([yA],{type:"application/javascript"}))),this.worker=new Worker(rs)}}dv.revokeObjectURL=function(){rs&&(URL.revokeObjectURL(rs),rs=null)};let op=0,tu;class vA{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Cc;t.addEventListener("message",i=>{t.terminate(),Cc.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){tu===void 0&&(tu=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<tu&&(this._createdWorkers++,e=new dv().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const i=new Promise((s,n)=>{this.queue.push({id:e,arguments:t,resolve:s,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),i=t.id;this.resolveHash[op]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:op++,id:i})}}const lp=new vA;function Nn(r,e,t){r.resource.internal=!0;const i=new X(r),s=()=>{delete e.promiseCache[t],si.has(t)&&si.remove(t)};return i.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const bA=[".jpeg",".jpg",".png",".webp",".avif"],xA=["image/jpeg","image/png","image/webp","image/avif"];async function _A(r){const e=await W.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const qo={name:"loadTextures",extension:{type:H.LoadParser,priority:Dt.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return ys(r,xA)||Gr(r,bA)},async load(r,e,t){var o;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;i?this.config.preferWorkers&&await lp.isImageBitmapSupported()?s=await lp.loadImageBitmap(r):s=await _A(r):s=await new Promise((l,u)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=r,c.complete?l(c):(c.onload=()=>l(c),c.onerror=d=>u(d))});const n={...e.data};n.resolution??(n.resolution=mr(r)),i&&((o=n.resourceOptions)==null?void 0:o.ownsImageBitmap)===void 0&&(n.resourceOptions={...n.resourceOptions},n.resourceOptions.ownsImageBitmap=!0);const a=new te(s,n);return a.resource.src=r,Nn(a,t,r)},unload(r){r.destroy(!0)}};Y.add(qo);const wA=".svg",SA="image/svg+xml",EA={extension:{type:H.LoadParser,priority:Dt.High},name:"loadSVG",test(r){return ys(r,SA)||Gr(r,wA)},async testParse(r){return bc.test(r)},async parse(r,e,t){var n;const i=new bc(r,(n=e==null?void 0:e.data)==null?void 0:n.resourceOptions);await i.load();const s=new te(i,{resolution:mr(r),...e==null?void 0:e.data});return s.resource.src=e.src,Nn(s,t,e.src)},async load(r,e){return(await W.ADAPTER.fetch(r)).text()},unload:qo.unload};Y.add(EA);const TA=[".mp4",".m4v",".webm",".ogv"],AA=["video/mp4","video/webm","video/ogg"],CA={name:"loadVideo",extension:{type:H.LoadParser,priority:Dt.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return ys(r,AA)||Gr(r,TA)},async load(r,e,t){var a;let i;const s=await(await W.ADAPTER.fetch(r)).blob(),n=URL.createObjectURL(s);try{const o={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(a=e==null?void 0:e.data)==null?void 0:a.resourceOptions,autoLoad:!0},l=new rv(n,o);await l.load();const u=new te(l,{alphaMode:await KS(),resolution:mr(r),...e==null?void 0:e.data});u.resource.src=r,i=Nn(u,t,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(n)})}catch(o){throw URL.revokeObjectURL(n),o}return i},unload(r){r.destroy(!0)}};Y.add(CA);class PA{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){const{alias:t,name:i,src:s,srcs:n}=e;return St(t||i||s||n,a=>typeof a=="string"?a:Array.isArray(a)?a.map(o=>(o==null?void 0:o.src)??(o==null?void 0:o.srcs)??o):a!=null&&a.src||a!=null&&a.srcs?a.src??a.srcs:a,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const i=[];Array.isArray(t)?t.forEach(s=>{const n=s.src??s.srcs,a=s.alias??s.name;let o;if(typeof a=="string"){const l=this._createBundleAssetId(e,a);i.push(l),o=[a,l]}else{const l=a.map(u=>this._createBundleAssetId(e,u));i.push(...l),o=[...a,...l]}this.add({...s,alias:o,src:n})}):Object.keys(t).forEach(s=>{const n=[s,this._createBundleAssetId(e,s)];if(typeof t[s]=="string")this.add({alias:n,src:t[s]});else if(Array.isArray(t[s]))this.add({alias:n,src:t[s]});else{const a=t[s],o=a.src??a.srcs;this.add({...a,alias:n,src:Array.isArray(o)?o:[o]})}i.push(...n)}),this._bundles[e]=i}add(e,t,i,s,n){const a=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(he("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),a.push({alias:e,src:t,data:i,format:s,loadParser:n})):Array.isArray(e)?a.push(...e):a.push(e);let o;o=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},St(a).forEach(l=>{const{src:u,srcs:c}=l;let{data:d,format:h,loadParser:f}=l;const p=St(u||c).map(b=>typeof b=="string"?JT(b):Array.isArray(b)?b:[b]),m=this.getAlias(l);Array.isArray(m)?m.forEach(o):o(m);const g=[];p.forEach(b=>{b.forEach(x=>{let y={};if(typeof x!="object"){y.src=x;for(let v=0;v<this._parsers.length;v++){const S=this._parsers[v];if(S.test(x)){y=S.parse(x);break}}}else d=x.data??d,h=x.format??h,f=x.loadParser??f,y={...y,...x};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${y.src}`);y=this.buildResolvedAsset(y,{aliases:m,data:d,format:h,loadParser:f}),g.push(y)})}),m.forEach(b=>{this._assetMap[b]=g})})}resolveBundle(e){const t=uo(e);e=St(e);const i={};return e.forEach(s=>{const n=this._bundles[s];if(n){const a=this.resolve(n),o={};for(const l in a){const u=a[l];o[this._extractAssetIdFromBundle(s,l)]=u}i[s]=o}}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const i={};for(const s in t)i[s]=t[s].src;return i}return t.src}resolve(e){const t=uo(e);e=St(e);const i={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let n=this._assetMap[s];const a=n[0],o=this._getPreferredOrder(n);o==null||o.priority.forEach(l=>{o.params[l].forEach(u=>{const c=n.filter(d=>d[l]?d[l]===u:!1);c.length&&(n=c)})}),this._resolverHash[s]=n[0]??a}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[0],s=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:i,data:s,loadParser:n,format:a}=t;return(this._basePath||this._rootPath)&&(e.src=je.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=n??e.loadParser,e.format=a??e.format??je.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class RA{constructor(){this._detections=[],this._initialized=!1,this.resolver=new PA,this.loader=new tA,this.cache=si,this._backgroundLoader=new ZT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var n,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const t=((n=e.texturePreference)==null?void 0:n.resolution)??1,i=typeof t=="number"?[t]:t,s=await this._detectFormats({preferredFormats:(a=e.texturePreference)==null?void 0:a.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,i,s,n){this.resolver.add(e,t,i,s,n)}async load(e,t){this._initialized||await this.init();const i=uo(e),s=St(e).map(o=>{if(typeof o!="string"){const l=this.resolver.getAlias(o);return l.some(u=>!this.resolver.hasKey(u))&&this.add(o),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),n=this.resolver.resolve(s),a=await this._mapLoadToResolve(n,t);return i?a[s[0]]:a}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const s=this.resolver.resolveBundle(e),n={},a=Object.keys(s);let o=0,l=0;const u=()=>{t==null||t(++o/l)},c=a.map(d=>{const h=s[d];return l+=Object.keys(h).length,this._mapLoadToResolve(h,u).then(f=>{n[d]=f})});return await Promise.all(c),i?n[e[0]]:n}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return si.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=si.get(e[i]);return t}async _mapLoadToResolve(e,t){const i=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const n=await this.loader.load(i,t);this._backgroundLoader.active=!0;const a={};return i.forEach((o,l)=>{const u=n[o.src],c=[o.src];o.alias&&c.push(...o.alias),a[s[l]]=u,si.set(c,u)}),a}async unload(e){this._initialized||await this.init();const t=St(e).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=St(e);const t=this.resolver.resolveBundle(e),i=Object.keys(t).map(s=>this._unloadFromResolved(t[s]));await Promise.all(i)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(i=>{si.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,s)=>t.indexOf(i)===s),t}get detections(){return this._detections}get preferWorkers(){return qo.config.preferWorkers}set preferWorkers(e){he("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}}const la=new RA;Y.handleByList(H.LoadParser,la.loader.parsers).handleByList(H.ResolveParser,la.resolver.parsers).handleByList(H.CacheParser,la.cache.parsers).handleByList(H.DetectionParser,la.detections);const IA={extension:H.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof X),getCacheableAssets:(r,e)=>{const t={};return r.forEach(i=>{e.forEach((s,n)=>{t[i+(n===0?"":n+1)]=s})}),t}};Y.add(IA);async function fv(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const MA={extension:{type:H.DetectionParser,priority:1},test:async()=>fv("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};Y.add(MA);const OA={extension:{type:H.DetectionParser,priority:0},test:async()=>fv("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};Y.add(OA);const up=["png","jpg","jpeg"],DA={extension:{type:H.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...up],remove:async r=>r.filter(e=>!up.includes(e))};Y.add(DA);const LA="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Rh(r){return LA?!1:document.createElement("video").canPlayType(r)!==""}const NA={extension:{type:H.DetectionParser,priority:0},test:async()=>Rh("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};Y.add(NA);const FA={extension:{type:H.DetectionParser,priority:0},test:async()=>Rh("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};Y.add(FA);const kA={extension:{type:H.DetectionParser,priority:0},test:async()=>Rh("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};Y.add(kA);const BA={extension:H.ResolveParser,test:qo.test,parse:r=>{var e;return{resolution:parseFloat(((e=W.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:je.extname(r).slice(1),src:r}}};Y.add(BA);const UA=[".xml",".fnt"],jA={extension:{type:H.LoadParser,priority:Dt.Normal},name:"loadBitmapFont",test(r){return UA.includes(je.extname(r).toLowerCase())},async testParse(r){return ja.test(r)||Tc.test(r)},async parse(r,e,t){const i=ja.test(r)?ja.parse(r):Tc.parse(r),{src:s}=e,{page:n}=i,a=[];for(let u=0;u<n.length;++u){const c=n[u].file;let d=je.join(je.dirname(s),c);d=Ac(d,s),a.push(d)}const o=await t.load(a),l=a.map(u=>o[u]);return Er.install(i,l,!0)},async load(r,e){return(await W.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};Y.add(jA);const co={build(r){const e=r.points;let t,i,s,n,a,o;if(r.type===He.CIRC){const p=r.shape;t=p.x,i=p.y,a=o=p.radius,s=n=0}else if(r.type===He.ELIP){const p=r.shape;t=p.x,i=p.y,a=p.width,o=p.height,s=n=0}else{const p=r.shape,m=p.width/2,g=p.height/2;t=p.x+m,i=p.y+g,a=o=Math.max(0,Math.min(p.radius,Math.min(m,g))),s=m-a,n=g-o}if(!(a>=0&&o>=0&&s>=0&&n>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(a+o)),u=l*8+(s?4:0)+(n?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=t+s,e[1]=e[3]=i+n,e[2]=e[4]=t-s,e[5]=e[7]=i-n;return}let c=0,d=l*4+(s?2:0)+2,h=d,f=u;{const p=s+a,m=n,g=t+p,b=t-p,x=i+m;if(e[c++]=g,e[c++]=x,e[--d]=x,e[--d]=b,n){const y=i-m;e[h++]=b,e[h++]=y,e[--f]=y,e[--f]=g}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),g=s+Math.cos(m)*a,b=n+Math.sin(m)*o,x=t+g,y=t-g,v=i+b,S=i-b;e[c++]=x,e[c++]=v,e[--d]=v,e[--d]=y,e[h++]=y,e[h++]=S,e[--f]=S,e[--f]=x}{const p=s,m=n+o,g=t+p,b=t-p,x=i+m,y=i-m;e[c++]=g,e[c++]=x,e[--f]=y,e[--f]=g,s&&(e[c++]=b,e[c++]=x,e[--f]=y,e[--f]=b)}},triangulate(r,e){const t=r.points,i=e.points,s=e.indices;if(t.length===0)return;let n=i.length/2;const a=n;let o,l;if(r.type!==He.RREC){const c=r.shape;o=c.x,l=c.y}else{const c=r.shape;o=c.x+c.width/2,l=c.y+c.height/2}const u=r.matrix;i.push(r.matrix?u.a*o+u.c*l+u.tx:o,r.matrix?u.b*o+u.d*l+u.ty:l),n++,i.push(t[0],t[1]);for(let c=2;c<t.length;c+=2)i.push(t[c],t[c+1]),s.push(n++,a,n);s.push(a+1,a,n)}};function cp(r,e=!1){const t=r.length;if(t<6)return;let i=0;for(let s=0,n=r[t-2],a=r[t-1];s<t;s+=2){const o=r[s],l=r[s+1];i+=(o-n)*(l+a),n=o,a=l}if(!e&&i>0||e&&i<=0){const s=t/2;for(let n=s+s%2;n<t;n+=2){const a=t-n-2,o=t-n-1,l=n,u=n+1;[r[a],r[l]]=[r[l],r[a]],[r[o],r[u]]=[r[u],r[o]]}}}const pv={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const i=r.holes,s=e.points,n=e.indices;if(t.length>=6){cp(t,!1);const a=[];for(let u=0;u<i.length;u++){const c=i[u];cp(c.points,!0),a.push(t.length/2),t=t.concat(c.points)}const o=y_(t,a,2);if(!o)return;const l=s.length/2;for(let u=0;u<o.length;u+=3)n.push(o[u]+l),n.push(o[u+1]+l),n.push(o[u+2]+l);for(let u=0;u<t.length;u++)s.push(t[u])}}},$A={build(r){const e=r.shape,t=e.x,i=e.y,s=e.width,n=e.height,a=r.points;a.length=0,s>=0&&n>=0&&a.push(t,i,t+s,i,t+s,i+n,t,i+n)},triangulate(r,e){const t=r.points,i=e.points;if(t.length===0)return;const s=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},GA={build(r){co.build(r)},triangulate(r,e){co.triangulate(r,e)}};var ct=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(ct||{}),Ir=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(Ir||{});const hs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class hp{static curveTo(e,t,i,s,n,a){const o=a[a.length-2],l=a[a.length-1]-t,u=o-e,c=s-t,d=i-e,h=Math.abs(l*d-u*c);if(h<1e-8||n===0)return(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t),null;const f=l*l+u*u,p=c*c+d*d,m=l*c+u*d,g=n*Math.sqrt(f)/h,b=n*Math.sqrt(p)/h,x=g*m/f,y=b*m/p,v=g*d+b*u,S=g*c+b*l,T=u*(b+x),w=l*(b+x),E=d*(g+y),A=c*(g+y),M=Math.atan2(w-S,T-v),I=Math.atan2(A-S,E-v);return{cx:v+e,cy:S+t,radius:n,startAngle:M,endAngle:I,anticlockwise:u*c>d*l}}static arc(e,t,i,s,n,a,o,l,u){const c=o-a,d=hs._segmentsCount(Math.abs(c)*n,Math.ceil(Math.abs(c)/ro)*40),h=c/(d*2),f=h*2,p=Math.cos(h),m=Math.sin(h),g=d-1,b=g%1/g;for(let x=0;x<=g;++x){const y=x+b*x,v=h+a+f*y,S=Math.cos(v),T=-Math.sin(v);u.push((p*S+m*T)*n+i,(p*-T+m*S)*n+s)}}}class HA{constructor(){this.reset()}begin(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Ih{static curveLength(e,t,i,s,n,a,o,l){let u=0,c=0,d=0,h=0,f=0,p=0,m=0,g=0,b=0,x=0,y=0,v=e,S=t;for(let T=1;T<=10;++T)c=T/10,d=c*c,h=d*c,f=1-c,p=f*f,m=p*f,g=m*e+3*p*c*i+3*f*d*n+h*o,b=m*t+3*p*c*s+3*f*d*a+h*l,x=v-g,y=S-b,v=g,S=b,u+=Math.sqrt(x*x+y*y);return u}static curveTo(e,t,i,s,n,a,o){const l=o[o.length-2],u=o[o.length-1];o.length-=2;const c=hs._segmentsCount(Ih.curveLength(l,u,e,t,i,s,n,a));let d=0,h=0,f=0,p=0,m=0;o.push(l,u);for(let g=1,b=0;g<=c;++g)b=g/c,d=1-b,h=d*d,f=h*d,p=b*b,m=p*b,o.push(f*l+3*h*b*e+3*d*p*i+m*n,f*u+3*h*b*t+3*d*p*s+m*a)}}function dp(r,e,t,i,s,n,a,o){const l=r-t*s,u=e-i*s,c=r+t*n,d=e+i*n;let h,f;a?(h=i,f=-t):(h=-i,f=t);const p=l+h,m=u+f,g=c+h,b=d+f;return o.push(p,m,g,b),2}function Yr(r,e,t,i,s,n,a,o){const l=t-r,u=i-e;let c=Math.atan2(l,u),d=Math.atan2(s-r,n-e);o&&c<d?c+=Math.PI*2:!o&&c>d&&(d+=Math.PI*2);let h=c;const f=d-c,p=Math.abs(f),m=Math.sqrt(l*l+u*u),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,b=f/g;if(h+=b,o){a.push(r,e,t,i);for(let x=1,y=h;x<g;x++,y+=b)a.push(r,e,r+Math.sin(y)*m,e+Math.cos(y)*m);a.push(r,e,s,n)}else{a.push(t,i,r,e);for(let x=1,y=h;x<g;x++,y+=b)a.push(r+Math.sin(y)*m,e+Math.cos(y)*m,r,e);a.push(s,n,r,e)}return g*2}function zA(r,e){const t=r.shape;let i=r.points||t.points.slice();const s=e.closePointEps;if(i.length===0)return;const n=r.lineStyle,a=new ye(i[0],i[1]),o=new ye(i[i.length-2],i[i.length-1]),l=t.type!==He.POLY||t.closeStroke,u=Math.abs(a.x-o.x)<s&&Math.abs(a.y-o.y)<s;if(l){i=i.slice(),u&&(i.pop(),i.pop(),o.set(i[i.length-2],i[i.length-1]));const k=(a.x+o.x)*.5,L=(o.y+a.y)*.5;i.unshift(k,L),i.push(k,L)}const c=e.points,d=i.length/2;let h=i.length;const f=c.length/2,p=n.width/2,m=p*p,g=n.miterLimit*n.miterLimit;let b=i[0],x=i[1],y=i[2],v=i[3],S=0,T=0,w=-(x-v),E=b-y,A=0,M=0,I=Math.sqrt(w*w+E*E);w/=I,E/=I,w*=p,E*=p;const O=n.alignment,R=(1-O)*2,_=O*2;l||(n.cap===Ir.ROUND?h+=Yr(b-w*(R-_)*.5,x-E*(R-_)*.5,b-w*R,x-E*R,b+w*_,x+E*_,c,!0)+2:n.cap===Ir.SQUARE&&(h+=dp(b,x,w,E,R,_,!0,c))),c.push(b-w*R,x-E*R,b+w*_,x+E*_);for(let k=1;k<d-1;++k){b=i[(k-1)*2],x=i[(k-1)*2+1],y=i[k*2],v=i[k*2+1],S=i[(k+1)*2],T=i[(k+1)*2+1],w=-(x-v),E=b-y,I=Math.sqrt(w*w+E*E),w/=I,E/=I,w*=p,E*=p,A=-(v-T),M=y-S,I=Math.sqrt(A*A+M*M),A/=I,M/=I,A*=p,M*=p;const L=y-b,B=x-v,F=y-S,U=T-v,$=L*F+B*U,z=B*F-U*L,q=z<0;if(Math.abs(z)<.001*Math.abs($)){c.push(y-w*R,v-E*R,y+w*_,v+E*_),$>=0&&(n.join===ct.ROUND?h+=Yr(y,v,y-w*R,v-E*R,y-A*R,v-M*R,c,!1)+4:h+=2,c.push(y-A*_,v-M*_,y+A*R,v+M*R));continue}const K=(-w+b)*(-E+v)-(-w+y)*(-E+x),ue=(-A+S)*(-M+v)-(-A+y)*(-M+T),se=(L*ue-F*K)/z,ge=(U*K-B*ue)/z,de=(se-y)*(se-y)+(ge-v)*(ge-v),re=y+(se-y)*R,le=v+(ge-v)*R,pe=y-(se-y)*_,ve=v-(ge-v)*_,Me=Math.min(L*L+B*B,F*F+U*U),We=q?R:_,rr=Me+We*We*m,qr=de<=rr;let vr=n.join;if(vr===ct.MITER&&de/m>g&&(vr=ct.BEVEL),qr)switch(vr){case ct.MITER:{c.push(re,le,pe,ve);break}case ct.BEVEL:{q?c.push(re,le,y+w*_,v+E*_,re,le,y+A*_,v+M*_):c.push(y-w*R,v-E*R,pe,ve,y-A*R,v-M*R,pe,ve),h+=2;break}case ct.ROUND:{q?(c.push(re,le,y+w*_,v+E*_),h+=Yr(y,v,y+w*_,v+E*_,y+A*_,v+M*_,c,!0)+4,c.push(re,le,y+A*_,v+M*_)):(c.push(y-w*R,v-E*R,pe,ve),h+=Yr(y,v,y-w*R,v-E*R,y-A*R,v-M*R,c,!1)+4,c.push(y-A*R,v-M*R,pe,ve));break}}else{switch(c.push(y-w*R,v-E*R,y+w*_,v+E*_),vr){case ct.MITER:{q?c.push(pe,ve,pe,ve):c.push(re,le,re,le),h+=2;break}case ct.ROUND:{q?h+=Yr(y,v,y+w*_,v+E*_,y+A*_,v+M*_,c,!0)+2:h+=Yr(y,v,y-w*R,v-E*R,y-A*R,v-M*R,c,!1)+2;break}}c.push(y-A*R,v-M*R,y+A*_,v+M*_),h+=2}}b=i[(d-2)*2],x=i[(d-2)*2+1],y=i[(d-1)*2],v=i[(d-1)*2+1],w=-(x-v),E=b-y,I=Math.sqrt(w*w+E*E),w/=I,E/=I,w*=p,E*=p,c.push(y-w*R,v-E*R,y+w*_,v+E*_),l||(n.cap===Ir.ROUND?h+=Yr(y-w*(R-_)*.5,v-E*(R-_)*.5,y-w*R,v-E*R,y+w*_,v+E*_,c,!1)+2:n.cap===Ir.SQUARE&&(h+=dp(y,v,w,E,R,_,!1,c)));const C=e.indices,D=hs.epsilon*hs.epsilon;for(let k=f;k<h+f-2;++k)b=c[k*2],x=c[k*2+1],y=c[(k+1)*2],v=c[(k+1)*2+1],S=c[(k+2)*2],T=c[(k+2)*2+1],!(Math.abs(b*(v-T)+y*(T-x)+S*(x-v))<D)&&C.push(k,k+1,k+2)}function VA(r,e){let t=0;const i=r.shape,s=r.points||i.points,n=i.type!==He.POLY||i.closeStroke;if(s.length===0)return;const a=e.points,o=e.indices,l=s.length/2,u=a.length/2;let c=u;for(a.push(s[0],s[1]),t=1;t<l;t++)a.push(s[t*2],s[t*2+1]),o.push(c,c+1),c++;n&&o.push(c,u)}function fp(r,e){r.lineStyle.native?VA(r,e):zA(r,e)}class Mh{static curveLength(e,t,i,s,n,a){const o=e-2*i+n,l=t-2*s+a,u=2*i-2*e,c=2*s-2*t,d=4*(o*o+l*l),h=4*(o*u+l*c),f=u*u+c*c,p=2*Math.sqrt(d+h+f),m=Math.sqrt(d),g=2*d*m,b=2*Math.sqrt(f),x=h/m;return(g*p+m*h*(p-b)+(4*f*d-h*h)*Math.log((2*m+x+p)/(x+b)))/(4*g)}static curveTo(e,t,i,s,n){const a=n[n.length-2],o=n[n.length-1],l=hs._segmentsCount(Mh.curveLength(a,o,e,t,i,s));let u=0,c=0;for(let d=1;d<=l;++d){const h=d/l;u=a+(e-a)*h,c=o+(t-o)*h,n.push(u+(e+(i-e)*h-u)*h,c+(t+(s-t)*h-c)*h)}}}const ru={[He.POLY]:pv,[He.CIRC]:co,[He.ELIP]:co,[He.RECT]:$A,[He.RREC]:GA},pp=[],ua=[];class ho{constructor(e,t=null,i=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=s,this.type=e.type}clone(){return new ho(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Oi=new ye,mv=class gv extends by{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new oo,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ua.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),pp.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,s=null){const n=new ho(e,t,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new ho(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const s=t[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Oi):Oi.copyFrom(e),s.shape.contains(Oi.x,Oi.y))){let n=!1;if(s.holes){for(let a=0;a<s.holes.length;a++)if(s.holes[a].shape.contains(Oi.x,Oi.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const u=t[l],c=u.fillStyle,d=u.lineStyle;ru[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(c.visible||d.visible)&&this.processHoles(u.holes);for(let h=0;h<2;h++){const f=h===0?c:d;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=Lr.REPEAT,h===0?this.processFill(u):this.processLine(u);const b=this.points.length/2-g;b!==0&&(i&&!this._compareStyles(s,f)&&(i.end(m,g),i=null),i||(i=pp.pop()||new HA,i.begin(f,m,g),this.batches.push(i),s=f),this.addUvs(this.points,e,f.texture,g,b,f.matrix))}}const n=this.indices.length,a=this.points.length/2;if(i&&i.end(n,a),this.batches.length===0){this.batchable=!0;return}const o=a>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const s=e[t];for(let n=0;n<s.size;n++){const a=s.start+n;this.indicesUint16[a]=this.indicesUint16[a]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<gv.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++te._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),ua.push(this.drawCalls[d]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let s=ua.pop();s||(s=new uc,s.texArray=new fc),s.texArray.count=0,s.start=0,s.size=0,s.type=Wt.TRIANGLES;let n=0,a=null,o=0,l=!1,u=Wt.TRIANGLES,c=0;this.drawCalls.push(s);for(let d=0;d<this.batches.length;d++){const h=this.batches[d],f=8,p=h.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?Wt.LINES:Wt.TRIANGLES,a=null,n=f,e++),a!==m&&(a=m,m._batchEnabled!==e&&(n===f&&(e++,n=0,s.size>0&&(s=ua.pop(),s||(s=new uc,s.texArray=new fc),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=u),m.touched=1,m._batchEnabled=e,m._batchLocation=n,m.wrapMode=Lr.REPEAT,s.texArray.elements[s.texArray.count++]=m,n++)),s.size+=h.size,c+=h.size,o=m._batchLocation,this.addColors(t,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(i,o,h.attribSize,h.attribStart)}te._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(e.length*3*4),a=new Float32Array(n),o=new Uint32Array(n);let l=0;for(let u=0;u<e.length/2;u++)a[l++]=e[u*2],a[l++]=e[u*2+1],a[l++]=t[u*2],a[l++]=t[u*2+1],o[l++]=i[u],a[l++]=s[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?pv.triangulate(e,this):ru[e.type].triangulate(e,this)}processLine(e){fp(e,this);for(let t=0;t<e.holes.length;t++)fp(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];ru[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const s=e[i*2],n=e[i*2+1];e[i*2]=t.a*s+t.c*n+t.tx,e[i*2+1]=t.b*s+t.d*n+t.ty}}addColors(e,t,i,s,n=0){const a=Se.shared.setValue(t).toLittleEndianNumber(),o=Se.shared.setValue(a).toPremultiplied(i);e.length=Math.max(e.length,n+s);for(let l=0;l<s;l++)e[n+l]=o}addTextureIds(e,t,i,s=0){e.length=Math.max(e.length,s+i);for(let n=0;n<i;n++)e[s+n]=t}addUvs(e,t,i,s,n,a=null){let o=0;const l=t.length,u=i.frame;for(;o<n;){let d=e[(s+o)*2],h=e[(s+o)*2+1];if(a){const f=a.a*d+a.c*h+a.tx;h=a.b*d+a.d*h+a.ty,d=f}o++,t.push(d/u.width,h/u.height)}const c=i.baseTexture;(u.width<c.width||u.height<c.height)&&this.adjustUvs(t,i,l,n)}adjustUvs(e,t,i,s){const n=t.baseTexture,a=1e-6,o=i+s*2,l=t.frame,u=l.width/n.width,c=l.height/n.height;let d=l.x/l.width,h=l.y/l.height,f=Math.floor(e[i]+a),p=Math.floor(e[i+1]+a);for(let m=i+2;m<o;m+=2)f=Math.min(f,Math.floor(e[m]+a)),p=Math.min(p,Math.floor(e[m+1]+a));d-=f,h-=p;for(let m=i;m<o;m+=2)e[m]=(e[m]+d)*u,e[m+1]=(e[m+1]+h)*c}};mv.BATCHABLE_SIZE=100;let WA=mv;class Xo{constructor(){this.color=16777215,this.alpha=1,this.texture=X.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Xo;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=X.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Oh extends Xo{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ir.BUTT,this.join=ct.MITER,this.miterLimit=10}clone(){const e=new Oh;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Ir.BUTT,this.join=ct.MITER,this.miterLimit=10}}const iu={},Pc=class Ga extends Rt{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Xo,this._lineStyle=new Oh,this._matrix=null,this._holeMode=!1,this.state=tr.for2d(),this._geometry=e||new WA,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Se(16777215),this.blendMode=J.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ga(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,s=.5,n=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:s,native:n}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:X.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Ir.BUTT,join:ct.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new hi,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new hi,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==e||n!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Mh.curveTo(e,t,i,s,n),this}bezierCurveTo(e,t,i,s,n,a){return this._initCurve(),Ih.curveTo(e,t,i,s,n,a,this.currentPath.points),this}arcTo(e,t,i,s,n){this._initCurve(e,t);const a=this.currentPath.points,o=hp.curveTo(e,t,i,s,n,a);if(o){const{cx:l,cy:u,radius:c,startAngle:d,endAngle:h,anticlockwise:f}=o;this.arc(l,u,c,d,h,f)}return this}arc(e,t,i,s,n,a=!1){if(s===n)return this;if(!a&&n<=s?n+=ro:a&&s<=n&&(s+=ro),n-s===0)return this;const o=e+Math.cos(s)*i,l=t+Math.sin(s)*i,u=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const d=Math.abs(c[c.length-2]-o),h=Math.abs(c[c.length-1]-l);d<u&&h<u||c.push(o,l)}else this.moveTo(o,l),c=this.currentPath.points;return hp.arc(o,l,e,t,i,s,n,a,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:X.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Se.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:X.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,s){return this.drawShape(new ae(e,t,i,s))}drawRoundedRect(e,t,i,s,n){return this.drawShape(new zo(e,t,i,s,n))}drawCircle(e,t,i){return this.drawShape(new Go(e,t,i))}drawEllipse(e,t,i,s){return this.drawShape(new Ho(e,t,i,s))}drawPolygon(...e){let t,i=!0;const s=e[0];s.points?(i=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const n=new hi(t);return n.closeStroke=i,this.drawShape(n),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===He.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let s=0;s<i;s++){const n=e.batches[s],a=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,n.start*2,n.size),c={vertexData:o,blendMode:t,indices:u,uvs:l,_batchRGB:Se.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=c}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,s=this.worldAlpha,n=t.uniforms,a=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Se.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let o=0,l=a.length;o<l;o++)this._renderDrawCallDirect(e,i.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:i,type:s,size:n,start:a}=t,o=i.count;for(let l=0;l<o;l++)e.texture.bind(i.elements[l],l);e.geometry.draw(s,n,a)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!iu[i]){const{maxTextures:s}=e.plugins[i],n=new Int32Array(s);for(let l=0;l<s;l++)n[l]=l;const a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ee,default:At.from({uSamplers:n},!0)},o=e.plugins[i]._shader.program;iu[i]=new Yt(o,a)}t=iu[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:s,maxY:n}=e.bounds;this._bounds.addFrame(this.transform,t,i,s,n)}containsPoint(e){return this.worldTransform.applyInverse(e,Ga._TEMP_POINT),this._geometry.containsPoint(Ga._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Se.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,s=t.b,n=t.c,a=t.d,o=t.tx,l=t.ty,u=this._geometry.points,c=this.vertexData;let d=0;for(let h=0;h<u.length;h+=2){const f=u[h],p=u[h+1];c[d++]=i*f+n*p+o,c[d++]=a*p+s*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Pc.curves=hs,Pc._TEMP_POINT=new ye;let yv=Pc;class mp{constructor(e,t,i){this.geometry=new Fr,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let n=e[s];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||Z.FLOAT,offset:n.offset},t[s]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new Re(hE(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let a=0;a<this.dynamicProperties.length;++a){const o=this.dynamicProperties[a];o.offset=t,t+=o.size,this.dynamicStride+=o.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Re(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let a=0;a<this.staticProperties.length;++a){const o=this.staticProperties[a];o.offset=s,s+=o.size,this.staticStride+=o.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new Re(this.staticData,!0,!1);for(let a=0;a<this.dynamicProperties.length;++a){const o=this.dynamicProperties[a];e.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===Z.UNSIGNED_BYTE,o.type,this.dynamicStride*4,o.offset*4)}for(let a=0;a<this.staticProperties.length;++a){const o=this.staticProperties[a];e.addAttribute(o.attributeName,this.staticBuffer,0,o.type===Z.UNSIGNED_BYTE,o.type,this.staticStride*4,o.offset*4)}}uploadDynamic(e,t,i){for(let s=0;s<this.dynamicProperties.length;s++){const n=this.dynamicProperties[s];n.uploadFunction(e,t,i,n.type===Z.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,i){for(let s=0;s<this.staticProperties.length;s++){const n=this.staticProperties[s];n.uploadFunction(e,t,i,n.type===Z.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var qA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,XA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class vv extends Vo{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Ee,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Z.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Yt.from(XA,qA,{}),this.state=tr.for2d()}render(e){const t=e.children,i=e._maxSize,s=e._batchSize,n=this.renderer;let a=t.length;if(a===0)return;a>i&&!e.autoResize&&(a=i);let o=e._buffers;o||(o=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=gy(e.blendMode,u),n.state.set(this.state);const c=n.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=Se.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let h=!1;for(let f=0,p=0;f<a;f+=s,p+=1){let m=a-f;m>s&&(m=s),p>=o.length&&o.push(this._generateOneMoreBuffer(e));const g=o[p];g.uploadDynamic(t,f,m);const b=e._bufferUpdateIDs[p]||0;h=h||g._updateID<b,h&&(g._updateID=e._updateID,g.uploadStatic(t,f,m)),n.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],i=e._maxSize,s=e._batchSize,n=e._properties;for(let a=0;a<i;a+=s)t.push(new mp(this.properties,n,s));return t}_generateOneMoreBuffer(e){const t=e._batchSize,i=e._properties;return new mp(this.properties,i,t)}uploadVertices(e,t,i,s,n,a){let o=0,l=0,u=0,c=0;for(let d=0;d<i;++d){const h=e[t+d],f=h._texture,p=h.scale.x,m=h.scale.y,g=f.trim,b=f.orig;g?(l=g.x-h.anchor.x*b.width,o=l+g.width,c=g.y-h.anchor.y*b.height,u=c+g.height):(o=b.width*(1-h.anchor.x),l=b.width*-h.anchor.x,u=b.height*(1-h.anchor.y),c=b.height*-h.anchor.y),s[a]=l*p,s[a+1]=c*m,s[a+n]=o*p,s[a+n+1]=c*m,s[a+n*2]=o*p,s[a+n*2+1]=u*m,s[a+n*3]=l*p,s[a+n*3+1]=u*m,a+=n*4}}uploadPosition(e,t,i,s,n,a){for(let o=0;o<i;o++){const l=e[t+o].position;s[a]=l.x,s[a+1]=l.y,s[a+n]=l.x,s[a+n+1]=l.y,s[a+n*2]=l.x,s[a+n*2+1]=l.y,s[a+n*3]=l.x,s[a+n*3+1]=l.y,a+=n*4}}uploadRotation(e,t,i,s,n,a){for(let o=0;o<i;o++){const l=e[t+o].rotation;s[a]=l,s[a+n]=l,s[a+n*2]=l,s[a+n*3]=l,a+=n*4}}uploadUvs(e,t,i,s,n,a){for(let o=0;o<i;++o){const l=e[t+o]._texture._uvs;l?(s[a]=l.x0,s[a+1]=l.y0,s[a+n]=l.x1,s[a+n+1]=l.y1,s[a+n*2]=l.x2,s[a+n*2+1]=l.y2,s[a+n*3]=l.x3,s[a+n*3+1]=l.y3,a+=n*4):(s[a]=0,s[a+1]=0,s[a+n]=0,s[a+n+1]=0,s[a+n*2]=0,s[a+n*2+1]=0,s[a+n*3]=0,s[a+n*3+1]=0,a+=n*4)}}uploadTint(e,t,i,s,n,a){for(let o=0;o<i;++o){const l=e[t+o],u=Se.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);s[a]=u,s[a+n]=u,s[a+n*2]=u,s[a+n*3]=u,a+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}vv.extension={name:"particle",type:H.RendererPlugin};Y.add(vv);var YA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,QA=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,KA=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gp=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,ZA=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ca=new Ee;class bv extends Vo{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Ry,this.state=tr.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Yt.from(gp,ZA,t),this.shader=e.context.webGLVersion>1?Yt.from(QA,YA,t):Yt.from(gp,KA,t)}render(e){const t=this.renderer,i=this.quad;let s=i.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const n=e.uvRespectAnchor?e.anchor.x:0,a=e.uvRespectAnchor?e.anchor.y:0;s=i.uvs,s[0]=s[6]=-n,s[1]=s[3]=-a,s[2]=s[4]=1-n,s[5]=s[7]=1-a,i.invalidate();const o=e._texture,l=o.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,d=e.uvMatrix;let h=l.isPowerOfTwo&&o.frame.width===l.width&&o.frame.height===l.height;h&&(l._glTextures[t.CONTEXT_UID]?h=l.wrapMode!==Lr.CLAMP:l.wrapMode===Lr.CLAMP&&(l.wrapMode=Lr.REPEAT));const f=h?this.simpleShader:this.shader,p=o.width,m=o.height,g=e._width,b=e._height;ca.set(c.a*p/g,c.b*p/b,c.c*m/g,c.d*m/b,c.tx/g,c.ty/b),ca.invert(),h?ca.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=ca.toArray(!0),f.uniforms.uColor=Se.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=o,t.shader.bind(f),t.geometry.bind(i),this.state.blendMode=gy(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}bv.extension={name:"tilingSprite",type:H.RendererPlugin};Y.add(bv);const xv=class Rc{constructor(e){this.stage=new Rt,e=Object.assign({forceCanvas:!1},e),this.renderer=TT(e),Rc._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const i=Rc._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};xv._plugins=[];let JA=xv;Y.handleByList(H.Application,JA._plugins);class _v{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:n}=this._resizeTo;t=s,i=n}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}_v.extension=H.Application;Y.add(_v);Ce.prototype.name=null;Rt.prototype.getChildByName=function(r,e){for(let t=0,i=this.children.length;t<i;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,i=this.children.length;t<i;t++){const s=this.children[t];if(!s.getChildByName)continue;const n=s.getChildByName(r,!0);if(n)return n}return null};const wv=new Ee;Ce.prototype._cacheAsBitmap=!1;Ce.prototype._cacheData=null;Ce.prototype._cacheAsBitmapResolution=null;Ce.prototype._cacheAsBitmapMultisample=null;class eC{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ce.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new eC),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Ce.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Ce.prototype._initCachedDisplayObject=function(r){var h,f;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new ae,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;t.pad(p)}const i=this.cacheAsBitmapResolution||r.resolution;t.ceil(i),t.width=Math.max(t.width,1/i),t.height=Math.max(t.height,1/i);const s=r.renderTexture.current,n=r.renderTexture.sourceFrame.clone(),a=r.renderTexture.destinationFrame.clone(),o=r.projection.transform,l=Ei.create({width:t.width,height:t.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${gi()}`;this._cacheData.textureCacheId=u,te.addToCache(l.baseTexture,u),X.addToCache(l,u);const c=this.transform.localTransform.copyTo(wv).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=o,r.renderTexture.bind(s,n,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const d=new gs(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(t.x/t.width),d.anchor.y=-(t.y/t.height),d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};Ce.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Ce.prototype._initCachedDisplayObjectCanvas=function(r){var c;if((c=this._cacheData)!=null&&c.sprite)return;const e=this.getLocalBounds(new ae,!0),t=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,s=r._projTransform,n=this.cacheAsBitmapResolution||r.resolution;e.ceil(n),e.width=Math.max(e.width,1/n),e.height=Math.max(e.height,1/n);const a=Ei.create({width:e.width,height:e.height,resolution:n}),o=`cacheAsBitmap_${gi()}`;this._cacheData.textureCacheId=o,te.addToCache(a.baseTexture,o),X.addToCache(a,o);const l=wv;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:a,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new gs(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ce.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ce.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ce.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,te.removeFromCache(this._cacheData.textureCacheId),X.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ce.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Ce.prototype.getGlobalPosition=function(r=new ye,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var tC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class rC extends Ye{constructor(e=1){super(PT,tC,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const iC={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},sC=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function nC(r){const e=iC[r],t=e.length;let i=sC,s="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let a;for(let o=0;o<r;o++){let l=n.replace("%index%",o.toString());a=o,o>=t&&(a=r-o-1),l=l.replace("%value%",e[a].toString()),s+=l,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}const aC=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function oC(r,e){const t=Math.ceil(r/2);let i=aC,s="",n;e?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let a=0;a<r;a++){let o=n.replace("%index%",a.toString());o=o.replace("%sampleIndex%",`${a-(t-1)}.0`),s+=o,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}class Ic extends Ye{constructor(e,t=8,i=4,s=Ye.defaultResolution,n=5){const a=oC(n,e),o=nC(n);super(a,o),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=i,this.blur=t}apply(e,t,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/t.width):this.uniforms.strength=1/i.height*(i.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,i,s);else{const n=e.getFilterTexture(),a=e.renderer;let o=t,l=n;this.state.blend=!1,e.applyFilter(this,o,l,zt.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(o,zt.BLIT),this.uniforms.uSampler=l;const c=l;l=o,o=c,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,i,s),e.returnFilterTexture(n)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class lC extends Ye{constructor(e=8,t=4,i=Ye.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Ic(!0,e,t,i,s),this.blurYFilter=new Ic(!1,e,t,i,s),this.resolution=i,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,i,s){const n=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(n&&a){const o=e.getFilterTexture();this.blurXFilter.apply(e,t,o,zt.CLEAR),this.blurYFilter.apply(e,o,i,s),e.returnFilterTexture(o)}else a?this.blurYFilter.apply(e,t,i,s):this.blurXFilter.apply(e,t,i,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var uC=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Mc extends Ye{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Qy,uC,e),this.alpha=1}_loadMatrix(e,t=!1){let i=e;t&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}tint(e,t){const[i,s,n]=Se.shared.setValue(e).toArray(),a=[i,0,0,0,0,0,s,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(a,t)}greyscale(e,t){const i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const i=Math.cos(e),s=Math.sin(e),n=Math.sqrt,a=1/3,o=n(a),l=i+(1-i)*a,u=a*(1-i)-o*s,c=a*(1-i)+o*s,d=a*(1-i)+o*s,h=i+a*(1-i),f=a*(1-i)-o*s,p=a*(1-i)-o*s,m=a*(1-i)+o*s,g=i+a*(1-i),b=[l,u,c,0,0,d,h,f,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(b,t)}contrast(e,t){const i=(e||0)+1,s=-.5*(i-1),n=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(n,t)}saturate(e=0,t){const i=e*2/3+1,s=(i-1)*-.5,n=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(n,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,i,s,n){e=e||.2,t=t||.15,i=i||16770432,s=s||3375104;const a=Se.shared,[o,l,u]=a.setValue(i).toArray(),[c,d,h]=a.setValue(s).toArray(),f=[.3,.59,.11,0,0,o,l,u,e,0,c,d,h,t,0,o-c,l-d,u-h,0,0];this._loadMatrix(f,n)}night(e,t){e=e||.1;const i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,t)}predator(e,t){const i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Mc.prototype.grayscale=Mc.prototype.greyscale;var cC=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,hC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class dC extends Ye{constructor(e,t){const i=new Ee;e.renderable=!1,super(hC,cC,{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=i,t==null&&(t=20),this.scale=new ye(t,t)}apply(e,t,i,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,a=Math.sqrt(n.a*n.a+n.b*n.b),o=Math.sqrt(n.c*n.c+n.d*n.d);a!==0&&o!==0&&(this.uniforms.rotation[0]=n.a/a,this.uniforms.rotation[1]=n.b/a,this.uniforms.rotation[2]=n.c/o,this.uniforms.rotation[3]=n.d/o),e.applyFilter(this,t,i,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var fC=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,pC=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class mC extends Ye{constructor(){super(pC,fC)}}var gC=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class yC extends Ye{constructor(e=.5,t=Math.random()){super(Qy,gC,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const yp={AlphaFilter:rC,BlurFilter:lC,BlurFilterPass:Ic,ColorMatrixFilter:Mc,DisplacementFilter:dC,FXAAFilter:mC,NoiseFilter:yC};Object.entries(yp).forEach(([r,e])=>{Object.defineProperty(yp,r,{get(){return he("7.1.0",`filters.${r} has moved to ${r}`),e}})});class vC{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(nt.system.add(this.tickerUpdate,this,yi.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(nt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Cr=new vC;class Fn{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Fn.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ye,this.page=new ye,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class fo extends Fn{constructor(){super(...arguments),this.client=new ye,this.movement=new ye,this.offset=new ye,this.global=new ye,this.screen=new ye}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,s,n,a,o,l,u,c,d,h,f,p,m){throw new Error("Method not implemented.")}}class _t extends fo{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class is extends fo{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}is.DOM_DELTA_PIXEL=0,is.DOM_DELTA_LINE=1,is.DOM_DELTA_PAGE=2;const bC=2048,xC=new ye,su=new ye;class _C{constructor(e){this.dispatch=new On,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,s)=>i.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,s=t.length;i<s;i++)t[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Cr.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,xC.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(t)?t:[t];for(let n=i.length-1;n>=0;n--)s.forEach(a=>{e.currentTarget=i[n],this.notifyTarget(e,a)})}propagationPath(e){const t=[e];for(let i=0;i<bC&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,s,n,a=!1){let o=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Cr.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let d=c.length-1;d>=0;d--){const h=c[d],f=this.hitTestMoveRecursive(h,this._isInteractive(t)?t:h.eventMode,i,s,n,a||n(e,i));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),o=!0}}}const l=this._isInteractive(t),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:o?this._hitElements:l&&!n(e,i)&&s(e,i)?u?[e]:[]:null}hitTestRecursive(e,t,i,s,n){if(this._interactivePrune(e)||n(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Cr.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const c=l[u],d=this.hitTestRecursive(c,this._isInteractive(t)?t:c.eventMode,i,s,n);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const h=e.isInteractive();return(d.length>0||h)&&d.push(e),d}}}const a=this._isInteractive(t),o=e.isInteractive();return a&&s(e,i)?o?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var i;if(e.hitArea&&(e.worldTransform.applyInverse(t,su),!e.hitArea.contains(su.x,su.y)))return!0;if(e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var n,a;t=t??e.type;const i=`on${t}`;(a=(n=e.currentTarget)[i])==null||a.call(n,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof _t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const s=t.button===2;this.dispatchEvent(t,s?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,u;if(!(e instanceof _t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.trackingData(e.pointerId),n=this.findMountedTarget(s.overTargets);if(((l=s.overTargets)==null?void 0:l.length)>0&&n!==t.target){const c=e.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(e,c,n);if(this.dispatchEvent(d,"pointerout"),i&&this.dispatchEvent(d,"mouseout"),!t.composedPath().includes(n)){const h=this.createPointerEvent(e,"pointerleave",n);for(h.eventPhase=h.AT_TARGET;h.target&&!t.composedPath().includes(h.target);)h.currentTarget=h.target,this.notifyTarget(h),i&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(d)}if(n!==t.target){const c=e.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(t,c);this.dispatchEvent(d,"pointerover"),i&&this.dispatchEvent(d,"mouseover");let h=n==null?void 0:n.parent;for(;h&&h!==this.rootTarget.parent&&h!==t.target;)h=h.parent;if(!h||h===this.rootTarget.parent){const f=this.clonePointerEvent(t,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==n&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}const a=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(t,"pointermove"),o&&a.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),o&&a.push("globaltouchmove")),i&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),o&&a.push("globalmousemove"),this.cursor=(u=t.target)==null?void 0:u.cursor),a.length>0&&this.all(t,a),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var a;if(!(e instanceof _t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(a=i.target)==null?void 0:a.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(e){if(!(e instanceof _t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(t.overTargets),n=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const a=this.createPointerEvent(e,"pointerleave",s);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),i&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;t.overTargets=null,this.freeEvent(n),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof _t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const o=i.button===2;this.dispatchEvent(i,o?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[e.button]);let a=n;if(n&&!i.composedPath().includes(n)){let o=n;for(;o&&!i.composedPath().includes(o);){if(i.currentTarget=o,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}o=o.parent}delete s.pressTargetsByButton[e.button],a=o}if(a){const o=this.clonePointerEvent(i,"click");o.target=a,o.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:o.target,timeStamp:t});const l=s.clicksByButton[e.button];if(l.target===o.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=o.target,l.timeStamp=t,o.detail=l.clickCount,o.pointerType==="mouse"){const u=o.button===2;this.dispatchEvent(o,u?"rightclick":"click")}else o.pointerType==="touch"&&this.dispatchEvent(o,"tap");this.dispatchEvent(o,"pointertap"),this.freeEvent(o)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof _t)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof is)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const s=this.allocateEvent(_t);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof t=="string"&&(s.type=t),s}createWheelEvent(e){const t=this.allocateEvent(is);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(_t);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof _t&&t instanceof _t&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof fo&&t instanceof fo&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const i=e.currentTarget._events[t];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let s=0,n=i.length;s<n&&!e.propagationImmediatelyStopped;s++)i[s].once&&e.currentTarget.removeListener(t,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,e)}}const wC=1,SC={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Oc=class Dc{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new _C(null),Cr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new _t(null),this.rootWheelEvent=new is(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Dc.defaultEventFeatures},{set:(t,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,Dc._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=t.length;i<s;i++){const n=t[i],a=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Cr.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let n=0,a=s.length;n<a;n++){const o=this.bootstrapEvent(this.rootPointerEvent,s[n]);o.type+=i,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Cr.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Cr.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Cr.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},n=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*n,e.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){const n=e.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=wC),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=SC[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Oc.extension={name:"events",type:[H.RendererSystem,H.CanvasRendererSystem]},Oc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Lc=Oc;Y.add(Lc);function vp(r){return r==="dynamic"||r==="static"}const EC={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??vp(Lc.defaultEventMode)},set interactive(r){he("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Lc.defaultEventMode},set eventMode(r){this._internalInteractive=vp(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof t=="object"?t.signal:void 0,n=typeof t=="object"?t.once===!0:!1,a=typeof e=="function"?void 0:e;r=i?`${r}capture`:r;const o=typeof e=="function"?e:e.handleEvent,l=this;s&&s.addEventListener("abort",()=>{l.off(r,o,a)}),n?l.once(r,o,a):l.on(r,o,a)},removeEventListener(r,e,t){const i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof e=="function"?void 0:e;r=i?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,s)},dispatchEvent(r){if(!(r instanceof Fn))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ce.mixin(EC);const TC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ce.mixin(TC);const AC=9,ha=100,CC=0,PC=0,bp=2,xp=1,RC=-1e3,IC=-1e3,MC=2;class Sv{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ur.tablet||ur.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${ha}px`,t.style.height=`${ha}px`,t.style.position="absolute",t.style.top=`${CC}px`,t.style.left=`${PC}px`,t.style.zIndex=bp.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${xp}px`,e.style.height=`${xp}px`,e.style.position="absolute",e.style.top=`${RC}px`,e.style.left=`${IC}px`,e.style.zIndex=MC.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}update(){const e=performance.now();if(ur.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:i,width:s,height:n}=this.renderer.view.getBoundingClientRect(),{width:a,height:o,resolution:l}=this.renderer,u=s/a*l,c=n/o*l;let d=this.div;d.style.left=`${t}px`,d.style.top=`${i}px`,d.style.width=`${a}px`,d.style.height=`${o}px`;for(let h=0;h<this.children.length;h++){const f=this.children[h];if(f.renderId!==this.renderId)f._accessibleActive=!1,Ji(this.children,h,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,h--;else{d=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(d.style.left=`${(m.tx+p.x*m.a)*u}px`,d.style.top=`${(m.ty+p.y*m.d)*c}px`,d.style.width=`${p.width*m.a*u}px`,d.style.height=`${p.height*m.d*c}px`):(p=f.getBounds(),this.capHitArea(p),d.style.left=`${p.x*u}px`,d.style.top=`${p.y*c}px`,d.style.width=`${p.width*u}px`,d.style.height=`${p.height*c}px`,d.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&d.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==d.title||f.tabIndex!==d.tabIndex)&&(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:i}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${ha}px`,t.style.height=`${ha}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=bp.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:i}=e.target,s=this.renderer.events.rootBoundary,n=Object.assign(new Fn(s),{target:i});s.rootTarget=this.renderer.lastObjectRendered,t.forEach(a=>s.dispatchEvent(n,a))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===AC&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Sv.extension={name:"accessibility",type:[H.RendererPlugin,H.CanvasRendererPlugin]};Y.add(Sv);var $e=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))($e||{});const po={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let $t,Hi;function _p(){Hi={bptc:$t.getExtension("EXT_texture_compression_bptc"),astc:$t.getExtension("WEBGL_compressed_texture_astc"),etc:$t.getExtension("WEBGL_compressed_texture_etc"),s3tc:$t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:$t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:$t.getExtension("WEBGL_compressed_texture_pvrtc")||$t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:$t.getExtension("WEBGL_compressed_texture_etc1"),atc:$t.getExtension("WEBGL_compressed_texture_atc")}}const OC={extension:{type:H.DetectionParser,priority:2},test:async()=>{const r=W.ADAPTER.createCanvas().getContext("webgl");return r?($t=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{Hi||_p();const e=[];for(const t in Hi)Hi[t]&&e.push(t);return[...e,...r]},remove:async r=>(Hi||_p(),r.filter(e=>!(e in Hi)))};Y.add(OC);class DC extends $o{constructor(e,t={width:1,height:1,autoLoad:!0}){let i,s;typeof e=="string"?(i=e,s=new Uint8Array):(i=null,s=e),super(s,t),this.origin=i,this.buffer=s?new ac(s):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new ac(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class di extends DC{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=di._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||di._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,i){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let n=0,a=this.levels;n<a;n++){const{levelID:o,levelWidth:l,levelHeight:u,levelBuffer:c}=this._levelBuffers[n];s.compressedTexImage2D(s.TEXTURE_2D,o,this.format,l,u,0,c)}return!0}onBlobLoaded(){this._levelBuffers=di._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,i,s,n,a,o){const l=new Array(i);let u=e.byteOffset,c=a,d=o,h=c+s-1&~(s-1),f=d+n-1&~(n-1),p=h*f*po[t];for(let m=0;m<i;m++)l[m]={levelID:m,levelWidth:i>1?c:h,levelHeight:i>1?d:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,c=c>>1||1,d=d>>1||1,h=c+s-1&~(s-1),f=d+n-1&~(n-1),p=h*f*po[t];return l}}const nu=4,da=124,LC=32,wp=20,NC=542327876,fa={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},FC={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},pa={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},kC=1,BC=2,UC=4,jC=64,$C=512,GC=131072,HC=827611204,zC=861165636,VC=894720068,WC=808540228,qC=4,XC={[HC]:$e.COMPRESSED_RGBA_S3TC_DXT1_EXT,[zC]:$e.COMPRESSED_RGBA_S3TC_DXT3_EXT,[VC]:$e.COMPRESSED_RGBA_S3TC_DXT5_EXT},YC={70:$e.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:$e.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:$e.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:$e.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:$e.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:$e.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:$e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:$e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:$e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:$e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:$e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:$e.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:$e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function QC(r){const e=new Uint32Array(r);if(e[0]!==NC)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,da/Uint32Array.BYTES_PER_ELEMENT),i=t[fa.HEIGHT],s=t[fa.WIDTH],n=t[fa.MIPMAP_COUNT],a=new Uint32Array(r,fa.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,LC/Uint32Array.BYTES_PER_ELEMENT),o=a[kC];if(o&UC){const l=a[FC.FOURCC];if(l!==WC){const x=XC[l],y=nu+da,v=new Uint8Array(r,y);return[new di(v,{format:x,width:s,height:i,levels:n})]}const u=nu+da,c=new Uint32Array(e.buffer,u,wp/Uint32Array.BYTES_PER_ELEMENT),d=c[pa.DXGI_FORMAT],h=c[pa.RESOURCE_DIMENSION],f=c[pa.MISC_FLAG],p=c[pa.ARRAY_SIZE],m=YC[d];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(f===qC)throw new Error("DDSParser does not support cubemap textures");if(h===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,b=nu+da+wp;if(p===1)g.push(new Uint8Array(r,b));else{const x=po[m];let y=0,v=s,S=i;for(let w=0;w<n;w++){const E=Math.max(1,v+3&-4),A=Math.max(1,S+3&-4),M=E*A*x;y+=M,v=v>>>1,S=S>>>1}let T=b;for(let w=0;w<p;w++)g.push(new Uint8Array(r,T,y)),T+=y}return g.map(x=>new di(x,{format:m,width:s,height:i,levels:n}))}throw o&jC?new Error("DDSParser does not support uncompressed texture data."):o&$C?new Error("DDSParser does not supported YUV uncompressed texture data."):o&GC?new Error("DDSParser does not support single-channel (lumninance) texture data!"):o&BC?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Sp=[171,75,84,88,32,49,49,187,13,10,26,10],KC=67305985,bt={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Nc=64,Ep={[Z.UNSIGNED_BYTE]:1,[Z.UNSIGNED_SHORT]:2,[Z.INT]:4,[Z.UNSIGNED_INT]:4,[Z.FLOAT]:4,[Z.HALF_FLOAT]:8},ZC={[G.RGBA]:4,[G.RGB]:3,[G.RG]:2,[G.RED]:1,[G.LUMINANCE]:1,[G.LUMINANCE_ALPHA]:2,[G.ALPHA]:1},JC={[Z.UNSIGNED_SHORT_4_4_4_4]:2,[Z.UNSIGNED_SHORT_5_5_5_1]:2,[Z.UNSIGNED_SHORT_5_6_5]:2};function eP(r,e,t=!1){const i=new DataView(e);if(!tP(r,i))return null;const s=i.getUint32(bt.ENDIANNESS,!0)===KC,n=i.getUint32(bt.GL_TYPE,s),a=i.getUint32(bt.GL_FORMAT,s),o=i.getUint32(bt.GL_INTERNAL_FORMAT,s),l=i.getUint32(bt.PIXEL_WIDTH,s),u=i.getUint32(bt.PIXEL_HEIGHT,s)||1,c=i.getUint32(bt.PIXEL_DEPTH,s)||1,d=i.getUint32(bt.NUMBER_OF_ARRAY_ELEMENTS,s)||1,h=i.getUint32(bt.NUMBER_OF_FACES,s),f=i.getUint32(bt.NUMBER_OF_MIPMAP_LEVELS,s),p=i.getUint32(bt.BYTES_OF_KEY_VALUE_DATA,s);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const m=4,g=4,b=l+3&-4,x=u+3&-4,y=new Array(d);let v=l*u;n===0&&(v=b*x);let S;if(n!==0?Ep[n]?S=Ep[n]*ZC[a]:S=JC[n]:S=po[o],S===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=t?iP(i,p,s):null;let w=v*S,E=l,A=u,M=b,I=x,O=Nc+p;for(let R=0;R<f;R++){const _=i.getUint32(O,s);let C=O+4;for(let D=0;D<d;D++){let k=y[D];k||(k=y[D]=new Array(f)),k[R]={levelID:R,levelWidth:f>1||n!==0?E:M,levelHeight:f>1||n!==0?A:I,levelBuffer:new Uint8Array(e,C,w)},C+=w}O+=_+4,O=O%4!==0?O+4-O%4:O,E=E>>1||1,A=A>>1||1,M=E+m-1&~(m-1),I=A+g-1&~(g-1),w=M*I*S}return n!==0?{uncompressed:y.map(R=>{let _=R[0].levelBuffer,C=!1;return n===Z.FLOAT?_=new Float32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4):n===Z.UNSIGNED_INT?(C=!0,_=new Uint32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)):n===Z.INT&&(C=!0,_=new Int32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)),{resource:new $o(_,{width:R[0].levelWidth,height:R[0].levelHeight}),type:n,format:C?rP(a):a}}),kvData:T}:{compressed:y.map(R=>new di(null,{format:o,width:l,height:u,levels:f,levelBuffers:R})),kvData:T}}function tP(r,e){for(let t=0;t<Sp.length;t++)if(e.getUint8(t)!==Sp[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function rP(r){switch(r){case G.RGBA:return G.RGBA_INTEGER;case G.RGB:return G.RGB_INTEGER;case G.RG:return G.RG_INTEGER;case G.RED:return G.RED_INTEGER;default:return r}}function iP(r,e,t){const i=new Map;let s=0;for(;s<e;){const n=r.getUint32(Nc+s,t),a=Nc+s+4,o=3-(n+3)%4;if(n===0||n>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&r.getUint8(a+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,a,l)),c=new DataView(r.buffer,a+l+1,n-l-1);i.set(u,c),s+=4+n+o}return i}const sP={extension:{type:H.LoadParser,priority:Dt.High},name:"loadDDS",test(r){return Gr(r,".dds")},async load(r,e,t){const i=await(await W.ADAPTER.fetch(r)).arrayBuffer(),s=QC(i).map(n=>{const a=new te(n,{mipmap:Qt.OFF,alphaMode:et.NO_PREMULTIPLIED_ALPHA,resolution:mr(r),...e.data});return Nn(a,t,r)});return s.length===1?s[0]:s},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Y.add(sP);const nP={extension:{type:H.LoadParser,priority:Dt.High},name:"loadKTX",test(r){return Gr(r,".ktx")},async load(r,e,t){const i=await(await W.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:n,kvData:a}=eP(r,i),o=s??n,l={mipmap:Qt.OFF,alphaMode:et.NO_PREMULTIPLIED_ALPHA,resolution:mr(r),...e.data},u=o.map(c=>{o===n&&Object.assign(l,{type:c.type,format:c.format});const d=c.resource??c,h=new te(d,l);return h.ktxKeyValueData=a,Nn(h,t,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Y.add(nP);const aP=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],oP={extension:H.ResolveParser,test:r=>{const e=je.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var i,s;const e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const n=e.pop();if(aP.includes(n))return{resolution:parseFloat(((i=W.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:n,src:r}}return{resolution:parseFloat(((s=W.RETINA_PREFIX.exec(r))==null?void 0:s[1])??"1"),format:t,src:r}}};Y.add(oP);const ma=new ae,lP=4,Ev=class Us{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,i,s){const n=new Image;return n.src=await this.base64(e,t,i,s),n}async base64(e,t,i,s){const n=this.canvas(e,s);if(n.toBlob!==void 0)return new Promise((a,o)=>{n.toBlob(l=>{if(!l){o(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>a(u.result),u.onerror=o,u.readAsDataURL(l)},t,i)});if(n.toDataURL!==void 0)return n.toDataURL(t,i);if(n.convertToBlob!==void 0){const a=await n.convertToBlob({type:t,quality:i});return new Promise((o,l)=>{const u=new FileReader;u.onload=()=>o(u.result),u.onerror=l,u.readAsDataURL(a)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:s,height:n,flipY:a,premultipliedAlpha:o}=this._rawPixels(e,t);a&&Us._flipY(i,s,n),o&&Us._unpremultiplyAlpha(i);const l=new fE(s,n,1),u=new ImageData(new Uint8ClampedArray(i.buffer),s,n);return l.context.putImageData(u,0,0),l.canvas}pixels(e,t){const{pixels:i,width:s,height:n,flipY:a,premultipliedAlpha:o}=this._rawPixels(e,t);return a&&Us._flipY(i,s,n),o&&Us._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,a=!1,o,l=!1;e&&(e instanceof Ei?o=e:(o=i.generateTexture(e,{region:t,resolution:i.resolution,multisample:i.multisample}),l=!0,t&&(ma.width=t.width,ma.height=t.height,t=ma)));const u=i.gl;if(o){if(s=o.baseTexture.resolution,t=t??o.frame,n=!1,a=o.baseTexture.alphaMode>0&&o.baseTexture.format===G.RGBA,!l){i.renderTexture.bind(o);const f=o.framebuffer.glFramebuffers[i.CONTEXT_UID];f.blitFramebuffer&&i.framebuffer.bind(f.blitFramebuffer)}}else s=i.resolution,t||(t=ma,t.width=i.width/s,t.height=i.height/s),n=!0,a=this._rendererPremultipliedAlpha,i.renderTexture.bind();const c=Math.max(Math.round(t.width*s),1),d=Math.max(Math.round(t.height*s),1),h=new Uint8Array(lP*c*d);return u.readPixels(Math.round(t.x*s),Math.round(t.y*s),c,d,u.RGBA,u.UNSIGNED_BYTE,h),l&&(o==null||o.destroy(!0)),{pixels:h,width:c,height:d,flipY:n,premultipliedAlpha:a}}destroy(){this.renderer=null}static _flipY(e,t,i){const s=t<<2,n=i>>1,a=new Uint8Array(s);for(let o=0;o<n;o++){const l=o*s,u=(i-o-1)*s;a.set(e.subarray(l,l+s)),e.copyWithin(l,u,u+s),e.set(a,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const s=e[i+3];if(s!==0){const n=255.001/s;e[i]=e[i]*n+.5,e[i+1]=e[i+1]*n+.5,e[i+2]=e[i+2]*n+.5}}}};Ev.extension={name:"extract",type:H.RendererSystem};let uP=Ev;Y.add(uP);class cP{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function hP(r,e){var i;let t=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let s=0;s<r._textures.length;s++)if(r._textures[s]instanceof X){const n=r._textures[s].baseTexture;e.includes(n)||(e.push(n),t=!0)}}return t}function dP(r,e){if(r.baseTexture instanceof te){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function fP(r,e){if(r._texture&&r._texture instanceof X){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function pP(r,e){return e instanceof av?(e.updateText(!0),!0):!1}function mP(r,e){if(e instanceof kr){const t=e.toFontString();return Ar.measureFont(t),!0}return!1}function gP(r,e){if(r instanceof av){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function yP(r,e){return r instanceof kr?(e.includes(r)||e.push(r),!0):!1}const Tv=class Av{constructor(e){this.limiter=new cP(Av.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(gP),this.registerFindHook(yP),this.registerFindHook(hP),this.registerFindHook(dP),this.registerFindHook(fP),this.registerUploadHook(pP),this.registerUploadHook(mP)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,nt.system.addOnce(this.tick,this,yi.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)nt.system.addOnce(this.tick,this,yi.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Rt)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&nt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Tv.uploadsPerFrame=4;let Fc=Tv;Object.defineProperties(W,{UPLOADS_PER_FRAME:{get(){return Fc.uploadsPerFrame},set(r){he("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Fc.uploadsPerFrame=r}}});function Cv(r,e){return e instanceof te?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function vP(r,e){if(!(e instanceof yv))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:i}=t;for(let s=0;s<i.length;s++){const{texture:n}=i[s].style;n&&Cv(r,n.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function bP(r,e){return r instanceof yv?(e.push(r),!0):!1}class Pv extends Fc{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(bP),this.registerUploadHook(Cv),this.registerUploadHook(vP)}}Pv.extension={name:"prepare",type:H.RendererSystem};Y.add(Pv);const Rv=class js{constructor(e,t,i){this.linkedSheets=[],(e instanceof te||e instanceof X)&&(e={texture:e,data:t,resolutionFilename:i});const{texture:s,data:n,resolutionFilename:a=null,cachePrefix:o=""}=e;this.cachePrefix=o,this._texture=s instanceof X?s:null,this.baseTexture=s instanceof te?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;const l=this.baseTexture.resource;this.resolution=this._updateResolution(a||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=mr(e,null);return i===null&&(i=typeof t=="number"?t:parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=js.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=js.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const s=this._frameKeys[t],n=this._frames[s],a=n.frame;if(a){let o=null,l=null;const u=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new ae(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);n.rotated?o=new ae(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new ae(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new ae(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[s]=new X(this.baseTexture,o,c,l,n.rotated?2:0,n.anchor,n.borders),X.addToCache(this.textures[s],this.cachePrefix+s.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const s=e[t][i];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*js.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*js.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Rv.BATCH_SIZE=1e3;let Tp=Rv;const xP=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Iv(r,e,t){const i={};if(r.forEach(s=>{i[s]=e}),Object.keys(e.textures).forEach(s=>{i[`${e.cachePrefix}${s}`]=e.textures[s]}),!t){const s=je.dirname(r[0]);e.linkedSheets.forEach((n,a)=>{Object.assign(i,Iv([`${s}/${e.data.meta.related_multi_packs[a]}`],n,!0))})}return i}const _P={extension:H.Asset,cache:{test:r=>r instanceof Tp,getCacheableAssets:(r,e)=>Iv(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&xP.includes(i)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=W.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:H.LoadParser,priority:Dt.Normal},async testParse(r,e){return je.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var c,d;const{texture:i,imageFilename:s,cachePrefix:n}=(e==null?void 0:e.data)??{};let a=je.dirname(e.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let o;if(i&&i.baseTexture)o=i;else{const h=Ac(a+(s??r.meta.image),e.src);o=(await t.load([h]))[h]}const l=new Tp({texture:o.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:n});await l.parse();const u=(c=r==null?void 0:r.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(u)){const h=[];for(const p of u){if(typeof p!="string")continue;let m=a+p;(d=e.data)!=null&&d.ignoreMultiPack||(m=Ac(m,e.src),h.push(t.load({src:m,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(h);l.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[l].concat(l.linkedSheets.filter(m=>m!==p))})}return l},unload(r){r.destroy(!0)}}};Y.add(_P);const kc=class zi extends kr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new zi(Object.keys(zi.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete zi.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=zi;if(i[e]){const s=i[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return W.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((n,a)=>{const o=URL.createObjectURL(s),l=new FileReader;l.onload=()=>n([o,l.result]),l.onerror=a,l.readAsDataURL(s)})).then(async([s,n])=>{const a=Object.assign({family:je.basename(e,je.extname(e)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:n,refs:1,originalUrl:e,fontFace:null},t);i[e]=a,this._fonts.push(a),this.styleID++;const o=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style,display:a.display});a.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=uE(e)),typeof e=="number"?lE(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${n} ${e}`}reset(){Object.assign(this,zi.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=W.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};kc.availableFonts={},kc.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let au=kc;const ga=class Vi extends gs{constructor(e="",t={}){super(X.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,s=X.from(i,{scaleMode:W.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new ae,s.trim=new ae,this.texture=s;const n="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xhtml",o=document.createElementNS(n,"svg"),l=document.createElementNS(n,"foreignObject"),u=document.createElementNS(a,"div"),c=document.createElementNS(a,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",o.appendChild(l),this.maxWidth=Vi.defaultMaxWidth,this.maxHeight=Vi.defaultMaxHeight,this._domElement=u,this._styleElement=c,this._svgRoot=o,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=Vi.defaultAutoResolution,this._resolution=Vi.defaultResolution??W.RESOLUTION,this.text=e,this.style=t}measureText(e){var c,d;const{text:t,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:a,height:o}=n;(a>this.maxWidth||o>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(a)),u=Math.min(this.maxHeight,Math.ceil(o));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(c=this._style)==null?void 0:c.toCSS(s)}),this._styleElement.textContent=(d=this._style)==null?void 0:d.toGlobalCSS()),{width:l+i.padding*2,height:u+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:n,height:a}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,a)),this._updateID++;const o=this._updateID;await new Promise(l=>{s.onload=async()=>{if(o<this._updateID){l();return}await t.onBeforeDraw(),i.src=s.src,s.onload=null,s.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:s}=this,{padding:n}=e,{baseTexture:a}=t;t.trim.width=t._frame.width=i.width/s,t.trim.height=t._frame.height=i.height/s,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),a.setRealSize(i.width,i.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,s,n,a,o;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Vi.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(s=this._svgRoot)==null||s.remove(),this._svgRoot=t,(n=this._domElement)==null||n.remove(),this._domElement=t,(a=this._foreignObject)==null||a.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Rr(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Rr(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof au?(this.ownsStyle=!1,this._style=e):e instanceof kr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=au.from(e)):(this.ownsStyle=!0,this._style=new au(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ga.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ga.defaultMaxWidth=2024,ga.defaultMaxHeight=2024,ga.defaultAutoResolution=!0;var Dh=Bn(),ie=r=>kn(r,Dh),Lh=Bn();ie.write=r=>kn(r,Lh);var Yo=Bn();ie.onStart=r=>kn(r,Yo);var Nh=Bn();ie.onFrame=r=>kn(r,Nh);var Fh=Bn();ie.onFinish=r=>kn(r,Fh);var ss=[];ie.setTimeout=(r,e)=>{const t=ie.now()+e,i=()=>{const n=ss.findIndex(a=>a.cancel==i);~n&&ss.splice(n,1),Or-=~n?1:0},s={time:t,handler:r,cancel:i};return ss.splice(Mv(t),0,s),Or+=1,Ov(),s};var Mv=r=>~(~ss.findIndex(e=>e.time>r)||~ss.length);ie.cancel=r=>{Yo.delete(r),Nh.delete(r),Fh.delete(r),Dh.delete(r),Lh.delete(r)};ie.sync=r=>{Bc=!0,ie.batchedUpdates(r),Bc=!1};ie.throttle=r=>{let e;function t(){try{r(...e)}finally{e=null}}function i(...s){e=s,ie.onStart(t)}return i.handler=r,i.cancel=()=>{Yo.delete(t),e=null},i};var kh=typeof window<"u"?window.requestAnimationFrame:()=>{};ie.use=r=>kh=r;ie.now=typeof performance<"u"?()=>performance.now():Date.now;ie.batchedUpdates=r=>r();ie.catch=console.error;ie.frameLoop="always";ie.advance=()=>{ie.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Lv()};var Mr=-1,Or=0,Bc=!1;function kn(r,e){Bc?(e.delete(r),r(0)):(e.add(r),Ov())}function Ov(){Mr<0&&(Mr=0,ie.frameLoop!=="demand"&&kh(Dv))}function wP(){Mr=-1}function Dv(){~Mr&&(kh(Dv),ie.batchedUpdates(Lv))}function Lv(){const r=Mr;Mr=ie.now();const e=Mv(Mr);if(e&&(Nv(ss.splice(0,e),t=>t.handler()),Or-=e),!Or){wP();return}Yo.flush(),Dh.flush(r?Math.min(64,Mr-r):16.667),Nh.flush(),Lh.flush(),Fh.flush()}function Bn(){let r=new Set,e=r;return{add(t){Or+=e==r&&!r.has(t)?1:0,r.add(t)},delete(t){return Or-=e==r&&r.has(t)?1:0,r.delete(t)},flush(t){e.size&&(r=new Set,Or-=e.size,Nv(e,i=>i(t)&&r.add(i)),Or+=r.size,e=r)}}}function Nv(r,e){r.forEach(t=>{try{e(t)}catch(i){ie.catch(i)}})}var SP=Object.defineProperty,EP=(r,e)=>{for(var t in e)SP(r,t,{get:e[t],enumerable:!0})},It={};EP(It,{assign:()=>AP,colors:()=>Nr,createStringInterpolator:()=>Uh,skipAnimation:()=>kv,to:()=>Fv,willAdvance:()=>jh});function Uc(){}var TP=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,configurable:!0}),j={arr:Array.isArray,obj:r=>!!r&&r.constructor.name==="Object",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",und:r=>r===void 0};function or(r,e){if(j.arr(r)){if(!j.arr(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}return r===e}var oe=(r,e)=>r.forEach(e);function Kt(r,e,t){if(j.arr(r)){for(let i=0;i<r.length;i++)e.call(t,r[i],`${i}`);return}for(const i in r)r.hasOwnProperty(i)&&e.call(t,r[i],i)}var Qe=r=>j.und(r)?[]:j.arr(r)?r:[r];function Qs(r,e){if(r.size){const t=Array.from(r);r.clear(),oe(t,e)}}var $s=(r,...e)=>Qs(r,t=>t(...e)),Bh=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Uh,Fv,Nr=null,kv=!1,jh=Uc,AP=r=>{r.to&&(Fv=r.to),r.now&&(ie.now=r.now),r.colors!==void 0&&(Nr=r.colors),r.skipAnimation!=null&&(kv=r.skipAnimation),r.createStringInterpolator&&(Uh=r.createStringInterpolator),r.requestAnimationFrame&&ie.use(r.requestAnimationFrame),r.batchedUpdates&&(ie.batchedUpdates=r.batchedUpdates),r.willAdvance&&(jh=r.willAdvance),r.frameLoop&&(ie.frameLoop=r.frameLoop)},Ks=new Set,dt=[],ou=[],mo=0,Qo={get idle(){return!Ks.size&&!dt.length},start(r){mo>r.priority?(Ks.add(r),ie.onStart(CP)):(Bv(r),ie(jc))},advance:jc,sort(r){if(mo)ie.onFrame(()=>Qo.sort(r));else{const e=dt.indexOf(r);~e&&(dt.splice(e,1),Uv(r))}},clear(){dt=[],Ks.clear()}};function CP(){Ks.forEach(Bv),Ks.clear(),ie(jc)}function Bv(r){dt.includes(r)||Uv(r)}function Uv(r){dt.splice(PP(dt,e=>e.priority>r.priority),0,r)}function jc(r){const e=ou;for(let t=0;t<dt.length;t++){const i=dt[t];mo=i.priority,i.idle||(jh(i),i.advance(r),i.idle||e.push(i))}return mo=0,ou=dt,ou.length=0,dt=e,dt.length>0}function PP(r,e){const t=r.findIndex(e);return t<0?r.length:t}var RP=(r,e,t)=>Math.min(Math.max(t,r),e),IP={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Et="[-+]?\\d*\\.?\\d+",go=Et+"%";function Ko(...r){return"\\(\\s*("+r.join(")\\s*,\\s*(")+")\\s*\\)"}var MP=new RegExp("rgb"+Ko(Et,Et,Et)),OP=new RegExp("rgba"+Ko(Et,Et,Et,Et)),DP=new RegExp("hsl"+Ko(Et,go,go)),LP=new RegExp("hsla"+Ko(Et,go,go,Et)),NP=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,FP=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,kP=/^#([0-9a-fA-F]{6})$/,BP=/^#([0-9a-fA-F]{8})$/;function UP(r){let e;return typeof r=="number"?r>>>0===r&&r>=0&&r<=4294967295?r:null:(e=kP.exec(r))?parseInt(e[1]+"ff",16)>>>0:Nr&&Nr[r]!==void 0?Nr[r]:(e=MP.exec(r))?(Di(e[1])<<24|Di(e[2])<<16|Di(e[3])<<8|255)>>>0:(e=OP.exec(r))?(Di(e[1])<<24|Di(e[2])<<16|Di(e[3])<<8|Pp(e[4]))>>>0:(e=NP.exec(r))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=BP.exec(r))?parseInt(e[1],16)>>>0:(e=FP.exec(r))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=DP.exec(r))?(Ap(Cp(e[1]),ya(e[2]),ya(e[3]))|255)>>>0:(e=LP.exec(r))?(Ap(Cp(e[1]),ya(e[2]),ya(e[3]))|Pp(e[4]))>>>0:null}function lu(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function Ap(r,e,t){const i=t<.5?t*(1+e):t+e-t*e,s=2*t-i,n=lu(s,i,r+1/3),a=lu(s,i,r),o=lu(s,i,r-1/3);return Math.round(n*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function Di(r){const e=parseInt(r,10);return e<0?0:e>255?255:e}function Cp(r){return(parseFloat(r)%360+360)%360/360}function Pp(r){const e=parseFloat(r);return e<0?0:e>1?255:Math.round(e*255)}function ya(r){const e=parseFloat(r);return e<0?0:e>100?1:e/100}function Rp(r){let e=UP(r);if(e===null)return r;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,s=(e&65280)>>>8,n=(e&255)/255;return`rgba(${t}, ${i}, ${s}, ${n})`}var hn=(r,e,t)=>{if(j.fun(r))return r;if(j.arr(r))return hn({range:r,output:e,extrapolate:t});if(j.str(r.output[0]))return Uh(r);const i=r,s=i.output,n=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",o=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=$P(u,n);return jP(u,n[c],n[c+1],s[c],s[c+1],l,a,o,i.map)}};function jP(r,e,t,i,s,n,a,o,l){let u=l?l(r):r;if(u<e){if(a==="identity")return u;a==="clamp"&&(u=e)}if(u>t){if(o==="identity")return u;o==="clamp"&&(u=t)}return i===s?i:e===t?r<=e?i:s:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=n(u),i===-1/0?u=-u:s===1/0?u=u+i:u=u*(s-i)+i,u)}function $P(r,e){for(var t=1;t<e.length-1&&!(e[t]>=r);++t);return t-1}var GP=(r,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*r,s=e==="end"?Math.floor(i):Math.ceil(i);return RP(0,1,s/r)},yo=1.70158,va=yo*1.525,Ip=yo+1,Mp=2*Math.PI/3,Op=2*Math.PI/4.5,ba=r=>r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375,HP={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>1-(1-r)*(1-r),easeInOutQuad:r=>r<.5?2*r*r:1-Math.pow(-2*r+2,2)/2,easeInCubic:r=>r*r*r,easeOutCubic:r=>1-Math.pow(1-r,3),easeInOutCubic:r=>r<.5?4*r*r*r:1-Math.pow(-2*r+2,3)/2,easeInQuart:r=>r*r*r*r,easeOutQuart:r=>1-Math.pow(1-r,4),easeInOutQuart:r=>r<.5?8*r*r*r*r:1-Math.pow(-2*r+2,4)/2,easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>1-Math.pow(1-r,5),easeInOutQuint:r=>r<.5?16*r*r*r*r*r:1-Math.pow(-2*r+2,5)/2,easeInSine:r=>1-Math.cos(r*Math.PI/2),easeOutSine:r=>Math.sin(r*Math.PI/2),easeInOutSine:r=>-(Math.cos(Math.PI*r)-1)/2,easeInExpo:r=>r===0?0:Math.pow(2,10*r-10),easeOutExpo:r=>r===1?1:1-Math.pow(2,-10*r),easeInOutExpo:r=>r===0?0:r===1?1:r<.5?Math.pow(2,20*r-10)/2:(2-Math.pow(2,-20*r+10))/2,easeInCirc:r=>1-Math.sqrt(1-Math.pow(r,2)),easeOutCirc:r=>Math.sqrt(1-Math.pow(r-1,2)),easeInOutCirc:r=>r<.5?(1-Math.sqrt(1-Math.pow(2*r,2)))/2:(Math.sqrt(1-Math.pow(-2*r+2,2))+1)/2,easeInBack:r=>Ip*r*r*r-yo*r*r,easeOutBack:r=>1+Ip*Math.pow(r-1,3)+yo*Math.pow(r-1,2),easeInOutBack:r=>r<.5?Math.pow(2*r,2)*((va+1)*2*r-va)/2:(Math.pow(2*r-2,2)*((va+1)*(r*2-2)+va)+2)/2,easeInElastic:r=>r===0?0:r===1?1:-Math.pow(2,10*r-10)*Math.sin((r*10-10.75)*Mp),easeOutElastic:r=>r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r*10-.75)*Mp)+1,easeInOutElastic:r=>r===0?0:r===1?1:r<.5?-(Math.pow(2,20*r-10)*Math.sin((20*r-11.125)*Op))/2:Math.pow(2,-20*r+10)*Math.sin((20*r-11.125)*Op)/2+1,easeInBounce:r=>1-ba(1-r),easeOutBounce:ba,easeInOutBounce:r=>r<.5?(1-ba(1-2*r))/2:(1+ba(2*r-1))/2,steps:GP},dn=Symbol.for("FluidValue.get"),ds=Symbol.for("FluidValue.observers"),ht=r=>!!(r&&r[dn]),Ze=r=>r&&r[dn]?r[dn]():r,Dp=r=>r[ds]||null;function zP(r,e){r.eventObserved?r.eventObserved(e):r(e)}function fn(r,e){const t=r[ds];t&&t.forEach(i=>{zP(i,e)})}var jv=class{constructor(r){if(!r&&!(r=this.get))throw Error("Unknown getter");VP(this,r)}},VP=(r,e)=>$v(r,dn,e);function vs(r,e){if(r[dn]){let t=r[ds];t||$v(r,ds,t=new Set),t.has(e)||(t.add(e),r.observerAdded&&r.observerAdded(t.size,e))}return e}function pn(r,e){const t=r[ds];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):r[ds]=null,r.observerRemoved&&r.observerRemoved(i,e)}}var $v=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,configurable:!0}),Ha=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,WP=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Lp=new RegExp(`(${Ha.source})(%|[a-z]+)`,"i"),qP=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Zo=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Gv=r=>{const[e,t]=XP(r);if(!e||Bh())return r;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(t);return s||r}else{if(t&&Zo.test(t))return Gv(t);if(t)return t}return r},XP=r=>{const e=Zo.exec(r);if(!e)return[,];const[,t,i]=e;return[t,i]},uu,YP=(r,e,t,i,s)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${s})`,Hv=r=>{uu||(uu=Nr?new RegExp(`(${Object.keys(Nr).join("|")})(?!\\w)`,"g"):/^\b$/);const e=r.output.map(n=>Ze(n).replace(Zo,Gv).replace(WP,Rp).replace(uu,Rp)),t=e.map(n=>n.match(Ha).map(Number)),s=t[0].map((n,a)=>t.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(n=>hn({...r,output:n}));return n=>{var l;const a=!Lp.test(e[0])&&((l=e.find(u=>Lp.test(u)))==null?void 0:l.replace(Ha,""));let o=0;return e[0].replace(Ha,()=>`${s[o++](n)}${a||""}`).replace(qP,YP)}},$h="react-spring: ",zv=r=>{const e=r;let t=!1;if(typeof e!="function")throw new TypeError(`${$h}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},QP=zv(console.warn);function KP(){QP(`${$h}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var ZP=zv(console.warn);function JP(){ZP(`${$h}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Jo(r){return j.str(r)&&(r[0]=="#"||/\d/.test(r)||!Bh()&&Zo.test(r)||r in(Nr||{}))}var Xi=Bh()?N.useEffect:N.useLayoutEffect,eR=()=>{const r=N.useRef(!1);return Xi(()=>(r.current=!0,()=>{r.current=!1}),[]),r};function Vv(){const r=N.useState()[1],e=eR();return()=>{e.current&&r(Math.random())}}function tR(r,e){const[t]=N.useState(()=>({inputs:e,result:r()})),i=N.useRef(),s=i.current;let n=s;return n?e&&n.inputs&&rR(e,n.inputs)||(n={inputs:e,result:r()}):n=t,N.useEffect(()=>{i.current=n,s==t&&(t.inputs=t.result=void 0)},[n]),n.result}function rR(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}var Wv=r=>N.useEffect(r,iR),iR=[];function sR(r){const e=N.useRef();return N.useEffect(()=>{e.current=r}),e.current}var mn=Symbol.for("Animated:node"),nR=r=>!!r&&r[mn]===r,Ht=r=>r&&r[mn],Gh=(r,e)=>TP(r,mn,e),el=r=>r&&r[mn]&&r[mn].getPayload(),qv=class{constructor(){Gh(this,this)}getPayload(){return this.payload||[]}},Un=class extends qv{constructor(r){super(),this._value=r,this.done=!0,this.durationProgress=0,j.num(this._value)&&(this.lastPosition=this._value)}static create(r){return new Un(r)}getPayload(){return[this]}getValue(){return this._value}setValue(r,e){return j.num(r)&&(this.lastPosition=r,e&&(r=Math.round(r/e)*e,this.done&&(this.lastPosition=r))),this._value===r?!1:(this._value=r,!0)}reset(){const{done:r}=this;this.done=!1,j.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,r&&(this.lastVelocity=null),this.v0=null)}},gn=class extends Un{constructor(r){super(0),this._string=null,this._toString=hn({output:[r,r]})}static create(r){return new gn(r)}getValue(){const r=this._string;return r??(this._string=this._toString(this._value))}setValue(r){if(j.str(r)){if(r==this._string)return!1;this._string=r,this._value=1}else if(super.setValue(r))this._string=null;else return!1;return!0}reset(r){r&&(this._toString=hn({output:[this.getValue(),r]})),this._value=0,super.reset()}},vo={dependencies:null},tl=class extends qv{constructor(r){super(),this.source=r,this.setValue(r)}getValue(r){const e={};return Kt(this.source,(t,i)=>{nR(t)?e[i]=t.getValue(r):ht(t)?e[i]=Ze(t):r||(e[i]=t)}),e}setValue(r){this.source=r,this.payload=this._makePayload(r)}reset(){this.payload&&oe(this.payload,r=>r.reset())}_makePayload(r){if(r){const e=new Set;return Kt(r,this._addToPayload,e),Array.from(e)}}_addToPayload(r){vo.dependencies&&ht(r)&&vo.dependencies.add(r);const e=el(r);e&&oe(e,t=>this.add(t))}},Xv=class extends tl{constructor(r){super(r)}static create(r){return new Xv(r)}getValue(){return this.source.map(r=>r.getValue())}setValue(r){const e=this.getPayload();return r.length==e.length?e.map((t,i)=>t.setValue(r[i])).some(Boolean):(super.setValue(r.map(aR)),!0)}};function aR(r){return(Jo(r)?gn:Un).create(r)}function $c(r){const e=Ht(r);return e?e.constructor:j.arr(r)?Xv:Jo(r)?gn:Un}var Np=(r,e)=>{const t=!j.fun(r)||r.prototype&&r.prototype.isReactComponent;return N.forwardRef((i,s)=>{const n=N.useRef(null),a=t&&N.useCallback(p=>{n.current=uR(s,p)},[s]),[o,l]=lR(i,e),u=Vv(),c=()=>{const p=n.current;if(t&&!p)return;(p?e.applyAnimatedValues(p,o.getValue(!0)):!1)===!1&&u()},d=new oR(c,l),h=N.useRef();Xi(()=>(h.current=d,oe(l,p=>vs(p,d)),()=>{h.current&&(oe(h.current.deps,p=>pn(p,h.current)),ie.cancel(h.current.update))})),N.useEffect(c,[]),Wv(()=>()=>{const p=h.current;oe(p.deps,m=>pn(m,p))});const f=e.getComponentProps(o.getValue());return N.createElement(r,{...f,ref:a})})},oR=class{constructor(r,e){this.update=r,this.deps=e}eventObserved(r){r.type=="change"&&ie.write(this.update)}};function lR(r,e){const t=new Set;return vo.dependencies=t,r.style&&(r={...r,style:e.createAnimatedStyle(r.style)}),r=new tl(r),vo.dependencies=null,[r,t]}function uR(r,e){return r&&(j.fun(r)?r(e):r.current=e),e}var Fp=Symbol.for("AnimatedComponent"),cR=(r,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=s=>new tl(s),getComponentProps:i=s=>s}={})=>{const s={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},n=a=>{const o=kp(a)||"Anonymous";return j.str(a)?a=n[a]||(n[a]=Np(a,s)):a=a[Fp]||(a[Fp]=Np(a,s)),a.displayName=`Animated(${o})`,a};return Kt(r,(a,o)=>{j.arr(r)&&(o=kp(a)),n[o]=n(a)}),{animated:n}},kp=r=>j.str(r)?r:r&&j.str(r.displayName)?r.displayName:j.fun(r)&&r.name||null;function Je(r,...e){return j.fun(r)?r(...e):r}var Zs=(r,e)=>r===!0||!!(e&&r&&(j.fun(r)?r(e):Qe(r).includes(e))),Yv=(r,e)=>j.obj(r)?e&&r[e]:r,Qv=(r,e)=>r.default===!0?r[e]:r.default?r.default[e]:void 0,hR=r=>r,Hh=(r,e=hR)=>{let t=dR;r.default&&r.default!==!0&&(r=r.default,t=Object.keys(r));const i={};for(const s of t){const n=e(r[s],s);j.und(n)||(i[s]=n)}return i},dR=["config","onProps","onStart","onChange","onPause","onResume","onRest"],fR={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function pR(r){const e={};let t=0;if(Kt(r,(i,s)=>{fR[s]||(e[s]=i,t++)}),t)return e}function zh(r){const e=pR(r);if(e){const t={to:e};return Kt(r,(i,s)=>s in e||(t[s]=i)),t}return{...r}}function yn(r){return r=Ze(r),j.arr(r)?r.map(yn):Jo(r)?It.createStringInterpolator({range:[0,1],output:[r,r]})(1):r}function mR(r){for(const e in r)return!0;return!1}function Gc(r){return j.fun(r)||j.arr(r)&&j.obj(r[0])}function Bp(r,e){var t;(t=r.ref)==null||t.delete(r),e==null||e.delete(r)}function gR(r,e){var t;e&&r.ref!==e&&((t=r.ref)==null||t.delete(r),e.add(r),r.ref=e)}var yR={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Hc={...yR.default,mass:1,damping:1,easing:HP.linear,clamp:!1},vR=class{constructor(){this.velocity=0,Object.assign(this,Hc)}};function bR(r,e,t){t&&(t={...t},Up(t,e),e={...t,...e}),Up(r,e),Object.assign(r,e);for(const a in Hc)r[a]==null&&(r[a]=Hc[a]);let{frequency:i,damping:s}=r;const{mass:n}=r;return j.und(i)||(i<.01&&(i=.01),s<0&&(s=0),r.tension=Math.pow(2*Math.PI/i,2)*n,r.friction=4*Math.PI*s*n/i),r}function Up(r,e){if(!j.und(e.decay))r.duration=void 0;else{const t=!j.und(e.tension)||!j.und(e.friction);(t||!j.und(e.frequency)||!j.und(e.damping)||!j.und(e.mass))&&(r.duration=void 0,r.decay=void 0),t&&(r.frequency=void 0)}}var jp=[],xR=class{constructor(){this.changed=!1,this.values=jp,this.toValues=null,this.fromValues=jp,this.config=new vR,this.immediate=!1}};function Kv(r,{key:e,props:t,defaultProps:i,state:s,actions:n}){return new Promise((a,o)=>{let l,u,c=Zs(t.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{j.und(t.pause)||(s.paused=Zs(t.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=s.paused||Zs(p,e)),l=Je(t.delay||0,e),p?(s.resumeQueue.add(h),n.pause()):(n.resume(),h())}function d(){s.resumeQueue.add(h),s.timeouts.delete(u),u.cancel(),l=u.time-ie.now()}function h(){l>0&&!It.skipAnimation?(s.delayed=!0,u=ie.setTimeout(f,l),s.pauseQueue.add(d),s.timeouts.add(u)):f()}function f(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(d),s.timeouts.delete(u),r<=(s.cancelId||0)&&(c=!0);try{n.start({...t,callId:r,cancel:c},a)}catch(p){o(p)}}})}var Vh=(r,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?ns(r.get()):e.every(t=>t.noop)?Zv(r.get()):wt(r.get(),e.every(t=>t.finished)),Zv=r=>({value:r,noop:!0,finished:!0,cancelled:!1}),wt=(r,e,t=!1)=>({value:r,finished:e,cancelled:t}),ns=r=>({value:r,cancelled:!0,finished:!1});function Jv(r,e,t,i){const{callId:s,parentId:n,onRest:a}=e,{asyncTo:o,promise:l}=t;return!n&&r===o&&!e.reset?l:t.promise=(async()=>{t.asyncId=s,t.asyncTo=r;const u=Hh(e,(g,b)=>b==="onRest"?void 0:g);let c,d;const h=new Promise((g,b)=>(c=g,d=b)),f=g=>{const b=s<=(t.cancelId||0)&&ns(i)||s!==t.asyncId&&wt(i,!1);if(b)throw g.result=b,d(g),g},p=(g,b)=>{const x=new $p,y=new Gp;return(async()=>{if(It.skipAnimation)throw vn(t),y.result=wt(i,!1),d(y),y;f(x);const v=j.obj(g)?{...g}:{...b,to:g};v.parentId=s,Kt(u,(T,w)=>{j.und(v[w])&&(v[w]=T)});const S=await i.start(v);return f(x),t.paused&&await new Promise(T=>{t.resumeQueue.add(T)}),S})()};let m;if(It.skipAnimation)return vn(t),wt(i,!1);try{let g;j.arr(r)?g=(async b=>{for(const x of b)await p(x)})(r):g=Promise.resolve(r(p,i.stop.bind(i))),await Promise.all([g.then(c),h]),m=wt(i.get(),!0,!1)}catch(g){if(g instanceof $p)m=g.result;else if(g instanceof Gp)m=g.result;else throw g}finally{s==t.asyncId&&(t.asyncId=n,t.asyncTo=n?o:void 0,t.promise=n?l:void 0)}return j.fun(a)&&ie.batchedUpdates(()=>{a(m,i,i.item)}),m})()}function vn(r,e){Qs(r.timeouts,t=>t.cancel()),r.pauseQueue.clear(),r.resumeQueue.clear(),r.asyncId=r.asyncTo=r.promise=void 0,e&&(r.cancelId=e)}var $p=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Gp=class extends Error{constructor(){super("SkipAnimationSignal")}},zc=r=>r instanceof Wh,_R=1,Wh=class extends jv{constructor(){super(...arguments),this.id=_R++,this._priority=0}get priority(){return this._priority}set priority(r){this._priority!=r&&(this._priority=r,this._onPriorityChange(r))}get(){const r=Ht(this);return r&&r.getValue()}to(...r){return It.to(this,r)}interpolate(...r){return KP(),It.to(this,r)}toJSON(){return this.get()}observerAdded(r){r==1&&this._attach()}observerRemoved(r){r==0&&this._detach()}_attach(){}_detach(){}_onChange(r,e=!1){fn(this,{type:"change",parent:this,value:r,idle:e})}_onPriorityChange(r){this.idle||Qo.sort(this),fn(this,{type:"priority",parent:this,priority:r})}},vi=Symbol.for("SpringPhase"),e0=1,Vc=2,Wc=4,cu=r=>(r[vi]&e0)>0,_r=r=>(r[vi]&Vc)>0,Es=r=>(r[vi]&Wc)>0,Hp=(r,e)=>e?r[vi]|=Vc|e0:r[vi]&=~Vc,zp=(r,e)=>e?r[vi]|=Wc:r[vi]&=~Wc,wR=class extends Wh{constructor(r,e){if(super(),this.animation=new xR,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!j.und(r)||!j.und(e)){const t=j.obj(r)?{...r}:{...e,from:r};j.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(_r(this)||this._state.asyncTo)||Es(this)}get goal(){return Ze(this.animation.to)}get velocity(){const r=Ht(this);return r instanceof Un?r.lastVelocity||0:r.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return cu(this)}get isAnimating(){return _r(this)}get isPaused(){return Es(this)}get isDelayed(){return this._state.delayed}advance(r){let e=!0,t=!1;const i=this.animation;let{toValues:s}=i;const{config:n}=i,a=el(i.to);!a&&ht(i.to)&&(s=Qe(Ze(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==gn?1:a?a[c].lastPosition:s[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,n.tension<=0){u.done=!0;return}let p=u.elapsedTime+=r;const m=i.fromValues[c],g=u.v0!=null?u.v0:u.v0=j.arr(n.velocity)?n.velocity[c]:n.velocity;let b;const x=n.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(j.und(n.duration))if(n.decay){const y=n.decay===!0?.998:n.decay,v=Math.exp(-(1-y)*p);f=m+g/(1-y)*(1-v),h=Math.abs(u.lastPosition-f)<=x,b=g*v}else{b=u.lastVelocity==null?g:u.lastVelocity;const y=n.restVelocity||x/10,v=n.clamp?0:n.bounce,S=!j.und(v),T=m==d?u.v0>0:m<d;let w,E=!1;const A=1,M=Math.ceil(r/A);for(let I=0;I<M&&(w=Math.abs(b)>y,!(!w&&(h=Math.abs(d-f)<=x,h)));++I){S&&(E=f==d||f>d==T,E&&(b=-b*v,f=d));const O=-n.tension*1e-6*(f-d),R=-n.friction*.001*b,_=(O+R)/n.mass;b=b+_*A,f=f+b*A}}else{let y=1;n.duration>0&&(this._memoizedDuration!==n.duration&&(this._memoizedDuration=n.duration,u.durationProgress>0&&(u.elapsedTime=n.duration*u.durationProgress,p=u.elapsedTime+=r)),y=(n.progress||0)+p/this._memoizedDuration,y=y>1?1:y<0?0:y,u.durationProgress=y),f=m+n.easing(y)*(d-m),b=(f-u.lastPosition)/r,h=y==1}u.lastVelocity=b,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}a&&!a[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,n.round)&&(t=!0)});const o=Ht(this),l=o.getValue();if(e){const u=Ze(i.to);(l!==u||t)&&!n.decay?(o.setValue(u),this._onChange(u)):t&&n.decay&&this._onChange(l),this._stop()}else t&&this._onChange(l)}set(r){return ie.batchedUpdates(()=>{this._stop(),this._focus(r),this._set(r)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(_r(this)){const{to:r,config:e}=this.animation;ie.batchedUpdates(()=>{this._onStart(),e.decay||this._set(r,!1),this._stop()})}return this}update(r){return(this.queue||(this.queue=[])).push(r),this}start(r,e){let t;return j.und(r)?(t=this.queue||[],this.queue=[]):t=[j.obj(r)?r:{...e,to:r}],Promise.all(t.map(i=>this._update(i))).then(i=>Vh(this,i))}stop(r){const{to:e}=this.animation;return this._focus(this.get()),vn(this._state,r&&this._lastCallId),ie.batchedUpdates(()=>this._stop(e,r)),this}reset(){this._update({reset:!0})}eventObserved(r){r.type=="change"?this._start():r.type=="priority"&&(this.priority=r.priority+1)}_prepareNode(r){const e=this.key||"";let{to:t,from:i}=r;t=j.obj(t)?t[e]:t,(t==null||Gc(t))&&(t=void 0),i=j.obj(i)?i[e]:i,i==null&&(i=void 0);const s={to:t,from:i};return cu(this)||(r.reverse&&([t,i]=[i,t]),i=Ze(i),j.und(i)?Ht(this)||this._set(t):this._set(i)),s}_update({...r},e){const{key:t,defaultProps:i}=this;r.default&&Object.assign(i,Hh(r,(a,o)=>/^on/.test(o)?Yv(a,t):a)),Wp(this,r,"onProps"),As(this,"onProps",r,this);const s=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const n=this._state;return Kv(++this._lastCallId,{key:t,props:r,defaultProps:i,state:n,actions:{pause:()=>{Es(this)||(zp(this,!0),$s(n.pauseQueue),As(this,"onPause",wt(this,Ts(this,this.animation.to)),this))},resume:()=>{Es(this)&&(zp(this,!1),_r(this)&&this._resume(),$s(n.resumeQueue),As(this,"onResume",wt(this,Ts(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(a=>{if(r.loop&&a.finished&&!(e&&a.noop)){const o=t0(r);if(o)return this._update(o,!0)}return a})}_merge(r,e,t){if(e.cancel)return this.stop(!0),t(ns(this));const i=!j.und(r.to),s=!j.und(r.from);if(i||s)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(ns(this));const{key:n,defaultProps:a,animation:o}=this,{to:l,from:u}=o;let{to:c=l,from:d=u}=r;s&&!i&&(!e.default||j.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!or(d,u);h&&(o.from=d),d=Ze(d);const f=!or(c,l);f&&this._focus(c);const p=Gc(e.to),{config:m}=o,{decay:g,velocity:b}=m;(i||s)&&(m.velocity=0),e.config&&!p&&bR(m,Je(e.config,n),e.config!==a.config?Je(a.config,n):void 0);let x=Ht(this);if(!x||j.und(c))return t(wt(this,!0));const y=j.und(e.reset)?s&&!e.default:!j.und(d)&&Zs(e.reset,n),v=y?d:this.get(),S=yn(c),T=j.num(S)||j.arr(S)||Jo(S),w=!p&&(!T||Zs(a.immediate||e.immediate,n));if(f){const I=$c(c);if(I!==x.constructor)if(w)x=this._set(S);else throw Error(`Cannot animate between ${x.constructor.name} and ${I.name}, as the "to" prop suggests`)}const E=x.constructor;let A=ht(c),M=!1;if(!A){const I=y||!cu(this)&&h;(f||I)&&(M=or(yn(v),S),A=!M),(!or(o.immediate,w)&&!w||!or(m.decay,g)||!or(m.velocity,b))&&(A=!0)}if(M&&_r(this)&&(o.changed&&!y?A=!0:A||this._stop(l)),!p&&((A||ht(l))&&(o.values=x.getPayload(),o.toValues=ht(c)?null:E==gn?[1]:Qe(S)),o.immediate!=w&&(o.immediate=w,!w&&!y&&this._set(l)),A)){const{onRest:I}=o;oe(SR,R=>Wp(this,e,R));const O=wt(this,Ts(this,l));$s(this._pendingCalls,O),this._pendingCalls.add(t),o.changed&&ie.batchedUpdates(()=>{var R;o.changed=!y,I==null||I(O,this),y?Je(a.onRest,O):(R=o.onStart)==null||R.call(o,O,this)})}y&&this._set(v),p?t(Jv(e.to,e,this._state,this)):A?this._start():_r(this)&&!f?this._pendingCalls.add(t):t(Zv(v))}_focus(r){const e=this.animation;r!==e.to&&(Dp(this)&&this._detach(),e.to=r,Dp(this)&&this._attach())}_attach(){let r=0;const{to:e}=this.animation;ht(e)&&(vs(e,this),zc(e)&&(r=e.priority+1)),this.priority=r}_detach(){const{to:r}=this.animation;ht(r)&&pn(r,this)}_set(r,e=!0){const t=Ze(r);if(!j.und(t)){const i=Ht(this);if(!i||!or(t,i.getValue())){const s=$c(t);!i||i.constructor!=s?Gh(this,s.create(t)):i.setValue(t),i&&ie.batchedUpdates(()=>{this._onChange(t,e)})}}return Ht(this)}_onStart(){const r=this.animation;r.changed||(r.changed=!0,As(this,"onStart",wt(this,Ts(this,r.to)),this))}_onChange(r,e){e||(this._onStart(),Je(this.animation.onChange,r,this)),Je(this.defaultProps.onChange,r,this),super._onChange(r,e)}_start(){const r=this.animation;Ht(this).reset(Ze(r.to)),r.immediate||(r.fromValues=r.values.map(e=>e.lastPosition)),_r(this)||(Hp(this,!0),Es(this)||this._resume())}_resume(){It.skipAnimation?this.finish():Qo.start(this)}_stop(r,e){if(_r(this)){Hp(this,!1);const t=this.animation;oe(t.values,s=>{s.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),fn(this,{type:"idle",parent:this});const i=e?ns(this.get()):wt(this.get(),Ts(this,r??t.to));$s(this._pendingCalls,i),t.changed&&(t.changed=!1,As(this,"onRest",i,this))}}};function Ts(r,e){const t=yn(e),i=yn(r.get());return or(i,t)}function t0(r,e=r.loop,t=r.to){const i=Je(e);if(i){const s=i!==!0&&zh(i),n=(s||r).reverse,a=!s||s.reset;return bo({...r,loop:e,default:!1,pause:void 0,to:!n||Gc(t)?t:void 0,from:a?r.from:void 0,reset:a,...s})}}function bo(r){const{to:e,from:t}=r=zh(r),i=new Set;return j.obj(e)&&Vp(e,i),j.obj(t)&&Vp(t,i),r.keys=i.size?Array.from(i):null,r}function Vp(r,e){Kt(r,(t,i)=>t!=null&&e.add(i))}var SR=["onStart","onRest","onChange","onPause","onResume"];function Wp(r,e,t){r.animation[t]=e[t]!==Qv(e,t)?Yv(e[t],r.key):void 0}function As(r,e,...t){var i,s,n,a;(s=(i=r.animation)[e])==null||s.call(i,...t),(a=(n=r.defaultProps)[e])==null||a.call(n,...t)}var ER=["onStart","onChange","onRest"],TR=1,AR=class{constructor(r,e){this.id=TR++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),r&&this.start({default:!0,...r})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(r=>r.idle&&!r.isDelayed&&!r.isPaused)}get item(){return this._item}set item(r){this._item=r}get(){const r={};return this.each((e,t)=>r[t]=e.get()),r}set(r){for(const e in r){const t=r[e];j.und(t)||this.springs[e].set(t)}}update(r){return r&&this.queue.push(bo(r)),this}start(r){let{queue:e}=this;return r?e=Qe(r).map(bo):this.queue=[],this._flush?this._flush(this,e):(n0(this,e),CR(this,e))}stop(r,e){if(r!==!!r&&(e=r),e){const t=this.springs;oe(Qe(e),i=>t[i].stop(!!r))}else vn(this._state,this._lastAsyncId),this.each(t=>t.stop(!!r));return this}pause(r){if(j.und(r))this.start({pause:!0});else{const e=this.springs;oe(Qe(r),t=>e[t].pause())}return this}resume(r){if(j.und(r))this.start({pause:!1});else{const e=this.springs;oe(Qe(r),t=>e[t].resume())}return this}each(r){Kt(this.springs,r)}_onFrame(){const{onStart:r,onChange:e,onRest:t}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,Qs(r,([o,l])=>{l.value=this.get(),o(l,this,this._item)}));const n=!i&&this._started,a=s||n&&t.size?this.get():null;s&&e.size&&Qs(e,([o,l])=>{l.value=a,o(l,this,this._item)}),n&&(this._started=!1,Qs(t,([o,l])=>{l.value=a,o(l,this,this._item)}))}eventObserved(r){if(r.type=="change")this._changed.add(r.parent),r.idle||this._active.add(r.parent);else if(r.type=="idle")this._active.delete(r.parent);else return;ie.onFrame(this._onFrame)}};function CR(r,e){return Promise.all(e.map(t=>r0(r,t))).then(t=>Vh(r,t))}async function r0(r,e,t){const{keys:i,to:s,from:n,loop:a,onRest:o,onResolve:l}=e,u=j.obj(e.default)&&e.default;a&&(e.loop=!1),s===!1&&(e.to=null),n===!1&&(e.from=null);const c=j.arr(s)||j.fun(s)?s:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):oe(ER,m=>{const g=e[m];if(j.fun(g)){const b=r._events[m];e[m]=({finished:x,cancelled:y})=>{const v=b.get(g);v?(x||(v.finished=!1),y&&(v.cancelled=!0)):b.set(g,{value:null,finished:x||!1,cancelled:y||!1})},u&&(u[m]=e[m])}});const d=r._state;e.pause===!d.paused?(d.paused=e.pause,$s(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(r.springs)).map(m=>r.springs[m].start(e)),f=e.cancel===!0||Qv(e,"cancel")===!0;(c||f&&d.asyncId)&&h.push(Kv(++r._lastAsyncId,{props:e,state:d,actions:{pause:Uc,resume:Uc,start(m,g){f?(vn(d,r._lastAsyncId),g(ns(r))):(m.onRest=o,g(Jv(c,m,d,r)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const p=Vh(r,await Promise.all(h));if(a&&p.finished&&!(t&&p.noop)){const m=t0(e,a,s);if(m)return n0(r,[m]),r0(r,m,!0)}return l&&ie.batchedUpdates(()=>l(p,r,r.item)),p}function PR(r,e){const t={...r.springs};return e&&oe(Qe(e),i=>{j.und(i.keys)&&(i=bo(i)),j.obj(i.to)||(i={...i,to:void 0}),s0(t,i,s=>i0(s))}),RR(r,t),t}function RR(r,e){Kt(e,(t,i)=>{r.springs[i]||(r.springs[i]=t,vs(t,r))})}function i0(r,e){const t=new wR;return t.key=r,e&&vs(t,e),t}function s0(r,e,t){e.keys&&oe(e.keys,i=>{(r[i]||(r[i]=t(i)))._prepareNode(e)})}function n0(r,e){oe(e,t=>{s0(r.springs,t,i=>i0(i,r))})}var rl=({children:r,...e})=>{const t=N.useContext(xo),i=e.pause||!!t.pause,s=e.immediate||!!t.immediate;e=tR(()=>({pause:i,immediate:s}),[i,s]);const{Provider:n}=xo;return N.createElement(n,{value:e},r)},xo=IR(rl,{});rl.Provider=xo.Provider;rl.Consumer=xo.Consumer;function IR(r,e){return Object.assign(r,N.createContext(e)),r.Provider._context=r,r.Consumer._context=r,r}var MR=()=>{const r=[],e=function(i){JP();const s=[];return oe(r,(n,a)=>{if(j.und(i))s.push(n.start());else{const o=t(i,n,a);o&&s.push(n.start(o))}}),s};e.current=r,e.add=function(i){r.includes(i)||r.push(i)},e.delete=function(i){const s=r.indexOf(i);~s&&r.splice(s,1)},e.pause=function(){return oe(r,i=>i.pause(...arguments)),this},e.resume=function(){return oe(r,i=>i.resume(...arguments)),this},e.set=function(i){oe(r,(s,n)=>{const a=j.fun(i)?i(n,s):i;a&&s.set(a)})},e.start=function(i){const s=[];return oe(r,(n,a)=>{if(j.und(i))s.push(n.start());else{const o=this._getProps(i,n,a);o&&s.push(n.start(o))}}),s},e.stop=function(){return oe(r,i=>i.stop(...arguments)),this},e.update=function(i){return oe(r,(s,n)=>s.update(this._getProps(i,s,n))),this};const t=function(i,s,n){return j.fun(i)?i(n,s):i};return e._getProps=t,e};function a0(r,e,t){const i=j.fun(e)&&e,{reset:s,sort:n,trail:a=0,expires:o=!0,exitBeforeEnter:l=!1,onDestroyed:u,ref:c,config:d}=i?i():e,h=N.useMemo(()=>i||arguments.length==3?MR():void 0,[]),f=Qe(r),p=[],m=N.useRef(null),g=s?null:m.current;Xi(()=>{m.current=p}),Wv(()=>(oe(p,_=>{h==null||h.add(_.ctrl),_.ctrl.ref=h}),()=>{oe(m.current,_=>{_.expired&&clearTimeout(_.expirationId),Bp(_.ctrl,h),_.ctrl.stop(!0)})}));const b=DR(f,i?i():e,g),x=s&&m.current||[];Xi(()=>oe(x,({ctrl:_,item:C,key:D})=>{Bp(_,h),Je(u,C,D)}));const y=[];if(g&&oe(g,(_,C)=>{_.expired?(clearTimeout(_.expirationId),x.push(_)):(C=y[C]=b.indexOf(_.key),~C&&(p[C]=_))}),oe(f,(_,C)=>{p[C]||(p[C]={key:b[C],item:_,phase:"mount",ctrl:new AR},p[C].ctrl.item=_)}),y.length){let _=-1;const{leave:C}=i?i():e;oe(y,(D,k)=>{const L=g[k];~D?(_=p.indexOf(L),p[_]={...L,item:f[D]}):C&&p.splice(++_,0,L)})}j.fun(n)&&p.sort((_,C)=>n(_.item,C.item));let v=-a;const S=Vv(),T=Hh(e),w=new Map,E=N.useRef(new Map),A=N.useRef(!1);oe(p,(_,C)=>{const D=_.key,k=_.phase,L=i?i():e;let B,F;const U=Je(L.delay||0,D);if(k=="mount")B=L.enter,F="enter";else{const K=b.indexOf(D)<0;if(k!="leave")if(K)B=L.leave,F="leave";else if(B=L.update)F="update";else return;else if(!K)B=L.enter,F="enter";else return}if(B=Je(B,_.item,C),B=j.obj(B)?zh(B):{to:B},!B.config){const K=d||T.config;B.config=Je(K,_.item,C,F)}v+=a;const $={...T,delay:U+v,ref:c,immediate:L.immediate,reset:!1,...B};if(F=="enter"&&j.und($.from)){const K=i?i():e,ue=j.und(K.initial)||g?K.from:K.initial;$.from=Je(ue,_.item,C)}const{onResolve:z}=$;$.onResolve=K=>{Je(z,K);const ue=m.current,se=ue.find(ge=>ge.key===D);if(se&&!(K.cancelled&&se.phase!="update")&&se.ctrl.idle){const ge=ue.every(de=>de.ctrl.idle);if(se.phase=="leave"){const de=Je(o,se.item);if(de!==!1){const re=de===!0?0:de;if(se.expired=!0,!ge&&re>0){re<=2147483647&&(se.expirationId=setTimeout(S,re));return}}}ge&&ue.some(de=>de.expired)&&(E.current.delete(se),l&&(A.current=!0),S())}};const q=PR(_.ctrl,$);F==="leave"&&l?E.current.set(_,{phase:F,springs:q,payload:$}):w.set(_,{phase:F,springs:q,payload:$})});const M=N.useContext(rl),I=sR(M),O=M!==I&&mR(M);Xi(()=>{O&&oe(p,_=>{_.ctrl.start({default:M})})},[M]),oe(w,(_,C)=>{if(E.current.size){const D=p.findIndex(k=>k.key===C.key);p.splice(D,1)}}),Xi(()=>{oe(E.current.size?E.current:w,({phase:_,payload:C},D)=>{const{ctrl:k}=D;D.phase=_,h==null||h.add(k),O&&_=="enter"&&k.start({default:M}),C&&(gR(k,C.ref),(k.ref||h)&&!A.current?k.update(C):(k.start(C),A.current&&(A.current=!1)))})},s?void 0:t);const R=_=>N.createElement(N.Fragment,null,p.map((C,D)=>{const{springs:k}=w.get(C)||C.ctrl,L=_({...k},C.item,C,D);return L&&L.type?N.createElement(L.type,{...L.props,key:j.str(C.key)||j.num(C.key)?C.key:C.ctrl.id,ref:L.ref}):L}));return h?[R,h]:R}var OR=1;function DR(r,{key:e,keys:t=e},i){if(t===null){const s=new Set;return r.map(n=>{const a=i&&i.find(o=>o.item===n&&o.phase!=="leave"&&!s.has(o));return a?(s.add(a),a.key):OR++})}return j.und(t)?r:j.fun(t)?r.map(t):Qe(t)}var LR=class extends Wh{constructor(r,e){super(),this.source=r,this.idle=!0,this._active=new Set,this.calc=hn(...e);const t=this._get(),i=$c(t);Gh(this,i.create(t))}advance(r){const e=this._get(),t=this.get();or(e,t)||(Ht(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&qp(this._active)&&hu(this)}_get(){const r=j.arr(this.source)?this.source.map(Ze):Qe(Ze(this.source));return this.calc(...r)}_start(){this.idle&&!qp(this._active)&&(this.idle=!1,oe(el(this),r=>{r.done=!1}),It.skipAnimation?(ie.batchedUpdates(()=>this.advance()),hu(this)):Qo.start(this))}_attach(){let r=1;oe(Qe(this.source),e=>{ht(e)&&vs(e,this),zc(e)&&(e.idle||this._active.add(e),r=Math.max(r,e.priority+1))}),this.priority=r,this._start()}_detach(){oe(Qe(this.source),r=>{ht(r)&&pn(r,this)}),this._active.clear(),hu(this)}eventObserved(r){r.type=="change"?r.idle?this.advance():(this._active.add(r.parent),this._start()):r.type=="idle"?this._active.delete(r.parent):r.type=="priority"&&(this.priority=Qe(this.source).reduce((e,t)=>Math.max(e,(zc(t)?t.priority:0)+1),0))}};function NR(r){return r.idle!==!1}function qp(r){return!r.size||Array.from(r).every(NR)}function hu(r){r.idle||(r.idle=!0,oe(el(r),e=>{e.done=!0}),fn(r,{type:"idle",parent:r}))}It.assign({createStringInterpolator:Hv,to:(r,e)=>new LR(r,e)});var o0=/^--/;function FR(r,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!o0.test(r)&&!(Js.hasOwnProperty(r)&&Js[r])?e+"px":(""+e).trim()}var Xp={};function kR(r,e){if(!r.nodeType||!r.setAttribute)return!1;const t=r.nodeName==="filter"||r.parentNode&&r.parentNode.nodeName==="filter",{style:i,children:s,scrollTop:n,scrollLeft:a,viewBox:o,...l}=e,u=Object.values(l),c=Object.keys(l).map(d=>t||r.hasAttribute(d)?d:Xp[d]||(Xp[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));s!==void 0&&(r.textContent=s);for(const d in i)if(i.hasOwnProperty(d)){const h=FR(d,i[d]);o0.test(d)?r.style.setProperty(d,h):r.style[d]=h}c.forEach((d,h)=>{r.setAttribute(d,u[h])}),n!==void 0&&(r.scrollTop=n),a!==void 0&&(r.scrollLeft=a),o!==void 0&&r.setAttribute("viewBox",o)}var Js={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BR=(r,e)=>r+e.charAt(0).toUpperCase()+e.substring(1),UR=["Webkit","Ms","Moz","O"];Js=Object.keys(Js).reduce((r,e)=>(UR.forEach(t=>r[BR(t,e)]=r[e]),r),Js);var jR=/^(matrix|translate|scale|rotate|skew)/,$R=/^(translate)/,GR=/^(rotate|skew)/,du=(r,e)=>j.num(r)&&r!==0?r+e:r,za=(r,e)=>j.arr(r)?r.every(t=>za(t,e)):j.num(r)?r===e:parseFloat(r)===e,HR=class extends tl{constructor({x:r,y:e,z:t,...i}){const s=[],n=[];(r||e||t)&&(s.push([r||0,e||0,t||0]),n.push(a=>[`translate3d(${a.map(o=>du(o,"px")).join(",")})`,za(a,0)])),Kt(i,(a,o)=>{if(o==="transform")s.push([a||""]),n.push(l=>[l,l===""]);else if(jR.test(o)){if(delete i[o],j.und(a))return;const l=$R.test(o)?"px":GR.test(o)?"deg":"";s.push(Qe(a)),n.push(o==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${du(h,l)})`,za(h,0)]:u=>[`${o}(${u.map(c=>du(c,l)).join(",")})`,za(u,o.startsWith("scale")?1:0)])}}),s.length&&(i.transform=new zR(s,n)),super(i)}},zR=class extends jv{constructor(r,e){super(),this.inputs=r,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let r="",e=!0;return oe(this.inputs,(t,i)=>{const s=Ze(t[0]),[n,a]=this.transforms[i](j.arr(s)?s:t.map(Ze));r+=" "+n,e=e&&a}),e?"none":r}observerAdded(r){r==1&&oe(this.inputs,e=>oe(e,t=>ht(t)&&vs(t,this)))}observerRemoved(r){r==0&&oe(this.inputs,e=>oe(e,t=>ht(t)&&pn(t,this)))}eventObserved(r){r.type=="change"&&(this._value=null),fn(this,r)}},VR=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];It.assign({batchedUpdates:fh.unstable_batchedUpdates,createStringInterpolator:Hv,colors:IP});var WR=cR(VR,{applyAnimatedValues:kR,createAnimatedStyle:r=>new HR(r),getComponentProps:({scrollTop:r,scrollLeft:e,...t})=>t}),qc=WR.animated;function Yp(r){return r!==null&&typeof r=="object"&&"constructor"in r&&r.constructor===Object}function qh(r,e){r===void 0&&(r={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof r[t]>"u"?r[t]=e[t]:Yp(e[t])&&Yp(r[t])&&Object.keys(e[t]).length>0&&qh(r[t],e[t])})}const l0={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ti(){const r=typeof document<"u"?document:{};return qh(r,l0),r}const qR={document:l0,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(r){return typeof setTimeout>"u"?(r(),null):setTimeout(r,0)},cancelAnimationFrame(r){typeof setTimeout>"u"||clearTimeout(r)}};function lt(){const r=typeof window<"u"?window:{};return qh(r,qR),r}function XR(r){const e=r;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Xc(r,e){return e===void 0&&(e=0),setTimeout(r,e)}function _o(){return Date.now()}function YR(r){const e=lt();let t;return e.getComputedStyle&&(t=e.getComputedStyle(r,null)),!t&&r.currentStyle&&(t=r.currentStyle),t||(t=r.style),t}function QR(r,e){e===void 0&&(e="x");const t=lt();let i,s,n;const a=YR(r);return t.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(o=>o.replace(",",".")).join(", ")),n=new t.WebKitCSSMatrix(s==="none"?"":s)):(n=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=n.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=n.m41:i.length===16?s=parseFloat(i[12]):s=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?s=n.m42:i.length===16?s=parseFloat(i[13]):s=parseFloat(i[5])),s||0}function xa(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"}function KR(r){return typeof window<"u"&&typeof window.HTMLElement<"u"?r instanceof HTMLElement:r&&(r.nodeType===1||r.nodeType===11)}function st(){const r=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!KR(i)){const s=Object.keys(Object(i)).filter(n=>e.indexOf(n)<0);for(let n=0,a=s.length;n<a;n+=1){const o=s[n],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(xa(r[o])&&xa(i[o])?i[o].__swiper__?r[o]=i[o]:st(r[o],i[o]):!xa(r[o])&&xa(i[o])?(r[o]={},i[o].__swiper__?r[o]=i[o]:st(r[o],i[o])):r[o]=i[o])}}}return r}function _a(r,e,t){r.style.setProperty(e,t)}function u0(r){let{swiper:e,targetPosition:t,side:i}=r;const s=lt(),n=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const u=t>n?"next":"prev",c=(h,f)=>u==="next"&&h>=f||u==="prev"&&h<=f,d=()=>{o=new Date().getTime(),a===null&&(a=o);const h=Math.max(Math.min((o-a)/l,1),0),f=.5-Math.cos(h*Math.PI)/2;let p=n+f*(t-n);if(c(p,t)&&(p=t),e.wrapperEl.scrollTo({[i]:p}),c(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:p})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(d)};d()}function dr(r,e){return e===void 0&&(e=""),[...r.children].filter(t=>t.matches(e))}function ZR(r,e){e===void 0&&(e=[]);const t=document.createElement(r);return t.classList.add(...Array.isArray(e)?e:[e]),t}function JR(r,e){const t=[];for(;r.previousElementSibling;){const i=r.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),r=i}return t}function eI(r,e){const t=[];for(;r.nextElementSibling;){const i=r.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),r=i}return t}function Dr(r,e){return lt().getComputedStyle(r,null).getPropertyValue(e)}function Qp(r){let e=r,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function tI(r,e){const t=[];let i=r.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function Kp(r,e,t){const i=lt();return t?r[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):r.offsetWidth}let fu;function rI(){const r=lt(),e=Ti();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in r||r.DocumentTouch&&e instanceof r.DocumentTouch)}}function c0(){return fu||(fu=rI()),fu}let pu;function iI(r){let{userAgent:e}=r===void 0?{}:r;const t=c0(),i=lt(),s=i.navigator.platform,n=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,u=n.match(/(Android);?[\s\/]+([\d.]+)?/);let c=n.match(/(iPad).*OS\s([\d_]+)/);const d=n.match(/(iPod)(.*OS\s([\d_]+))?/),h=!c&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=s==="Win32";let p=s==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(c=n.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),u&&!f&&(a.os="android",a.android=!0),(c||h||d)&&(a.os="ios",a.ios=!0),a}function sI(r){return r===void 0&&(r={}),pu||(pu=iI(r)),pu}let mu;function nI(){const r=lt();let e=!1;function t(){const i=r.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(t()){const i=String(r.navigator.userAgent);if(i.includes("Version/")){const[s,n]=i.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=s<16||s===16&&n<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(r.navigator.userAgent)}}function aI(){return mu||(mu=nI()),mu}function oI(r){let{swiper:e,on:t,emit:i}=r;const s=lt();let n=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(n=new ResizeObserver(d=>{a=s.requestAnimationFrame(()=>{const{width:h,height:f}=e;let p=h,m=f;d.forEach(g=>{let{contentBoxSize:b,contentRect:x,target:y}=g;y&&y!==e.el||(p=x?x.width:(b[0]||b).inlineSize,m=x?x.height:(b[0]||b).blockSize)}),(p!==h||m!==f)&&o()})}),n.observe(e.el))},u=()=>{a&&s.cancelAnimationFrame(a),n&&n.unobserve&&e.el&&(n.unobserve(e.el),n=null)},c=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",o),s.addEventListener("orientationchange",c)}),t("destroy",()=>{u(),s.removeEventListener("resize",o),s.removeEventListener("orientationchange",c)})}function lI(r){let{swiper:e,extendParams:t,on:i,emit:s}=r;const n=[],a=lt(),o=function(c,d){d===void 0&&(d={});const h=a.MutationObserver||a.WebkitMutationObserver,f=new h(p=>{if(e.__preventObserver__)return;if(p.length===1){s("observerUpdate",p[0]);return}const m=function(){s("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});f.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),n.push(f)},l=()=>{if(e.params.observer){if(e.params.observeParents){const c=tI(e.hostEl);for(let d=0;d<c.length;d+=1)o(c[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},u=()=>{n.forEach(c=>{c.disconnect()}),n.splice(0,n.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",u)}var uI={on(r,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const s=t?"unshift":"push";return r.split(" ").forEach(n=>{i.eventsListeners[n]||(i.eventsListeners[n]=[]),i.eventsListeners[n][s](e)}),i},once(r,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function s(){i.off(r,s),s.__emitterProxy&&delete s.__emitterProxy;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];e.apply(i,a)}return s.__emitterProxy=e,i.on(r,s,t)},onAny(r,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof r!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(r)<0&&t.eventsAnyListeners[i](r),t},offAny(r){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(r);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(r,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||r.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((s,n)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[i].splice(n,1)})}),t},emit(){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsListeners)return r;let e,t,i;for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return typeof n[0]=="string"||Array.isArray(n[0])?(e=n[0],t=n.slice(1,n.length),i=r):(e=n[0].events,t=n[0].data,i=n[0].context||r),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(u=>{u.apply(i,[l,...t])}),r.eventsListeners&&r.eventsListeners[l]&&r.eventsListeners[l].forEach(u=>{u.apply(i,t)})}),r}};function cI(){const r=this;let e,t;const i=r.el;typeof r.params.width<"u"&&r.params.width!==null?e=r.params.width:e=i.clientWidth,typeof r.params.height<"u"&&r.params.height!==null?t=r.params.height:t=i.clientHeight,!(e===0&&r.isHorizontal()||t===0&&r.isVertical())&&(e=e-parseInt(Dr(i,"padding-left")||0,10)-parseInt(Dr(i,"padding-right")||0,10),t=t-parseInt(Dr(i,"padding-top")||0,10)-parseInt(Dr(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(r,{width:e,height:t,size:r.isHorizontal()?e:t}))}function hI(){const r=this;function e(I){return r.isHorizontal()?I:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[I]}function t(I,O){return parseFloat(I.getPropertyValue(e(O))||0)}const i=r.params,{wrapperEl:s,slidesEl:n,size:a,rtlTranslate:o,wrongRTL:l}=r,u=r.virtual&&i.virtual.enabled,c=u?r.virtual.slides.length:r.slides.length,d=dr(n,`.${r.params.slideClass}, swiper-slide`),h=u?r.virtual.slides.length:d.length;let f=[];const p=[],m=[];let g=i.slidesOffsetBefore;typeof g=="function"&&(g=i.slidesOffsetBefore.call(r));let b=i.slidesOffsetAfter;typeof b=="function"&&(b=i.slidesOffsetAfter.call(r));const x=r.snapGrid.length,y=r.slidesGrid.length;let v=i.spaceBetween,S=-g,T=0,w=0;if(typeof a>"u")return;typeof v=="string"&&v.indexOf("%")>=0?v=parseFloat(v.replace("%",""))/100*a:typeof v=="string"&&(v=parseFloat(v)),r.virtualSize=-v,d.forEach(I=>{o?I.style.marginLeft="":I.style.marginRight="",I.style.marginBottom="",I.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(_a(s,"--swiper-centered-offset-before",""),_a(s,"--swiper-centered-offset-after",""));const E=i.grid&&i.grid.rows>1&&r.grid;E&&r.grid.initSlides(h);let A;const M=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(I=>typeof i.breakpoints[I].slidesPerView<"u").length>0;for(let I=0;I<h;I+=1){A=0;let O;if(d[I]&&(O=d[I]),E&&r.grid.updateSlide(I,O,h,e),!(d[I]&&Dr(O,"display")==="none")){if(i.slidesPerView==="auto"){M&&(d[I].style[e("width")]="");const R=getComputedStyle(O),_=O.style.transform,C=O.style.webkitTransform;if(_&&(O.style.transform="none"),C&&(O.style.webkitTransform="none"),i.roundLengths)A=r.isHorizontal()?Kp(O,"width",!0):Kp(O,"height",!0);else{const D=t(R,"width"),k=t(R,"padding-left"),L=t(R,"padding-right"),B=t(R,"margin-left"),F=t(R,"margin-right"),U=R.getPropertyValue("box-sizing");if(U&&U==="border-box")A=D+B+F;else{const{clientWidth:$,offsetWidth:z}=O;A=D+k+L+B+F+(z-$)}}_&&(O.style.transform=_),C&&(O.style.webkitTransform=C),i.roundLengths&&(A=Math.floor(A))}else A=(a-(i.slidesPerView-1)*v)/i.slidesPerView,i.roundLengths&&(A=Math.floor(A)),d[I]&&(d[I].style[e("width")]=`${A}px`);d[I]&&(d[I].swiperSlideSize=A),m.push(A),i.centeredSlides?(S=S+A/2+T/2+v,T===0&&I!==0&&(S=S-a/2-v),I===0&&(S=S-a/2-v),Math.abs(S)<1/1e3&&(S=0),i.roundLengths&&(S=Math.floor(S)),w%i.slidesPerGroup===0&&f.push(S),p.push(S)):(i.roundLengths&&(S=Math.floor(S)),(w-Math.min(r.params.slidesPerGroupSkip,w))%r.params.slidesPerGroup===0&&f.push(S),p.push(S),S=S+A+v),r.virtualSize+=A+v,T=A,w+=1}}if(r.virtualSize=Math.max(r.virtualSize,a)+b,o&&l&&(i.effect==="slide"||i.effect==="coverflow")&&(s.style.width=`${r.virtualSize+v}px`),i.setWrapperSize&&(s.style[e("width")]=`${r.virtualSize+v}px`),E&&r.grid.updateWrapperSize(A,f,e),!i.centeredSlides){const I=[];for(let O=0;O<f.length;O+=1){let R=f[O];i.roundLengths&&(R=Math.floor(R)),f[O]<=r.virtualSize-a&&I.push(R)}f=I,Math.floor(r.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(r.virtualSize-a)}if(u&&i.loop){const I=m[0]+v;if(i.slidesPerGroup>1){const O=Math.ceil((r.virtual.slidesBefore+r.virtual.slidesAfter)/i.slidesPerGroup),R=I*i.slidesPerGroup;for(let _=0;_<O;_+=1)f.push(f[f.length-1]+R)}for(let O=0;O<r.virtual.slidesBefore+r.virtual.slidesAfter;O+=1)i.slidesPerGroup===1&&f.push(f[f.length-1]+I),p.push(p[p.length-1]+I),r.virtualSize+=I}if(f.length===0&&(f=[0]),v!==0){const I=r.isHorizontal()&&o?"marginLeft":e("marginRight");d.filter((O,R)=>!i.cssMode||i.loop?!0:R!==d.length-1).forEach(O=>{O.style[I]=`${v}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let I=0;m.forEach(R=>{I+=R+(v||0)}),I-=v;const O=I-a;f=f.map(R=>R<=0?-g:R>O?O+b:R)}if(i.centerInsufficientSlides){let I=0;if(m.forEach(O=>{I+=O+(v||0)}),I-=v,I<a){const O=(a-I)/2;f.forEach((R,_)=>{f[_]=R-O}),p.forEach((R,_)=>{p[_]=R+O})}}if(Object.assign(r,{slides:d,snapGrid:f,slidesGrid:p,slidesSizesGrid:m}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){_a(s,"--swiper-centered-offset-before",`${-f[0]}px`),_a(s,"--swiper-centered-offset-after",`${r.size/2-m[m.length-1]/2}px`);const I=-r.snapGrid[0],O=-r.slidesGrid[0];r.snapGrid=r.snapGrid.map(R=>R+I),r.slidesGrid=r.slidesGrid.map(R=>R+O)}if(h!==c&&r.emit("slidesLengthChange"),f.length!==x&&(r.params.watchOverflow&&r.checkOverflow(),r.emit("snapGridLengthChange")),p.length!==y&&r.emit("slidesGridLengthChange"),i.watchSlidesProgress&&r.updateSlidesOffset(),!u&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const I=`${i.containerModifierClass}backface-hidden`,O=r.el.classList.contains(I);h<=i.maxBackfaceHiddenSlides?O||r.el.classList.add(I):O&&r.el.classList.remove(I)}}function dI(r){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let s=0,n;typeof r=="number"?e.setTransition(r):r===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(n=0;n<Math.ceil(e.params.slidesPerView);n+=1){const o=e.activeIndex+n;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(n=0;n<t.length;n+=1)if(typeof t[n]<"u"){const o=t[n].offsetHeight;s=o>s?o:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function fI(){const r=this,e=r.slides,t=r.isElement?r.isHorizontal()?r.wrapperEl.offsetLeft:r.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(r.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-r.cssOverflowAdjustment()}function pI(r){r===void 0&&(r=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:s,snapGrid:n}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-r;s&&(a=r),i.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const u=i[l];let c=u.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(c-=i[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),h=(a-n[0]+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),f=-(a-c),p=f+e.slidesSizesGrid[l];(f>=0&&f<e.size-1||p>1&&p<=e.size||f<=0&&p>=e.size)&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),u.progress=s?-d:d,u.originalProgress=s?-h:h}}function mI(r){const e=this;if(typeof r>"u"){const c=e.rtlTranslate?-1:1;r=e&&e.translate&&e.translate*c||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:n,isEnd:a,progressLoop:o}=e;const l=n,u=a;if(i===0)s=0,n=!0,a=!0;else{s=(r-e.minTranslate())/i;const c=Math.abs(r-e.minTranslate())<1,d=Math.abs(r-e.maxTranslate())<1;n=c||s<=0,a=d||s>=1,c&&(s=0),d&&(s=1)}if(t.loop){const c=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[c],f=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(r);m>=h?o=(m-h)/p:o=(m+p-f)/p,o>1&&(o-=1)}Object.assign(e,{progress:s,progressLoop:o,isBeginning:n,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(r),n&&!l&&e.emit("reachBeginning toEdge"),a&&!u&&e.emit("reachEnd toEdge"),(l&&!n||u&&!a)&&e.emit("fromEdge"),e.emit("progress",s)}function gI(){const r=this,{slides:e,params:t,slidesEl:i,activeIndex:s}=r,n=r.virtual&&t.virtual.enabled,a=l=>dr(i,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(n)if(t.loop){let l=s-r.virtual.slidesBefore;l<0&&(l=r.virtual.slides.length+l),l>=r.virtual.slides.length&&(l-=r.virtual.slides.length),o=a(`[data-swiper-slide-index="${l}"]`)}else o=a(`[data-swiper-slide-index="${s}"]`);else o=e[s];if(o){o.classList.add(t.slideActiveClass);let l=eI(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let u=JR(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!u===0&&(u=e[e.length-1]),u&&u.classList.add(t.slidePrevClass)}r.emitSlidesClasses()}const Va=(r,e)=>{if(!r||r.destroyed||!r.params)return;const t=()=>r.isElement?"swiper-slide":`.${r.params.slideClass}`,i=e.closest(t());if(i){const s=i.querySelector(`.${r.params.lazyPreloaderClass}`);s&&s.remove()}},gu=(r,e)=>{if(!r.slides[e])return;const t=r.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Yc=r=>{if(!r||r.destroyed||!r.params)return;let e=r.params.lazyPreloadPrevNext;const t=r.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(r.params.slidesPerView),s=r.activeIndex;if(r.params.grid&&r.params.grid.rows>1){const a=s,o=[a-e];o.push(...Array.from({length:e}).map((l,u)=>a+i+u)),r.slides.forEach((l,u)=>{o.includes(l.column)&&gu(r,u)});return}const n=s+i-1;if(r.params.rewind||r.params.loop)for(let a=s-e;a<=n+e;a+=1){const o=(a%t+t)%t;(o<s||o>n)&&gu(r,o)}else for(let a=Math.max(s-e,0);a<=Math.min(n+e,t-1);a+=1)a!==s&&(a>n||a<s)&&gu(r,a)};function yI(r){const{slidesGrid:e,params:t}=r,i=r.rtlTranslate?r.translate:-r.translate;let s;for(let n=0;n<e.length;n+=1)typeof e[n+1]<"u"?i>=e[n]&&i<e[n+1]-(e[n+1]-e[n])/2?s=n:i>=e[n]&&i<e[n+1]&&(s=n+1):i>=e[n]&&(s=n);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function vI(r){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:s,activeIndex:n,realIndex:a,snapIndex:o}=e;let l=r,u;const c=h=>{let f=h-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=yI(e)),i.indexOf(t)>=0)u=i.indexOf(t);else{const h=Math.min(s.slidesPerGroupSkip,l);u=h+Math.floor((l-h)/s.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),l===n){u!==o&&(e.snapIndex=u,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=c(l));return}let d;e.virtual&&s.virtual.enabled&&s.loop?d=c(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:o,snapIndex:u,previousRealIndex:a,realIndex:d,previousIndex:n,activeIndex:l}),e.initialized&&Yc(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),a!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function bI(r){const e=this,t=e.params,i=r.closest(`.${t.slideClass}, swiper-slide`);let s=!1,n;if(i){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===i){s=!0,n=a;break}}if(i&&s)e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=n;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}t.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var xI={updateSize:cI,updateSlides:hI,updateAutoHeight:dI,updateSlidesOffset:fI,updateSlidesProgress:pI,updateProgress:mI,updateSlidesClasses:gI,updateActiveIndex:vI,updateClickedSlide:bI};function _I(r){r===void 0&&(r=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:s,wrapperEl:n}=e;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;let a=QR(n,r);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function wI(r,e){const t=this,{rtlTranslate:i,params:s,wrapperEl:n,progress:a}=t;let o=0,l=0;const u=0;t.isHorizontal()?o=i?-r:r:l=r,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,s.cssMode?n[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:s.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),n.style.transform=`translate3d(${o}px, ${l}px, ${u}px)`);let c;const d=t.maxTranslate()-t.minTranslate();d===0?c=0:c=(r-t.minTranslate())/d,c!==a&&t.updateProgress(r),t.emit("setTranslate",t.translate,e)}function SI(){return-this.snapGrid[0]}function EI(){return-this.snapGrid[this.snapGrid.length-1]}function TI(r,e,t,i,s){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const n=this,{params:a,wrapperEl:o}=n;if(n.animating&&a.preventInteractionOnTransition)return!1;const l=n.minTranslate(),u=n.maxTranslate();let c;if(i&&r>l?c=l:i&&r<u?c=u:c=r,n.updateProgress(c),a.cssMode){const d=n.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-c;else{if(!n.support.smoothScroll)return u0({swiper:n,targetPosition:-c,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(n.setTransition(0),n.setTranslate(c),t&&(n.emit("beforeTransitionStart",e,s),n.emit("transitionEnd"))):(n.setTransition(e),n.setTranslate(c),t&&(n.emit("beforeTransitionStart",e,s),n.emit("transitionStart")),n.animating||(n.animating=!0,n.onTranslateToWrapperTransitionEnd||(n.onTranslateToWrapperTransitionEnd=function(h){!n||n.destroyed||h.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onTranslateToWrapperTransitionEnd),n.onTranslateToWrapperTransitionEnd=null,delete n.onTranslateToWrapperTransitionEnd,t&&n.emit("transitionEnd"))}),n.wrapperEl.addEventListener("transitionend",n.onTranslateToWrapperTransitionEnd))),!0}var AI={getTranslate:_I,setTranslate:wI,minTranslate:SI,maxTranslate:EI,translateTo:TI};function CI(r,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${r}ms`),t.emit("setTransition",r,e)}function h0(r){let{swiper:e,runCallbacks:t,direction:i,step:s}=r;const{activeIndex:n,previousIndex:a}=e;let o=i;if(o||(n>a?o="next":n<a?o="prev":o="reset"),e.emit(`transition${s}`),t&&n!==a){if(o==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),o==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function PI(r,e){r===void 0&&(r=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),h0({swiper:t,runCallbacks:r,direction:e,step:"Start"}))}function RI(r,e){r===void 0&&(r=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),h0({swiper:t,runCallbacks:r,direction:e,step:"End"}))}var II={setTransition:CI,transitionStart:PI,transitionEnd:RI};function MI(r,e,t,i,s){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const n=this;let a=r;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=n;if(n.animating&&o.preventInteractionOnTransition||!p&&!i&&!s)return!1;const m=Math.min(n.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/n.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const b=-l[g];if(o.normalizeSlideIndex)for(let y=0;y<u.length;y+=1){const v=-Math.floor(b*100),S=Math.floor(u[y]*100),T=Math.floor(u[y+1]*100);typeof u[y+1]<"u"?v>=S&&v<T-(T-S)/2?a=y:v>=S&&v<T&&(a=y+1):v>=S&&(a=y)}if(n.initialized&&a!==d&&(!n.allowSlideNext&&(h?b>n.translate&&b>n.minTranslate():b<n.translate&&b<n.minTranslate())||!n.allowSlidePrev&&b>n.translate&&b>n.maxTranslate()&&(d||0)!==a))return!1;a!==(c||0)&&t&&n.emit("beforeSlideChangeStart"),n.updateProgress(b);let x;if(a>d?x="next":a<d?x="prev":x="reset",h&&-b===n.translate||!h&&b===n.translate)return n.updateActiveIndex(a),o.autoHeight&&n.updateAutoHeight(),n.updateSlidesClasses(),o.effect!=="slide"&&n.setTranslate(b),x!=="reset"&&(n.transitionStart(t,x),n.transitionEnd(t,x)),!1;if(o.cssMode){const y=n.isHorizontal(),v=h?b:-b;if(e===0){const S=n.virtual&&n.params.virtual.enabled;S&&(n.wrapperEl.style.scrollSnapType="none",n._immediateVirtual=!0),S&&!n._cssModeVirtualInitialSet&&n.params.initialSlide>0?(n._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[y?"scrollLeft":"scrollTop"]=v})):f[y?"scrollLeft":"scrollTop"]=v,S&&requestAnimationFrame(()=>{n.wrapperEl.style.scrollSnapType="",n._immediateVirtual=!1})}else{if(!n.support.smoothScroll)return u0({swiper:n,targetPosition:v,side:y?"left":"top"}),!0;f.scrollTo({[y?"left":"top"]:v,behavior:"smooth"})}return!0}return n.setTransition(e),n.setTranslate(b),n.updateActiveIndex(a),n.updateSlidesClasses(),n.emit("beforeTransitionStart",e,i),n.transitionStart(t,x),e===0?n.transitionEnd(t,x):n.animating||(n.animating=!0,n.onSlideToWrapperTransitionEnd||(n.onSlideToWrapperTransitionEnd=function(v){!n||n.destroyed||v.target===this&&(n.wrapperEl.removeEventListener("transitionend",n.onSlideToWrapperTransitionEnd),n.onSlideToWrapperTransitionEnd=null,delete n.onSlideToWrapperTransitionEnd,n.transitionEnd(t,x))}),n.wrapperEl.addEventListener("transitionend",n.onSlideToWrapperTransitionEnd)),!0}function OI(r,e,t,i){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const s=this;let n=r;return s.params.loop&&(s.virtual&&s.params.virtual.enabled?n=n+s.virtual.slidesBefore:n=s.getSlideIndexByData(n)),s.slideTo(n,e,t,i)}function DI(r,e,t){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0);const i=this,{enabled:s,params:n,animating:a}=i;if(!s)return i;let o=n.slidesPerGroup;n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<n.slidesPerGroupSkip?1:o,u=i.virtual&&n.virtual.enabled;if(n.loop){if(a&&!u&&n.loopPreventsSliding)return!1;i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft}return n.rewind&&i.isEnd?i.slideTo(0,r,e,t):i.slideTo(i.activeIndex+l,r,e,t)}function LI(r,e,t){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0);const i=this,{params:s,snapGrid:n,slidesGrid:a,rtlTranslate:o,enabled:l,animating:u}=i;if(!l)return i;const c=i.virtual&&s.virtual.enabled;if(s.loop){if(u&&!c&&s.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const d=o?i.translate:-i.translate;function h(b){return b<0?-Math.floor(Math.abs(b)):Math.floor(b)}const f=h(d),p=n.map(b=>h(b));let m=n[p.indexOf(f)-1];if(typeof m>"u"&&s.cssMode){let b;n.forEach((x,y)=>{f>=x&&(b=y)}),typeof b<"u"&&(m=n[b>0?b-1:b])}let g=0;if(typeof m<"u"&&(g=a.indexOf(m),g<0&&(g=i.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),s.rewind&&i.isBeginning){const b=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(b,r,e,t)}return i.slideTo(g,r,e,t)}function NI(r,e,t){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0);const i=this;return i.slideTo(i.activeIndex,r,e,t)}function FI(r,e,t,i){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);const s=this;let n=s.activeIndex;const a=Math.min(s.params.slidesPerGroupSkip,n),o=a+Math.floor((n-a)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[o]){const u=s.snapGrid[o],c=s.snapGrid[o+1];l-u>(c-u)*i&&(n+=s.params.slidesPerGroup)}else{const u=s.snapGrid[o-1],c=s.snapGrid[o];l-u<=(c-u)*i&&(n-=s.params.slidesPerGroup)}return n=Math.max(n,0),n=Math.min(n,s.slidesGrid.length-1),s.slideTo(n,r,e,t)}function kI(){const r=this,{params:e,slidesEl:t}=r,i=e.slidesPerView==="auto"?r.slidesPerViewDynamic():e.slidesPerView;let s=r.clickedIndex,n;const a=r.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(r.animating)return;n=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<r.loopedSlides-i/2||s>r.slides.length-r.loopedSlides+i/2?(r.loopFix(),s=r.getSlideIndex(dr(t,`${a}[data-swiper-slide-index="${n}"]`)[0]),Xc(()=>{r.slideTo(s)})):r.slideTo(s):s>r.slides.length-i?(r.loopFix(),s=r.getSlideIndex(dr(t,`${a}[data-swiper-slide-index="${n}"]`)[0]),Xc(()=>{r.slideTo(s)})):r.slideTo(s)}else r.slideTo(s)}var BI={slideTo:MI,slideToLoop:OI,slideNext:DI,slidePrev:LI,slideReset:NI,slideToClosest:FI,slideToClickedSlide:kI};function UI(r){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;dr(i,`.${t.slideClass}, swiper-slide`).forEach((n,a)=>{n.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:r,direction:t.centeredSlides?void 0:"next"})}function jI(r){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:s,activeSlideIndex:n,byController:a,byMousewheel:o}=r===void 0?{}:r;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:d,slidesEl:h,params:f}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled){t&&(!f.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=d,l.emit("loopFix");return}const p=f.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(f.slidesPerView,10));let m=f.loopedSlides||p;m%f.slidesPerGroup!==0&&(m+=f.slidesPerGroup-m%f.slidesPerGroup),l.loopedSlides=m;const g=[],b=[];let x=l.activeIndex;typeof n>"u"?n=l.getSlideIndex(l.slides.filter(w=>w.classList.contains(f.slideActiveClass))[0]):x=n;const y=i==="next"||!i,v=i==="prev"||!i;let S=0,T=0;if(n<m){S=Math.max(m-n,f.slidesPerGroup);for(let w=0;w<m-n;w+=1){const E=w-Math.floor(w/u.length)*u.length;g.push(u.length-E-1)}}else if(n>l.slides.length-m*2){T=Math.max(n-(l.slides.length-m*2),f.slidesPerGroup);for(let w=0;w<T;w+=1){const E=w-Math.floor(w/u.length)*u.length;b.push(E)}}if(v&&g.forEach(w=>{l.slides[w].swiperLoopMoveDOM=!0,h.prepend(l.slides[w]),l.slides[w].swiperLoopMoveDOM=!1}),y&&b.forEach(w=>{l.slides[w].swiperLoopMoveDOM=!0,h.append(l.slides[w]),l.slides[w].swiperLoopMoveDOM=!1}),l.recalcSlides(),f.slidesPerView==="auto"&&l.updateSlides(),f.watchSlidesProgress&&l.updateSlidesOffset(),t){if(g.length>0&&v)if(typeof e>"u"){const w=l.slidesGrid[x],A=l.slidesGrid[x+S]-w;o?l.setTranslate(l.translate-A):(l.slideTo(x+S,0,!1,!0),s&&(l.touches[l.isHorizontal()?"startX":"startY"]+=A,l.touchEventsData.currentTranslate=l.translate))}else s&&(l.slideToLoop(e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(b.length>0&&y)if(typeof e>"u"){const w=l.slidesGrid[x],A=l.slidesGrid[x-T]-w;o?l.setTranslate(l.translate-A):(l.slideTo(x-T,0,!1,!0),s&&(l.touches[l.isHorizontal()?"startX":"startY"]+=A,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=c,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const w={slideRealIndex:e,slideTo:!1,direction:i,setTranslate:s,activeSlideIndex:n,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(E=>{!E.destroyed&&E.params.loop&&E.loopFix(w)}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(w)}l.emit("loopFix")}function $I(){const r=this,{params:e,slidesEl:t}=r;if(!e.loop||r.virtual&&r.params.virtual.enabled)return;r.recalcSlides();const i=[];r.slides.forEach(s=>{const n=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[n]=s}),r.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{t.append(s)}),r.recalcSlides(),r.slideTo(r.realIndex,0)}var GI={loopCreate:UI,loopFix:jI,loopDestroy:$I};function HI(r){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=r?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function zI(){const r=this;r.params.watchOverflow&&r.isLocked||r.params.cssMode||(r.isElement&&(r.__preventObserver__=!0),r[r.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",r.isElement&&requestAnimationFrame(()=>{r.__preventObserver__=!1}))}var VI={setGrabCursor:HI,unsetGrabCursor:zI};function WI(r,e){e===void 0&&(e=this);function t(i){if(!i||i===Ti()||i===lt())return null;i.assignedSlot&&(i=i.assignedSlot);const s=i.closest(r);return!s&&!i.getRootNode?null:s||t(i.getRootNode().host)}return t(e)}function qI(r){const e=this,t=Ti(),i=lt(),s=e.touchEventsData;s.evCache.push(r);const{params:n,touches:a,enabled:o}=e;if(!o||!n.simulateTouch&&r.pointerType==="mouse"||e.animating&&n.preventInteractionOnTransition)return;!e.animating&&n.cssMode&&n.loop&&e.loopFix();let l=r;l.originalEvent&&(l=l.originalEvent);let u=l.target;if(n.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(u)||"which"in l&&l.which===3||"button"in l&&l.button>0||s.isTouched&&s.isMoved)return;const c=!!n.noSwipingClass&&n.noSwipingClass!=="",d=r.composedPath?r.composedPath():r.path;c&&l.target&&l.target.shadowRoot&&d&&(u=d[0]);const h=n.noSwipingSelector?n.noSwipingSelector:`.${n.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(n.noSwiping&&(f?WI(h,u):u.closest(h))){e.allowClick=!0;return}if(n.swipeHandler&&!u.closest(n.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const p=a.currentX,m=a.currentY,g=n.edgeSwipeDetection||n.iOSEdgeSwipeDetection,b=n.edgeSwipeThreshold||n.iOSEdgeSwipeThreshold;if(g&&(p<=b||p>=i.innerWidth-b))if(g==="prevent")r.preventDefault();else return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=m,s.touchStartTime=_o(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,n.threshold>0&&(s.allowThresholdMove=!1);let x=!0;u.matches(s.focusableElements)&&(x=!1,u.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==u&&t.activeElement.blur();const y=x&&e.allowTouchMove&&n.touchStartPreventDefault;(n.touchStartForcePreventDefault||y)&&!u.isContentEditable&&l.preventDefault(),n.freeMode&&n.freeMode.enabled&&e.freeMode&&e.animating&&!n.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function XI(r){const e=Ti(),t=this,i=t.touchEventsData,{params:s,touches:n,rtlTranslate:a,enabled:o}=t;if(!o||!s.simulateTouch&&r.pointerType==="mouse")return;let l=r;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=i.evCache.findIndex(T=>T.pointerId===l.pointerId);u>=0&&(i.evCache[u]=l);const c=i.evCache.length>1?i.evCache[0]:l,d=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){n.startX=d,n.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(n,{startX:d,startY:h,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:h}),i.touchStartTime=_o());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(h<n.startY&&t.translate<=t.maxTranslate()||h>n.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<n.startX&&t.translate<=t.maxTranslate()||d>n.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}if(i.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;n.currentX=d,n.currentY=h;const f=n.currentX-n.startX,p=n.currentY-n.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let T;t.isHorizontal()&&n.currentY===n.startY||t.isVertical()&&n.currentX===n.startX?i.isScrolling=!1:f*f+p*p>=25&&(T=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?T>s.touchAngle:90-T>s.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(n.currentX!==n.startX||n.currentY!==n.startY)&&(i.startMoving=!0),i.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&i.evCache.length>1){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let m=t.isHorizontal()?f:p,g=t.isHorizontal()?n.currentX-n.previousX:n.currentY-n.previousY;s.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),g=Math.abs(g)*(a?1:-1)),n.diff=m,m*=s.touchRatio,a&&(m=-m,g=-g);const b=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=g>0?"prev":"next";const x=t.params.loop&&!s.cssMode;if(!i.isMoved){if(x&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const T=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(T)}i.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let y;i.isMoved&&b!==t.touchesDirection&&x&&Math.abs(m)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),y=!0),t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;let v=!0,S=s.resistanceRatio;if(s.touchReleaseOnEdges&&(S=0),m>0?(x&&!y&&i.currentTranslate>(s.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(v=!1,s.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+m)**S))):m<0&&(x&&!y&&i.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(v=!1,s.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-m)**S))),v&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),s.threshold>0)if(Math.abs(m)>s.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,n.startX=n.currentX,n.startY=n.currentY,i.currentTranslate=i.startTranslate,n.diff=t.isHorizontal()?n.currentX-n.startX:n.currentY-n.startY;return}}else{i.currentTranslate=i.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function YI(r){const e=this,t=e.touchEventsData,i=t.evCache.findIndex(y=>y.pointerId===r.pointerId);if(i>=0&&t.evCache.splice(i,1),["pointercancel","pointerout","pointerleave"].includes(r.type)&&!(r.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:s,touches:n,rtlTranslate:a,slidesGrid:o,enabled:l}=e;if(!l||!s.simulateTouch&&r.pointerType==="mouse")return;let u=r;if(u.originalEvent&&(u=u.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",u),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&s.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}s.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=_o(),d=c-t.touchStartTime;if(e.allowClick){const y=u.path||u.composedPath&&u.composedPath();e.updateClickedSlide(y&&y[0]||u.target),e.emit("tap click",u),d<300&&c-t.lastClickTime<300&&e.emit("doubleTap doubleClick",u)}if(t.lastClickTime=_o(),Xc(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||n.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let h;if(s.followFinger?h=a?e.translate:-e.translate:h=-t.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:h});return}let f=0,p=e.slidesSizesGrid[0];for(let y=0;y<o.length;y+=y<s.slidesPerGroupSkip?1:s.slidesPerGroup){const v=y<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof o[y+v]<"u"?h>=o[y]&&h<o[y+v]&&(f=y,p=o[y+v]-o[y]):h>=o[y]&&(f=y,p=o[o.length-1]-o[o.length-2])}let m=null,g=null;s.rewind&&(e.isBeginning?g=s.virtual&&s.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const b=(h-o[f])/p,x=f<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(d>s.longSwipesMs){if(!s.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(b>=s.longSwipesRatio?e.slideTo(s.rewind&&e.isEnd?m:f+x):e.slideTo(f)),e.swipeDirection==="prev"&&(b>1-s.longSwipesRatio?e.slideTo(f+x):g!==null&&b<0&&Math.abs(b)>s.longSwipesRatio?e.slideTo(g):e.slideTo(f))}else{if(!s.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(u.target===e.navigation.nextEl||u.target===e.navigation.prevEl)?u.target===e.navigation.nextEl?e.slideTo(f+x):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:f+x),e.swipeDirection==="prev"&&e.slideTo(g!==null?g:f))}}function Zp(){const r=this,{params:e,el:t}=r;if(t&&t.offsetWidth===0)return;e.breakpoints&&r.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:s,snapGrid:n}=r,a=r.virtual&&r.params.virtual.enabled;r.allowSlideNext=!0,r.allowSlidePrev=!0,r.updateSize(),r.updateSlides(),r.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&r.isEnd&&!r.isBeginning&&!r.params.centeredSlides&&!o?r.slideTo(r.slides.length-1,0,!1,!0):r.params.loop&&!a?r.slideToLoop(r.realIndex,0,!1,!0):r.slideTo(r.activeIndex,0,!1,!0),r.autoplay&&r.autoplay.running&&r.autoplay.paused&&(clearTimeout(r.autoplay.resizeTimeout),r.autoplay.resizeTimeout=setTimeout(()=>{r.autoplay&&r.autoplay.running&&r.autoplay.paused&&r.autoplay.resume()},500)),r.allowSlidePrev=s,r.allowSlideNext=i,r.params.watchOverflow&&n!==r.snapGrid&&r.checkOverflow()}function QI(r){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&r.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(r.stopPropagation(),r.stopImmediatePropagation())))}function KI(){const r=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=r;if(!i)return;r.previousTranslate=r.translate,r.isHorizontal()?r.translate=-e.scrollLeft:r.translate=-e.scrollTop,r.translate===0&&(r.translate=0),r.updateActiveIndex(),r.updateSlidesClasses();let s;const n=r.maxTranslate()-r.minTranslate();n===0?s=0:s=(r.translate-r.minTranslate())/n,s!==r.progress&&r.updateProgress(t?-r.translate:r.translate),r.emit("setTranslate",r.translate,!1)}function ZI(r){const e=this;Va(e,r.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let Jp=!1;function JI(){}const d0=(r,e)=>{const t=Ti(),{params:i,el:s,wrapperEl:n,device:a}=r,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;s[l]("pointerdown",r.onTouchStart,{passive:!1}),t[l]("pointermove",r.onTouchMove,{passive:!1,capture:o}),t[l]("pointerup",r.onTouchEnd,{passive:!0}),t[l]("pointercancel",r.onTouchEnd,{passive:!0}),t[l]("pointerout",r.onTouchEnd,{passive:!0}),t[l]("pointerleave",r.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&s[l]("click",r.onClick,!0),i.cssMode&&n[l]("scroll",r.onScroll),i.updateOnWindowResize?r[u](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Zp,!0):r[u]("observerUpdate",Zp,!0),s[l]("load",r.onLoad,{capture:!0})};function eM(){const r=this,e=Ti(),{params:t}=r;r.onTouchStart=qI.bind(r),r.onTouchMove=XI.bind(r),r.onTouchEnd=YI.bind(r),t.cssMode&&(r.onScroll=KI.bind(r)),r.onClick=QI.bind(r),r.onLoad=ZI.bind(r),Jp||(e.addEventListener("touchstart",JI),Jp=!0),d0(r,"on")}function tM(){d0(this,"off")}var rM={attachEvents:eM,detachEvents:tM};const em=(r,e)=>r.grid&&e.grid&&e.grid.rows>1;function iM(){const r=this,{realIndex:e,initialized:t,params:i,el:s}=r,n=i.breakpoints;if(!n||n&&Object.keys(n).length===0)return;const a=r.getBreakpoint(n,r.params.breakpointsBase,r.el);if(!a||r.currentBreakpoint===a)return;const l=(a in n?n[a]:void 0)||r.originalParams,u=em(r,i),c=em(r,l),d=i.enabled;u&&!c?(s.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),r.emitContainerClasses()):!u&&c&&(s.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&s.classList.add(`${i.containerModifierClass}grid-column`),r.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(m=>{if(typeof l[m]>"u")return;const g=i[m]&&i[m].enabled,b=l[m]&&l[m].enabled;g&&!b&&r[m].disable(),!g&&b&&r[m].enable()});const h=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||h);h&&t&&r.changeDirection(),st(r.params,l);const p=r.params.enabled;Object.assign(r,{allowTouchMove:r.params.allowTouchMove,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev}),d&&!p?r.disable():!d&&p&&r.enable(),r.currentBreakpoint=a,r.emit("_beforeBreakpoint",l),f&&t&&(r.loopDestroy(),r.loopCreate(e),r.updateSlides()),r.emit("breakpoint",l)}function sM(r,e,t){if(e===void 0&&(e="window"),!r||e==="container"&&!t)return;let i=!1;const s=lt(),n=e==="window"?s.innerHeight:t.clientHeight,a=Object.keys(r).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:n*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:u}=a[o];e==="window"?s.matchMedia(`(min-width: ${u}px)`).matches&&(i=l):u<=t.clientWidth&&(i=l)}return i||"max"}var nM={setBreakpoint:iM,getBreakpoint:sM};function aM(r,e){const t=[];return r.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(s=>{i[s]&&t.push(e+s)}):typeof i=="string"&&t.push(e+i)}),t}function oM(){const r=this,{classNames:e,params:t,rtl:i,el:s,device:n}=r,a=aM(["initialized",t.direction,{"free-mode":r.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:n.android},{ios:n.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),s.classList.add(...e),r.emitContainerClasses()}function lM(){const r=this,{el:e,classNames:t}=r;e.classList.remove(...t),r.emitContainerClasses()}var uM={addClasses:oM,removeClasses:lM};function cM(){const r=this,{isLocked:e,params:t}=r,{slidesOffsetBefore:i}=t;if(i){const s=r.slides.length-1,n=r.slidesGrid[s]+r.slidesSizesGrid[s]+i*2;r.isLocked=r.size>n}else r.isLocked=r.snapGrid.length===1;t.allowSlideNext===!0&&(r.allowSlideNext=!r.isLocked),t.allowSlidePrev===!0&&(r.allowSlidePrev=!r.isLocked),e&&e!==r.isLocked&&(r.isEnd=!1),e!==r.isLocked&&r.emit(r.isLocked?"lock":"unlock")}var hM={checkOverflow:cM},Qc={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function dM(r,e){return function(i){i===void 0&&(i={});const s=Object.keys(i)[0],n=i[s];if(typeof n!="object"||n===null){st(e,i);return}if(["navigation","pagination","scrollbar"].indexOf(s)>=0&&r[s]===!0&&(r[s]={auto:!0}),!(s in r&&"enabled"in n)){st(e,i);return}r[s]===!0&&(r[s]={enabled:!0}),typeof r[s]=="object"&&!("enabled"in r[s])&&(r[s].enabled=!0),r[s]||(r[s]={enabled:!1}),st(e,i)}}const yu={eventsEmitter:uI,update:xI,translate:AI,transition:II,slide:BI,loop:GI,grabCursor:VI,events:rM,breakpoints:nM,checkOverflow:hM,classes:uM},vu={};let Xh=class nr{constructor(){let e,t;for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=st({},t),e&&!t.el&&(t.el=e);const a=Ti();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const c=[];return a.querySelectorAll(t.el).forEach(d=>{const h=st({},t,{el:d});c.push(new nr(h))}),c}const o=this;o.__swiper__=!0,o.support=c0(),o.device=sI({userAgent:t.userAgent}),o.browser=aI(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(c=>{c({params:t,swiper:o,extendParams:dM(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const u=st({},Qc,l);return o.params=st({},u,vu,t),o.originalParams=st({},o.params),o.passedParams=st({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:i}=this,s=dr(t,`.${i.slideClass}, swiper-slide`),n=Qp(s[0]);return Qp(e)-n}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=dr(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),a=(i.maxTranslate()-s)*e+s;i.translateTo(a,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const s=e.getSlideClasses(i);t.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:s,slides:n,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:u}=i;let c=1;if(s.centeredSlides){let d=n[u]?n[u].swiperSlideSize:0,h;for(let f=u+1;f<n.length;f+=1)n[f]&&!h&&(d+=n[f].swiperSlideSize,c+=1,d>l&&(h=!0));for(let f=u-1;f>=0;f-=1)n[f]&&!h&&(d+=n[f].swiperSlideSize,c+=1,d>l&&(h=!0))}else if(e==="current")for(let d=u+1;d<n.length;d+=1)(t?a[d]+o[d]-a[u]<l:a[d]-a[u]<l)&&(c+=1);else for(let d=u-1;d>=0;d-=1)a[u]-a[d]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&Va(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let n;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;n=e.slideTo(a.length-1,0,!1,!0)}else n=e.slideTo(e.activeIndex,0,!1,!0);n||s()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,s=i.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(n=>{e==="vertical"?n.style.width="":n.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(s()):dr(i,s())[0])();return!a&&t.params.createElements&&(a=ZR("div",t.params.wrapperClass),i.append(a),dr(i,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:i,wrapperEl:a,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Dr(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Dr(i,"direction")==="rtl"),wrongRTL:Dr(a,"display")==="-webkit-box"}),!0}init(e){const t=this;return t.initialized||t.mount(e)===!1||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(s=>{s.complete?Va(t,s):s.addEventListener("load",n=>{Va(t,n.target)})}),Yc(t),t.initialized=!0,Yc(t),t.emit("init"),t.emit("afterInit")),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:s,el:n,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),n.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,XR(i)),i.destroyed=!0),null}static extendDefaults(e){st(vu,e)}static get extendedDefaults(){return vu}static get defaults(){return Qc}static installModule(e){nr.prototype.__modules__||(nr.prototype.__modules__=[]);const t=nr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>nr.installModule(t)),nr):(nr.installModule(e),nr)}};Object.keys(yu).forEach(r=>{Object.keys(yu[r]).forEach(e=>{Xh.prototype[e]=yu[r][e]})});Xh.use([oI,lI]);const f0=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function bi(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"}function fi(r,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof r[i]>"u"?r[i]=e[i]:bi(e[i])&&bi(r[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?r[i]=e[i]:fi(r[i],e[i]):r[i]=e[i]})}function p0(r){return r===void 0&&(r={}),r.navigation&&typeof r.navigation.nextEl>"u"&&typeof r.navigation.prevEl>"u"}function m0(r){return r===void 0&&(r={}),r.pagination&&typeof r.pagination.el>"u"}function g0(r){return r===void 0&&(r={}),r.scrollbar&&typeof r.scrollbar.el>"u"}function y0(r){r===void 0&&(r="");const e=r.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function fM(r){return r===void 0&&(r=""),r?r.includes("swiper-wrapper")?r:`swiper-wrapper ${r}`:"swiper-wrapper"}function pM(r){let{swiper:e,slides:t,passedParams:i,changedParams:s,nextEl:n,prevEl:a,scrollbarEl:o,paginationEl:l}=r;const u=s.filter(A=>A!=="children"&&A!=="direction"&&A!=="wrapperClass"),{params:c,pagination:d,navigation:h,scrollbar:f,virtual:p,thumbs:m}=e;let g,b,x,y,v,S,T,w;s.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(g=!0),s.includes("controller")&&i.controller&&i.controller.control&&c.controller&&!c.controller.control&&(b=!0),s.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(c.pagination||c.pagination===!1)&&d&&!d.el&&(x=!0),s.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&f&&!f.el&&(y=!0),s.includes("navigation")&&i.navigation&&(i.navigation.prevEl||a)&&(i.navigation.nextEl||n)&&(c.navigation||c.navigation===!1)&&h&&!h.prevEl&&!h.nextEl&&(v=!0);const E=A=>{e[A]&&(e[A].destroy(),A==="navigation"?(e.isElement&&(e[A].prevEl.remove(),e[A].nextEl.remove()),c[A].prevEl=void 0,c[A].nextEl=void 0,e[A].prevEl=void 0,e[A].nextEl=void 0):(e.isElement&&e[A].el.remove(),c[A].el=void 0,e[A].el=void 0))};s.includes("loop")&&e.isElement&&(c.loop&&!i.loop?S=!0:!c.loop&&i.loop?T=!0:w=!0),u.forEach(A=>{if(bi(c[A])&&bi(i[A]))fi(c[A],i[A]),(A==="navigation"||A==="pagination"||A==="scrollbar")&&"enabled"in i[A]&&!i[A].enabled&&E(A);else{const M=i[A];(M===!0||M===!1)&&(A==="navigation"||A==="pagination"||A==="scrollbar")?M===!1&&E(A):c[A]=i[A]}}),u.includes("controller")&&!b&&e.controller&&e.controller.control&&c.controller&&c.controller.control&&(e.controller.control=c.controller.control),s.includes("children")&&t&&p&&c.virtual.enabled&&(p.slides=t,p.update(!0)),s.includes("children")&&t&&c.loop&&(w=!0),g&&m.init()&&m.update(!0),b&&(e.controller.control=c.controller.control),x&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),e.el.appendChild(l)),l&&(c.pagination.el=l),d.init(),d.render(),d.update()),y&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),e.el.appendChild(o)),o&&(c.scrollbar.el=o),f.init(),f.updateSize(),f.setTranslate()),v&&(e.isElement&&((!n||typeof n=="string")&&(n=document.createElement("div"),n.classList.add("swiper-button-next"),n.innerHTML=e.hostEl.nextButtonSvg,e.el.appendChild(n)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),n.innerHTML=e.hostEl.prevButtonSvg,e.el.appendChild(a))),n&&(c.navigation.nextEl=n),a&&(c.navigation.prevEl=a),h.init(),h.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),s.includes("direction")&&e.changeDirection(i.direction,!1),(S||w)&&e.loopDestroy(),(T||w)&&e.loopCreate(),e.update()}function mM(r,e){r===void 0&&(r={}),e===void 0&&(e=!0);const t={on:{}},i={},s={};fi(t,Qc),t._emitClasses=!0,t.init=!1;const n={},a=f0.map(l=>l.replace(/_/,"")),o=Object.assign({},r);return Object.keys(o).forEach(l=>{typeof r[l]>"u"||(a.indexOf(l)>=0?bi(r[l])?(t[l]={},s[l]={},fi(t[l],r[l]),fi(s[l],r[l])):(t[l]=r[l],s[l]=r[l]):l.search(/on[A-Z]/)===0&&typeof r[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=r[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=r[l]:n[l]=r[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:s,rest:n,events:i}}function gM(r,e){let{el:t,nextEl:i,prevEl:s,paginationEl:n,scrollbarEl:a,swiper:o}=r;p0(e)&&i&&s&&(o.params.navigation.nextEl=i,o.originalParams.navigation.nextEl=i,o.params.navigation.prevEl=s,o.originalParams.navigation.prevEl=s),m0(e)&&n&&(o.params.pagination.el=n,o.originalParams.pagination.el=n),g0(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function yM(r,e,t,i,s){const n=[];if(!e)return n;const a=l=>{n.indexOf(l)<0&&n.push(l)};if(t&&i){const l=i.map(s),u=t.map(s);l.join("")!==u.join("")&&a("children"),i.length!==t.length&&a("children")}return f0.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in r&&l in e)if(bi(r[l])&&bi(e[l])){const u=Object.keys(r[l]),c=Object.keys(e[l]);u.length!==c.length?a(l):(u.forEach(d=>{r[l][d]!==e[l][d]&&a(l)}),c.forEach(d=>{r[l][d]!==e[l][d]&&a(l)}))}else r[l]!==e[l]&&a(l)}),n}const vM=r=>{!r||r.destroyed||!r.params.virtual||r.params.virtual&&!r.params.virtual.enabled||(r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),r.parallax&&r.params.parallax&&r.params.parallax.enabled&&r.parallax.setTranslate())};function wo(){return wo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},wo.apply(this,arguments)}function v0(r){return r.type&&r.type.displayName&&r.type.displayName.includes("SwiperSlide")}function b0(r){const e=[];return Oe.Children.toArray(r).forEach(t=>{v0(t)?e.push(t):t.props&&t.props.children&&b0(t.props.children).forEach(i=>e.push(i))}),e}function bM(r){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Oe.Children.toArray(r).forEach(i=>{if(v0(i))e.push(i);else if(i.props&&i.props.slot&&t[i.props.slot])t[i.props.slot].push(i);else if(i.props&&i.props.children){const s=b0(i.props.children);s.length>0?s.forEach(n=>e.push(n)):t["container-end"].push(i)}else t["container-end"].push(i)}),{slides:e,slots:t}}function xM(r,e,t){if(!t)return null;const i=c=>{let d=c;return c<0?d=e.length+c:d>=e.length&&(d=d-e.length),d},s=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:n,to:a}=t,o=r.params.loop?-e.length:0,l=r.params.loop?e.length*2:e.length,u=[];for(let c=o;c<l;c+=1)c>=n&&c<=a&&u.push(e[i(c)]);return u.map((c,d)=>Oe.cloneElement(c,{swiper:r,style:s,key:`slide-${d}`}))}function en(r,e){return typeof window>"u"?N.useEffect(r,e):N.useLayoutEffect(r,e)}const tm=N.createContext(null),_M=N.createContext(null),wM=N.forwardRef(function(r,e){let{className:t,tag:i="div",wrapperTag:s="div",children:n,onSwiper:a,...o}=r===void 0?{}:r,l=!1;const[u,c]=N.useState("swiper"),[d,h]=N.useState(null),[f,p]=N.useState(!1),m=N.useRef(!1),g=N.useRef(null),b=N.useRef(null),x=N.useRef(null),y=N.useRef(null),v=N.useRef(null),S=N.useRef(null),T=N.useRef(null),w=N.useRef(null),{params:E,passedParams:A,rest:M,events:I}=mM(o),{slides:O,slots:R}=bM(n),_=()=>{p(!f)};Object.assign(E.on,{_containerClasses(B,F){c(F)}});const C=()=>{Object.assign(E.on,I),l=!0;const B={...E};if(delete B.wrapperClass,b.current=new Xh(B),b.current.virtual&&b.current.params.virtual.enabled){b.current.virtual.slides=O;const F={cache:!1,slides:O,renderExternal:h,renderExternalUpdate:!1};fi(b.current.params.virtual,F),fi(b.current.originalParams.virtual,F)}};g.current||C(),b.current&&b.current.on("_beforeBreakpoint",_);const D=()=>{l||!I||!b.current||Object.keys(I).forEach(B=>{b.current.on(B,I[B])})},k=()=>{!I||!b.current||Object.keys(I).forEach(B=>{b.current.off(B,I[B])})};N.useEffect(()=>()=>{b.current&&b.current.off("_beforeBreakpoint",_)}),N.useEffect(()=>{!m.current&&b.current&&(b.current.emitSlidesClasses(),m.current=!0)}),en(()=>{if(e&&(e.current=g.current),!!g.current)return b.current.destroyed&&C(),gM({el:g.current,nextEl:v.current,prevEl:S.current,paginationEl:T.current,scrollbarEl:w.current,swiper:b.current},E),a&&a(b.current),()=>{b.current&&!b.current.destroyed&&b.current.destroy(!0,!1)}},[]),en(()=>{D();const B=yM(A,x.current,O,y.current,F=>F.key);return x.current=A,y.current=O,B.length&&b.current&&!b.current.destroyed&&pM({swiper:b.current,slides:O,passedParams:A,changedParams:B,nextEl:v.current,prevEl:S.current,scrollbarEl:w.current,paginationEl:T.current}),()=>{k()}}),en(()=>{vM(b.current)},[d]);function L(){return E.virtual?xM(b.current,O,d):O.map((B,F)=>Oe.cloneElement(B,{swiper:b.current,swiperSlideIndex:F}))}return Oe.createElement(i,wo({ref:g,className:y0(`${u}${t?` ${t}`:""}`)},M),Oe.createElement(_M.Provider,{value:b.current},R["container-start"],Oe.createElement(s,{className:fM(E.wrapperClass)},R["wrapper-start"],L(),R["wrapper-end"]),p0(E)&&Oe.createElement(Oe.Fragment,null,Oe.createElement("div",{ref:S,className:"swiper-button-prev"}),Oe.createElement("div",{ref:v,className:"swiper-button-next"})),g0(E)&&Oe.createElement("div",{ref:w,className:"swiper-scrollbar"}),m0(E)&&Oe.createElement("div",{ref:T,className:"swiper-pagination"}),R["container-end"]))});wM.displayName="Swiper";const SM=N.forwardRef(function(r,e){let{tag:t="div",children:i,className:s="",swiper:n,zoom:a,lazy:o,virtualIndex:l,swiperSlideIndex:u,...c}=r===void 0?{}:r;const d=N.useRef(null),[h,f]=N.useState("swiper-slide"),[p,m]=N.useState(!1);function g(v,S,T){S===d.current&&f(T)}en(()=>{if(typeof u<"u"&&(d.current.swiperSlideIndex=u),e&&(e.current=d.current),!(!d.current||!n)){if(n.destroyed){h!=="swiper-slide"&&f("swiper-slide");return}return n.on("_slideClass",g),()=>{n&&n.off("_slideClass",g)}}}),en(()=>{n&&d.current&&!n.destroyed&&f(n.getSlideClasses(d.current))},[n]);const b={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},x=()=>typeof i=="function"?i(b):i,y=()=>{m(!0)};return Oe.createElement(t,wo({ref:d,className:y0(`${h}${s?` ${s}`:""}`),"data-swiper-slide-index":l,onLoad:y},c),a&&Oe.createElement(tm.Provider,{value:b},Oe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},x(),o&&!p&&Oe.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&Oe.createElement(tm.Provider,{value:b},x(),o&&!p&&Oe.createElement("div",{className:"swiper-lazy-preloader"})))});SM.displayName="SwiperSlide";var Yh={},Qh={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Doctype=r.CDATA=r.Tag=r.Style=r.Script=r.Comment=r.Directive=r.Text=r.Root=r.isTag=r.ElementType=void 0;var e;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(e=r.ElementType||(r.ElementType={}));function t(i){return i.type===e.Tag||i.type===e.Script||i.type===e.Style}r.isTag=t,r.Root=e.Root,r.Text=e.Text,r.Directive=e.Directive,r.Comment=e.Comment,r.Script=e.Script,r.Style=e.Style,r.Tag=e.Tag,r.CDATA=e.CDATA,r.Doctype=e.Doctype})(Qh);var ce={},Hr=Ie&&Ie.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tn=Ie&&Ie.__assign||function(){return tn=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},tn.apply(this,arguments)};Object.defineProperty(ce,"__esModule",{value:!0});ce.cloneNode=ce.hasChildren=ce.isDocument=ce.isDirective=ce.isComment=ce.isText=ce.isCDATA=ce.isTag=ce.Element=ce.Document=ce.CDATA=ce.NodeWithChildren=ce.ProcessingInstruction=ce.Comment=ce.Text=ce.DataNode=ce.Node=void 0;var tt=Qh,Kh=function(){function r(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),r.prototype.cloneNode=function(e){return e===void 0&&(e=!1),Zh(this,e)},r}();ce.Node=Kh;var il=function(r){Hr(e,r);function e(t){var i=r.call(this)||this;return i.data=t,i}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(Kh);ce.DataNode=il;var x0=function(r){Hr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=tt.ElementType.Text,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(il);ce.Text=x0;var _0=function(r){Hr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=tt.ElementType.Comment,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(il);ce.Comment=_0;var w0=function(r){Hr(e,r);function e(t,i){var s=r.call(this,i)||this;return s.name=t,s.type=tt.ElementType.Directive,s}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(il);ce.ProcessingInstruction=w0;var sl=function(r){Hr(e,r);function e(t){var i=r.call(this)||this;return i.children=t,i}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(Kh);ce.NodeWithChildren=sl;var S0=function(r){Hr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=tt.ElementType.CDATA,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(sl);ce.CDATA=S0;var E0=function(r){Hr(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=tt.ElementType.Root,t}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(sl);ce.Document=E0;var T0=function(r){Hr(e,r);function e(t,i,s,n){s===void 0&&(s=[]),n===void 0&&(n=t==="script"?tt.ElementType.Script:t==="style"?tt.ElementType.Style:tt.ElementType.Tag);var a=r.call(this,s)||this;return a.name=t,a.attribs=i,a.type=n,a}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(i){var s,n;return{name:i,value:t.attribs[i],namespace:(s=t["x-attribsNamespace"])===null||s===void 0?void 0:s[i],prefix:(n=t["x-attribsPrefix"])===null||n===void 0?void 0:n[i]}})},enumerable:!1,configurable:!0}),e}(sl);ce.Element=T0;function A0(r){return(0,tt.isTag)(r)}ce.isTag=A0;function C0(r){return r.type===tt.ElementType.CDATA}ce.isCDATA=C0;function P0(r){return r.type===tt.ElementType.Text}ce.isText=P0;function R0(r){return r.type===tt.ElementType.Comment}ce.isComment=R0;function I0(r){return r.type===tt.ElementType.Directive}ce.isDirective=I0;function M0(r){return r.type===tt.ElementType.Root}ce.isDocument=M0;function EM(r){return Object.prototype.hasOwnProperty.call(r,"children")}ce.hasChildren=EM;function Zh(r,e){e===void 0&&(e=!1);var t;if(P0(r))t=new x0(r.data);else if(R0(r))t=new _0(r.data);else if(A0(r)){var i=e?bu(r.children):[],s=new T0(r.name,tn({},r.attribs),i);i.forEach(function(l){return l.parent=s}),r.namespace!=null&&(s.namespace=r.namespace),r["x-attribsNamespace"]&&(s["x-attribsNamespace"]=tn({},r["x-attribsNamespace"])),r["x-attribsPrefix"]&&(s["x-attribsPrefix"]=tn({},r["x-attribsPrefix"])),t=s}else if(C0(r)){var i=e?bu(r.children):[],n=new S0(i);i.forEach(function(u){return u.parent=n}),t=n}else if(M0(r)){var i=e?bu(r.children):[],a=new E0(i);i.forEach(function(u){return u.parent=a}),r["x-mode"]&&(a["x-mode"]=r["x-mode"]),t=a}else if(I0(r)){var o=new w0(r.name,r.data);r["x-name"]!=null&&(o["x-name"]=r["x-name"],o["x-publicId"]=r["x-publicId"],o["x-systemId"]=r["x-systemId"]),t=o}else throw new Error("Not implemented yet: ".concat(r.type));return t.startIndex=r.startIndex,t.endIndex=r.endIndex,r.sourceCodeLocation!=null&&(t.sourceCodeLocation=r.sourceCodeLocation),t}ce.cloneNode=Zh;function bu(r){for(var e=r.map(function(i){return Zh(i,!0)}),t=1;t<e.length;t++)e[t].prev=e[t-1],e[t-1].next=e[t];return e}(function(r){var e=Ie&&Ie.__createBinding||(Object.create?function(o,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(o,c,d)}:function(o,l,u,c){c===void 0&&(c=u),o[c]=l[u]}),t=Ie&&Ie.__exportStar||function(o,l){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&e(l,o,u)};Object.defineProperty(r,"__esModule",{value:!0}),r.DomHandler=void 0;var i=Qh,s=ce;t(ce,r);var n={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function o(l,u,c){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(c=u,u=n),typeof l=="object"&&(u=l,l=void 0),this.callback=l??null,this.options=u??n,this.elementCB=c??null}return o.prototype.onparserinit=function(l){this.parser=l},o.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(l){this.handleCallback(l)},o.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},o.prototype.onopentag=function(l,u){var c=this.options.xmlMode?i.ElementType.Tag:void 0,d=new s.Element(l,u,void 0,c);this.addNode(d),this.tagStack.push(d)},o.prototype.ontext=function(l){var u=this.lastNode;if(u&&u.type===i.ElementType.Text)u.data+=l,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var c=new s.Text(l);this.addNode(c),this.lastNode=c}},o.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=l;return}var u=new s.Comment(l);this.addNode(u),this.lastNode=u},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var l=new s.Text(""),u=new s.CDATA([l]);this.addNode(u),l.parent=u,this.lastNode=l},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(l,u){var c=new s.ProcessingInstruction(l,u);this.addNode(c)},o.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},o.prototype.addNode=function(l){var u=this.tagStack[this.tagStack.length-1],c=u.children[u.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),u.children.push(l),c&&(l.prev=c,c.next=l),l.parent=u,this.lastNode=null},o}();r.DomHandler=a,r.default=a})(Yh);var rm="html",im="head",wa="body",TM=/<([a-zA-Z]+[0-9]?)/,sm=/<head[^]*>/i,nm=/<body[^]*>/i,So=function(){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},Kc=function(){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},am=typeof window=="object"&&window.DOMParser;if(typeof am=="function"){var AM=new am,CM="text/html";Kc=function(r,e){return e&&(r="<"+e+">"+r+"</"+e+">"),AM.parseFromString(r,CM)},So=Kc}if(typeof document=="object"&&document.implementation){var Sa=document.implementation.createHTMLDocument();So=function(r,e){if(e){var t=Sa.documentElement.querySelector(e);return t.innerHTML=r,Sa}return Sa.documentElement.innerHTML=r,Sa}}var xu=typeof document=="object"?document.createElement("template"):{},Zc;xu.content&&(Zc=function(r){return xu.innerHTML=r,xu.content.childNodes});function PM(r){var e,t=r.match(TM);t&&t[1]&&(e=t[1].toLowerCase());var i,s,n;switch(e){case rm:return i=Kc(r),sm.test(r)||(s=i.querySelector(im),s&&s.parentNode.removeChild(s)),nm.test(r)||(s=i.querySelector(wa),s&&s.parentNode.removeChild(s)),i.querySelectorAll(rm);case im:case wa:return i=So(r),n=i.querySelectorAll(e),nm.test(r)&&sm.test(r)?n[0].parentNode.childNodes:n;default:return Zc?Zc(r):(s=So(r,wa).querySelector(wa),s.childNodes)}}var RM=PM,Jh={},O0={};O0.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"];var nl=Yh,IM=O0,om=IM.CASE_SENSITIVE_TAG_NAMES,MM=nl.Comment,OM=nl.Element,DM=nl.ProcessingInstruction,LM=nl.Text,D0={},_u;for(var wu=0,NM=om.length;wu<NM;wu++)_u=om[wu],D0[_u.toLowerCase()]=_u;function FM(r){return D0[r]}function L0(r){for(var e={},t,i=0,s=r.length;i<s;i++)t=r[i],e[t.name]=t.value;return e}function kM(r){r=r.toLowerCase();var e=FM(r);return e||r}function N0(r,e,t){e=e||null;for(var i=[],s,n=0,a=r.length;n<a;n++){var o=r[n],l;switch(o.nodeType){case 1:s=kM(o.nodeName),l=new OM(s,L0(o.attributes)),l.children=N0(s==="template"?o.content.childNodes:o.childNodes,l);break;case 3:l=new LM(o.nodeValue);break;case 8:l=new MM(o.nodeValue);break;default:continue}var u=i[n-1]||null;u&&(u.next=l),l.parent=e,l.prev=u,l.next=null,i.push(l)}return t&&(l=new DM(t.substring(0,t.indexOf(" ")).toLowerCase(),t),l.next=i[0]||null,l.parent=e,i.unshift(l),i[1]&&(i[1].prev=i[0])),i}Jh.formatAttributes=L0;Jh.formatDOM=N0;var BM=RM,UM=Jh,jM=UM.formatDOM,$M=/<(![a-zA-Z\s]+)>/;function GM(r){if(typeof r!="string")throw new TypeError("First argument must be a string");if(r==="")return[];var e=r.match($M),t;return e&&e[1]&&(t=e[1]),jM(BM(r),null,t)}var HM=GM,gt={},al={},zM=0;al.SAME=zM;var VM=1;al.CAMELCASE=VM;al.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};Object.defineProperty(gt,"__esModule",{value:!0});function WM(r,e){return qM(r)||XM(r,e)||YM(r,e)||QM()}function qM(r){if(Array.isArray(r))return r}function XM(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i=[],s=!0,n=!1,a,o;try{for(t=t.call(r);!(s=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));s=!0);}catch(l){n=!0,o=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(n)throw o}}return i}}function YM(r,e){if(r){if(typeof r=="string")return lm(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lm(r,e)}}function lm(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function QM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F0=0,zr=1,ol=2,ll=3,ed=4,k0=5,B0=6;function KM(r){return Ve.hasOwnProperty(r)?Ve[r]:null}function Ke(r,e,t,i,s,n,a){this.acceptsBooleans=e===ol||e===ll||e===ed,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=n,this.removeEmptyString=a}var Ve={},ZM=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];ZM.forEach(function(r){Ve[r]=new Ke(r,F0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=WM(r,2),t=e[0],i=e[1];Ve[t]=new Ke(t,zr,!1,i,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Ve[r]=new Ke(r,ol,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Ve[r]=new Ke(r,ol,!1,r,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(r){Ve[r]=new Ke(r,ll,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Ve[r]=new Ke(r,ll,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Ve[r]=new Ke(r,ed,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Ve[r]=new Ke(r,B0,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Ve[r]=new Ke(r,k0,!1,r.toLowerCase(),null,!1,!1)});var td=/[\-\:]([a-z])/g,rd=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(r){var e=r.replace(td,rd);Ve[e]=new Ke(e,zr,!1,r,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(r){var e=r.replace(td,rd);Ve[e]=new Ke(e,zr,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(td,rd);Ve[e]=new Ke(e,zr,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Ve[r]=new Ke(r,zr,!1,r.toLowerCase(),null,!1,!1)});var JM="xlinkHref";Ve[JM]=new Ke("xlinkHref",zr,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Ve[r]=new Ke(r,zr,!1,r.toLowerCase(),null,!0,!0)});var id=al,e2=id.CAMELCASE,t2=id.SAME,um=id.possibleStandardNames,r2=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",i2=r2+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",s2=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i2+"]*$")),n2=Object.keys(um).reduce(function(r,e){var t=um[e];return t===t2?r[e]=e:t===e2?r[e.toLowerCase()]=e:r[e]=t,r},{});gt.BOOLEAN=ll;gt.BOOLEANISH_STRING=ol;gt.NUMERIC=k0;gt.OVERLOADED_BOOLEAN=ed;gt.POSITIVE_NUMERIC=B0;gt.RESERVED=F0;gt.STRING=zr;gt.getPropertyInfo=KM;gt.isCustomAttribute=s2;gt.possibleStandardNames=n2;var U0={},sd={exports:{}},cm=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,a2=/\n/g,o2=/^\s*/,l2=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,u2=/^:\s*/,c2=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,h2=/^[;\s]*/,d2=/^\s+|\s+$/g,f2=`
`,hm="/",dm="*",ni="",p2="comment",m2="declaration",g2=function(r,e){if(typeof r!="string")throw new TypeError("First argument must be a string");if(!r)return[];e=e||{};var t=1,i=1;function s(p){var m=p.match(a2);m&&(t+=m.length);var g=p.lastIndexOf(f2);i=~g?p.length-g:i+p.length}function n(){var p={line:t,column:i};return function(m){return m.position=new a(p),u(),m}}function a(p){this.start=p,this.end={line:t,column:i},this.source=e.source}a.prototype.content=r;function o(p){var m=new Error(e.source+":"+t+":"+i+": "+p);if(m.reason=p,m.filename=e.source,m.line=t,m.column=i,m.source=r,!e.silent)throw m}function l(p){var m=p.exec(r);if(m){var g=m[0];return s(g),r=r.slice(g.length),m}}function u(){l(o2)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=n();if(!(hm!=r.charAt(0)||dm!=r.charAt(1))){for(var m=2;ni!=r.charAt(m)&&(dm!=r.charAt(m)||hm!=r.charAt(m+1));)++m;if(m+=2,ni===r.charAt(m-1))return o("End of comment missing");var g=r.slice(2,m-2);return i+=2,s(g),r=r.slice(m),i+=2,p({type:p2,comment:g})}}function h(){var p=n(),m=l(l2);if(m){if(d(),!l(u2))return o("property missing ':'");var g=l(c2),b=p({type:m2,property:fm(m[0].replace(cm,ni)),value:g?fm(g[0].replace(cm,ni)):ni});return l(h2),b}}function f(){var p=[];c(p);for(var m;m=h();)m!==!1&&(p.push(m),c(p));return p}return u(),f()};function fm(r){return r?r.replace(d2,ni):ni}var y2=g2;function j0(r,e){var t=null;if(!r||typeof r!="string")return t;for(var i,s=y2(r),n=typeof e=="function",a,o,l=0,u=s.length;l<u;l++)i=s[l],a=i.property,o=i.value,n?e(a,o,i):o&&(t||(t={}),t[a]=o);return t}sd.exports=j0;sd.exports.default=j0;var v2=sd.exports,ul={};ul.__esModule=!0;ul.camelCase=void 0;var b2=/^--[a-zA-Z0-9-]+$/,x2=/-([a-z])/g,_2=/^[^-]+$/,w2=/^-(webkit|moz|ms|o|khtml)-/,S2=/^-(ms)-/,E2=function(r){return!r||_2.test(r)||b2.test(r)},T2=function(r,e){return e.toUpperCase()},pm=function(r,e){return"".concat(e,"-")},A2=function(r,e){return e===void 0&&(e={}),E2(r)?r:(r=r.toLowerCase(),e.reactCompat?r=r.replace(S2,pm):r=r.replace(w2,pm),r.replace(x2,T2))};ul.camelCase=A2;(function(r){var e=Ie&&Ie.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};r.__esModule=!0;var t=e(v2),i=ul;function s(n,a){var o={};return!n||typeof n!="string"||(0,t.default)(n,function(l,u){l&&u&&(o[(0,i.camelCase)(l,a)]=u)}),o}r.default=s})(U0);var C2=N,P2=U0.default;function R2(r,e){if(!r||typeof r!="object")throw new TypeError("First argument must be an object");var t=typeof e=="function",i={},s={};for(var n in r){var a=r[n];if(t&&(i=e(n,a),i&&i.length===2)){s[i[0]]=i[1];continue}typeof a=="string"&&(s[a]=n)}return s}var I2=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function M2(r,e){return r.indexOf("-")===-1?e&&typeof e.is=="string":!I2.has(r)}var O2={reactCompat:!0};function D2(r,e){if(r!=null)try{e.style=P2(r,O2)}catch{e.style={}}}var L2=C2.version.split(".")[0]>=16,$0=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);function N2(r){return!$0.has(r.name)}function F2(r){return r}var G0={PRESERVE_CUSTOM_ATTRIBUTES:L2,ELEMENTS_WITH_NO_TEXT_CHILDREN:$0,invertObject:R2,isCustomComponent:M2,setStyleProp:D2,canTextBeChildOfNode:N2,returnFirstArg:F2},Gs=gt,mm=G0,k2=["checked","value"],B2=["input","select","textarea"],U2={reset:!0,submit:!0},H0=function(e,t){e=e||{};var i,s,n,a,o,l={},u=e.type&&U2[e.type];for(i in e){if(n=e[i],Gs.isCustomAttribute(i)){l[i]=n;continue}if(s=i.toLowerCase(),a=gm(s),a){switch(o=Gs.getPropertyInfo(a),k2.indexOf(a)!==-1&&B2.indexOf(t)!==-1&&!u&&(a=gm("default"+s)),l[a]=n,o&&o.type){case Gs.BOOLEAN:l[a]=!0;break;case Gs.OVERLOADED_BOOLEAN:n===""&&(l[a]=!0);break}continue}mm.PRESERVE_CUSTOM_ATTRIBUTES&&(l[i]=n)}return mm.setStyleProp(e.style,l),l};function gm(r){return Gs.possibleStandardNames[r]}var j2=N,$2=H0,bn=G0,G2=bn.setStyleProp,H2=bn.canTextBeChildOfNode;function z0(r,e){e=e||{};for(var t=e.library||j2,i=t.cloneElement,s=t.createElement,n=t.isValidElement,a=[],o,l,u=typeof e.replace=="function",c=e.transform||bn.returnFirstArg,d,h,f,p=e.trim,m=0,g=r.length;m<g;m++){if(o=r[m],u&&(d=e.replace(o),n(d))){g>1&&(d=i(d,{key:d.key||m})),a.push(c(d,o,m));continue}if(o.type==="text"){if(l=!o.data.trim().length,l&&o.parent&&!H2(o.parent)||p&&l)continue;a.push(c(o.data,o,m));continue}switch(h=o.attribs,z2(o)?G2(h.style,h):h&&(h=$2(h,o.name)),f=null,o.type){case"script":case"style":o.children[0]&&(h.dangerouslySetInnerHTML={__html:o.children[0].data});break;case"tag":o.name==="textarea"&&o.children[0]?h.defaultValue=o.children[0].data:o.children&&o.children.length&&(f=z0(o.children,e));break;default:continue}g>1&&(h.key=m),a.push(c(s(o.name,h,f),o,m))}return a.length===1?a[0]:a}function z2(r){return bn.PRESERVE_CUSTOM_ATTRIBUTES&&r.type==="tag"&&bn.isCustomComponent(r.name,r.attribs)}var V2=z0,cl=Yh,Yi=HM,W2=H0,V0=V2;Yi=typeof Yi.default=="function"?Yi.default:Yi;var q2={lowerCaseAttributeNames:!1};function Zt(r,e){if(typeof r!="string")throw new TypeError("First argument must be a string");return r===""?[]:(e=e||{},V0(Yi(r,e.htmlparser2||q2),e))}Zt.domToReact=V0;Zt.htmlToDOM=Yi;Zt.attributesToProps=W2;Zt.Comment=cl.Comment;Zt.Element=cl.Element;Zt.ProcessingInstruction=cl.ProcessingInstruction;Zt.Text=cl.Text;var X2=Zt;Zt.default=Zt;const Vr=In(X2);var Ea=Vr.domToReact;Vr.htmlToDOM;var Su=Vr.attributesToProps;Vr.Comment;Vr.Element;Vr.ProcessingInstruction;Vr.Text;const Y2=N.forwardRef((r,e)=>{const{isLoading:t,loadingIcon:i,loadingPosition:s="left",children:n,className:a,...o}=r,l=()=>{let c;return i?c=i:c=P.jsx(bb,{...o,"aria-label":"Loading"}),c},u=_e("loading d-flex align-items-center gap-8",{"is-loading":t},a);return P.jsxs("div",{className:u,role:"status",ref:e,children:[(!s||s==="left")&&l(),n,s==="right"&&l()]})}),Q2=Y2,K2=N.forwardRef(({color:r="primary",type:e="button",size:t="md",children:i,isLoading:s,loadingIcon:n,loadingPosition:a,leftIcon:o,rightIcon:l,className:u,variant:c="filled",...d},h)=>{const f=_e("btn",{[`btn-filled btn-${r}`]:c==="filled",[`btn-${c}-${r}`]:c==="outline"||c==="ghost","btn-icon":!i,"btn-loading":s,"btn-lg":t==="lg","btn-sm":t==="sm"},u);return P.jsx("button",{ref:h,className:f,type:e,...d,children:s?P.jsx(Q2,{isLoading:!0,loadingIcon:n,loadingPosition:a,children:i}):P.jsxs("span",{children:[o,i,l]})})}),hl=K2,Z2=N.forwardRef(({icon:r,className:e,...t},i)=>{const s={...t,className:_e("btn-icon btn-sm",e)};return P.jsx(hl,{ref:i,...s,children:r})}),W0=Z2,J2=N.forwardRef(({icon:r=P.jsx(wb,{}),onClick:e,className:t,...i},s)=>{const n=_e("btn-search",t);return P.jsx(W0,{ref:s,className:n,icon:r,onClick:e,...i})}),eO=J2,tO=N.forwardRef(({type:r="success",className:e="",children:t,button:i,isDismissible:s=!1,isToast:n=!1,isConfirm:a=!1,position:o="none",autoClose:l=!1,autoCloseDelay:u=3e3,onClose:c,onVisibilityChange:d},h)=>{const[f,p]=N.useState(!0),m=N.useRef(null),{t:g}=Ot(),b=N.useCallback(()=>{p(!1),c==null||c()},[c]);N.useImperativeHandle(h,()=>({show:x,hide:b,...m.current})),N.useLayoutEffect(()=>{d==null||d(f)},[f,d]),N.useEffect(()=>{l&&f&&setTimeout(()=>{b()},u)},[l,u,b,f]);const x=()=>{p(!0)},y={success:{icon:P.jsx(Eb,{}),classModifier:"alert-success"},warning:{icon:P.jsx(ub,{}),classModifier:"alert-warning"},info:{icon:P.jsx(yb,{}),classModifier:"alert-info"},danger:{icon:P.jsx(mb,{}),classModifier:"alert-danger"}},v={"is-dismissible":s,"is-toast ":n},S={"is-confirm":a},T=_e("alert gap-12",y[r].classModifier,v,S,o,e);return P.jsx(P.Fragment,{children:f?P.jsxs("div",{ref:m,className:T,role:"alert",children:[!a&&y[r].icon,P.jsx("div",{className:"alert-content small",children:t}),i&&P.jsxs("div",{className:"ms-12",children:[i," ",a&&P.jsx(hl,{onClick:b,children:g("close")})]}),(s||a)&&P.jsx("div",{className:"btn-close-container",children:P.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":g("close"),onClick:b})}),l&&P.jsx("div",{className:"alert-progress",style:{transform:"scaleX(0)"}})]}):null})}),rO=tO;function iO({appCode:r}){return Bg({queryKey:["conf"],queryFn:async()=>await Pt.conf().getConf(r)})}function sO(){return Bg({queryKey:["session"],queryFn:async()=>await Pt.session().getSession()})}const q0=N.createContext(null);function nO({children:r,params:e}){const t=e.app,{t:i}=Ot(),s=i(t),n=sO(),a=iO({appCode:t}),o=(a==null?void 0:a.isSuccess)&&(n==null?void 0:n.isSuccess);N.useEffect(()=>{var u;[{data:"html",value:((u=n==null?void 0:n.data)==null?void 0:u.currentLanguage)||"fr"},{data:"translate",value:"no"}].forEach(c=>{var d;return(d=document.querySelector("html"))==null?void 0:d.setAttribute(c.data,c.value)})},[n==null?void 0:n.data]),N.useEffect(()=>{document.title=`${s}`},[t,n.data,s]);const l=N.useMemo(()=>{var u,c,d,h,f,p;return{appCode:t,applications:(u=a==null?void 0:a.data)==null?void 0:u.applications,confQuery:a,currentApp:(c=a==null?void 0:a.data)==null?void 0:c.currentApp,currentLanguage:(d=n==null?void 0:n.data)==null?void 0:d.currentLanguage,init:o,sessionQuery:n,user:(h=n==null?void 0:n.data)==null?void 0:h.user,userDescription:(f=n==null?void 0:n.data)==null?void 0:f.userDescription,userProfile:(p=n==null?void 0:n.data)==null?void 0:p.userProfile}},[t,a,o,n]);return P.jsx(q0.Provider,{value:l,children:r})}function Ai(){const r=N.useContext(q0);if(!r)throw new Error("Cannot be used outside of OdeClientProvider");return r}const aO=N.createContext(null);function dl(){const r=N.useContext(aO);if(!r)throw new Error("Cannot be used outside of OdeClientProvider");return r}function oO(){var r;const{sessionQuery:e}=Ai(),t=new Set;return(r=e==null?void 0:e.data)==null?void 0:r.bookmarkedApps.filter(i=>{const s=t.has(i.displayName);return t.add(i.displayName),!s})}const lO=N.createContext(null);function uO(){return N.useContext(lO)}function pi(r){const e=uO(),[t,i]=N.useState();return N.useEffect(()=>{(async()=>{let s;if(e!=null&&e.hasWorkflow)if(typeof r=="string")s=await e.hasWorkflow(r);else throw"not.implemented.yet)";else typeof r=="string"?s=await Pt.rights().sessionHasWorkflowRight(r):s=await Pt.rights().sessionHasWorkflowRights(r);i(s)})()},[r,e]),t}const cO=()=>{const r=pi("fr.openent.zimbra.controllers.ZimbraController|view"),e=pi("fr.openent.zimbra.controllers.ZimbraController|preauth"),[t,i]=N.useState(0),[s,n]=N.useState(""),a={unread:!0,_:new Date().getTime()},o=async()=>{const u=r?"/zimbra/count/INBOX":"/conversation/count/INBOX";try{const{count:c}=await Pt.http().get(u,{queryParams:a});i(c??0)}catch(c){console.error(c),i(0)}},l=async()=>{const u="/zimbra/zimbra";try{const{preference:c}=await Pt.http().get("/userbook/preference/zimbra"),d=c?JSON.parse(c).modeExpert:!1;n(d&&e?"/zimbra/preauth":window.location.origin+u)}catch(c){console.error(c),n(window.location.origin+u)}};return N.useEffect(()=>{o()},[]),N.useEffect(()=>{l()},[]),{messages:t,msgLink:s,zimbraWorkflow:r}},hO=cO;var Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var X0={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(Wr,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,o={},l=function(m){return(m=+m)+(m>68?1900:2e3)},u=function(m){return function(g){this[m]=+g}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var b=g.match(/([+-]|\d\d)/g),x=60*b[1]+(+b[2]||0);return x===0?0:b[0]==="+"?-x:x}(m)}],d=function(m){var g=o[m];return g&&(g.indexOf?g:g.s.concat(g.f))},h=function(m,g){var b,x=o.meridiem;if(x){for(var y=1;y<=24;y+=1)if(m.indexOf(x(y,0,g))>-1){b=y>12;break}}else b=m===(g?"pm":"PM");return b},f={A:[a,function(m){this.afternoon=h(m,!1)}],a:[a,function(m){this.afternoon=h(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[s,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[s,u("day")],Do:[a,function(m){var g=o.ordinal,b=m.match(/\d+/);if(this.day=b[0],g)for(var x=1;x<=31;x+=1)g(x).replace(/\[|\]/g,"")===m&&(this.day=x)}],M:[n,u("month")],MM:[s,u("month")],MMM:[a,function(m){var g=d("months"),b=(d("monthsShort")||g.map(function(x){return x.slice(0,3)})).indexOf(m)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[a,function(m){var g=d("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(m){this.year=l(m)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function p(m){var g,b;g=m,b=o&&o.formats;for(var x=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,M,I){var O=I&&I.toUpperCase();return M||b[I]||t[I]||b[O].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(R,_,C){return _||C.slice(1)})})).match(i),y=x.length,v=0;v<y;v+=1){var S=x[v],T=f[S],w=T&&T[0],E=T&&T[1];x[v]=E?{regex:w,parser:E}:S.replace(/^\[|\]$/g,"")}return function(A){for(var M={},I=0,O=0;I<y;I+=1){var R=x[I];if(typeof R=="string")O+=R.length;else{var _=R.regex,C=R.parser,D=A.slice(O),k=_.exec(D)[0];C.call(M,k),A=A.replace(k,"")}}return function(L){var B=L.afternoon;if(B!==void 0){var F=L.hours;B?F<12&&(L.hours+=12):F===12&&(L.hours=0),delete L.afternoon}}(M),M}}return function(m,g,b){b.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var x=g.prototype,y=x.parse;x.parse=function(v){var S=v.date,T=v.utc,w=v.args;this.$u=T;var E=w[1];if(typeof E=="string"){var A=w[2]===!0,M=w[3]===!0,I=A||M,O=w[2];M&&(O=w[2]),o=this.$locale(),!A&&O&&(o=b.Ls[O]),this.$d=function(D,k,L){try{if(["x","X"].indexOf(k)>-1)return new Date((k==="X"?1e3:1)*D);var B=p(k)(D),F=B.year,U=B.month,$=B.day,z=B.hours,q=B.minutes,K=B.seconds,ue=B.milliseconds,se=B.zone,ge=new Date,de=$||(F||U?1:ge.getDate()),re=F||ge.getFullYear(),le=0;F&&!U||(le=U>0?U-1:ge.getMonth());var pe=z||0,ve=q||0,Me=K||0,We=ue||0;return se?new Date(Date.UTC(re,le,de,pe,ve,Me,We+60*se.offset*1e3)):L?new Date(Date.UTC(re,le,de,pe,ve,Me,We)):new Date(re,le,de,pe,ve,Me,We)}catch{return new Date("")}}(S,E,T),this.init(),O&&O!==!0&&(this.$L=this.locale(O).$L),I&&S!=this.format(E)&&(this.$d=new Date("")),o={}}else if(E instanceof Array)for(var R=E.length,_=1;_<=R;_+=1){w[1]=E[_-1];var C=b.apply(this,w);if(C.isValid()){this.$d=C.$d,this.$L=C.$L,this.init();break}_===R&&(this.$d=new Date(""))}else y.call(this,v)}}})})(X0);var dO=X0.exports;const fO=nd(dO);var Y0={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(Wr,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(i,s,n){var a=s.prototype,o=a.format;n.en.formats=t,a.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,c=function(d,h){return d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(f,p,m){var g=m&&m.toUpperCase();return p||h[m]||t[m]||h[g].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(b,x,y){return x||y.slice(1)})})}(l,u===void 0?{}:u);return o.call(this,c)}}})})(Y0);var pO=Y0.exports;const mO=nd(pO);var Q0={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(Wr,function(){return function(t,i,s){t=t||{};var n=i.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(u,c,d,h){return n.fromToBase(u,c,d,h)}s.en.relativeTime=a,n.fromToBase=function(u,c,d,h,f){for(var p,m,g,b=d.$locale().relativeTime||a,x=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=x.length,v=0;v<y;v+=1){var S=x[v];S.d&&(p=h?s(u).diff(d,S.d,!0):d.diff(u,S.d,!0));var T=(t.rounding||Math.round)(Math.abs(p));if(g=p>0,T<=S.r||!S.r){T<=1&&v>0&&(S=x[v-1]);var w=b[S.l];f&&(T=f(""+T)),m=typeof w=="string"?w.replace("%d",T):w(T,c,S.l,g);break}}if(c)return m;var E=g?b.future:b.past;return typeof E=="function"?E(m):E.replace("%s",m)},n.to=function(u,c){return o(u,c,this,!0)},n.from=function(u,c){return o(u,c,this)};var l=function(u){return u.$u?s.utc():s()};n.toNow=function(u){return this.to(l(this),u)},n.fromNow=function(u){return this.from(l(this),u)}}})})(Q0);var gO=Q0.exports;const yO=nd(gO);var vO={exports:{}};(function(r,e){(function(t,i){r.exports=i(jr)})(Wr,function(t){function i(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var s=i(t),n={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function a(l,u,c){var d=n[c];return Array.isArray(d)&&(d=d[u?0:1]),d.replace("%d",l)}var o={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(l){return l+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a}};return s.default.locale(o,null,!0),o})})(vO);var bO={exports:{}};(function(r,e){(function(t,i){r.exports=i(jr)})(Wr,function(t){function i(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=i(t),n={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(a){return a+"º"}};return s.default.locale(n,null,!0),n})})(bO);var xO={exports:{}};(function(r,e){(function(t,i){r.exports=i(jr)})(Wr,function(t){function i(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=i(t),n={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(a){return""+a+(a===1?"er":"")}};return s.default.locale(n,null,!0),n})})(xO);var _O={exports:{}};(function(r,e){(function(t,i){r.exports=i(jr)})(Wr,function(t){function i(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=i(t),n={name:"it",weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"qualche secondo",m:"un minuto",mm:"%d minuti",h:"un' ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:function(a){return a+"º"}};return s.default.locale(n,null,!0),n})})(_O);var wO={exports:{}};(function(r,e){(function(t,i){r.exports=i(jr)})(Wr,function(t){function i(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=i(t),n={name:"pt",weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sab".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sa".split("_"),months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(a){return a+"º"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},relativeTime:{future:"em %s",past:"há %s",s:"alguns segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"}};return s.default.locale(n,null,!0),n})})(wO);jr.extend(yO);jr.extend(fO);jr.extend(mO);const ym=["mousedown","touchstart"];function SO(r,e,t){const i=N.useRef();return N.useEffect(()=>{const s=n=>{const{target:a}=n??{};if(Array.isArray(t)){const o=(a==null?void 0:a.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(a)&&a.tagName!=="HTML";t.every(l=>!!l&&!n.composedPath().includes(l))&&!o&&r()}else i.current&&!i.current.contains(a)&&r()};return(e||ym).forEach(n=>{document.addEventListener(n,s)}),()=>{(e||ym).forEach(n=>{document.removeEventListener(n,s)})}},[i,r,t,e]),i}function K0(){const[r,e]=N.useState(!1),t=N.useRef(null),i=()=>{e(!0)},s=()=>{e(!1)};return N.useEffect(()=>{const n=t.current;if(n)return n.addEventListener("mouseover",i),n.addEventListener("mouseout",s),()=>{n.removeEventListener("mouseover",i),n.removeEventListener("mouseout",s)}},[t]),[t,r]}function EO({src:r,placeholder:e}){const[t,i]=N.useState(r||e),s=N.useCallback(()=>{i(e)},[e]);return N.useEffect(()=>{i(r)},[r]),{imgSrc:t,onError:s}}function TO(r,e){const t=N.useCallback(({code:i})=>{e.includes(i)&&r()},[r,e]);N.useEffect(()=>(window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}),[t])}function AO(){const r=N.useRef(null),e='button:not([disabled]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';return N.useEffect(()=>{const t=r.current,i=t.querySelectorAll(e)[0],s=t.querySelectorAll(e),n=r&&(s==null?void 0:s[s.length-1]),a=o=>{o.key==="Tab"&&(o.shiftKey?document.activeElement===i&&(n.focus(),o.preventDefault()):document.activeElement===n&&(i.focus(),o.preventDefault()))};if(t)return t.addEventListener("keydown",a),()=>{t.removeEventListener("keydown",a)}},[]),r}function CO({user:r,avatar:e}){const{appCode:t}=Ai(),{t:i}=Ot(),s=i(t),[n,a]=N.useState(!0),[o,l]=K0(),u=N.useId(),c=N.useId(),d=e,h=r==null?void 0:r.username,f=i("welcome",{username:r==null?void 0:r.firstName}),p=oO(),m=pi("net.atos.entng.community.controllers.CommunityController|view"),g=pi("org.entcore.conversation.controllers.ConversationController|view"),b=pi("fr.openent.searchengine.controllers.SearchEngineController|view"),x=N.useCallback(()=>{a(!n)},[n]),y=async()=>{await Pt.session().logout(),window.location.href="/auth/login"};return N.useMemo(()=>({title:s,bookmarkedApps:p,appsRef:o,isAppsHovered:l,popoverAppsId:u,popoverSearchId:c,userAvatar:d,userName:h,welcomeUser:f,communityWorkflow:m,conversationWorflow:g,searchWorkflow:b,isCollapsed:n,toggleCollapsedNav:x,handleLogout:y}),[o,p,m,g,l,n,u,c,b,s,x,d,h,f])}function PO(){const[r,e]=N.useState(!1);N.useEffect(()=>{t()},[]);const t=N.useCallback(async()=>{const i=await Pt.session().isAdml();e(i)},[]);return{isAdml:r}}function RO(){const r={"last-infos-widget":"ic-widget-actualites",birthday:"ic-star","calendar-widget":"ic-widget-calendar","carnet-de-bord":"ic-widget-carnet-de-bord","record-me":"ic-widget-microphone",mood:"ic-star","my-apps":"ic-widget-apps",notes:"ic-widget-notes","rss-widget":"ic-widget-rss","bookmark-widget":"ic-widget-signets",qwant:"ic-widget-qwant","qwant-junior":"ic-widget-qwant","agenda-widget":"ic-widget-agenda","cursus-widget":"ic-widget-aide-devoirs","maxicours-widget":"ic-widget-maxicours","school-widget":"ic-widget-schoolbook","universalis-widget":"ic-widget-universalis","briefme-widget":"ic-widget-briefme"};function e(o){let l="";switch(typeof o=="string"?l=o:l=(o==null?void 0:o.icon)!==void 0?o==null?void 0:o.icon.trim().toLowerCase():"placeholder",l&&l.length>0?l.endsWith("-large")&&(l=l.replace("-large","")):typeof o=="object"&&(l=(o==null?void 0:o.displayName)!==void 0?o==null?void 0:o.displayName.trim().toLowerCase():""),l){case"admin.title":l="admin";break;case"banques des savoirs":l="banquesavoir";break;case"collaborativewall":l="collaborative-wall";break;case"communautés":l="community";break;case"directory.user":l="userbook";break;case"emploi du temps":l="edt";break;case"formulaire":l="forms";break;case"messagerie":l="conversation";break;case"news":l="actualites";break;case"homeworks":case"cahier de texte":l="cahier-de-texte";break;case"diary":case"cahier de texte 2d":l="cahier-textes";break}return l}function t(o){return o&&(o.startsWith("/")||o.startsWith("http://")||o.startsWith("https://"))}function i(o){const l=e(o);return l?`color-app-${l}`:"color-app-placeholder"}function s(o){const l=e(o);return l?`bg-app-${l}`:"bg-app-placeholder"}function n(o){const l=e(o);return l?`bg-light-${l}`:"bg-light-placeholder"}function a(o){return r[o.platformConf.name]}return{getIconClass:i,getBackgroundIconClass:s,getBackgroundLightIconClass:n,getIconCode:e,getWidgetIconClass:a,isIconUrl:t}}function fl(){return["/assets/themes/edifice-bootstrap/images","/assets/themes/edifice-bootstrap/icons","/assets/themes/edifice-bootstrap/fonts"]}function Z0(){const{user:r,userDescription:e}=Ai(),{theme:t}=dl();function i(){let s=e==null?void 0:e.picture;return(!s||s==="no-avatar.jpg"||s==="no-avatar.svg")&&(s=`${t==null?void 0:t.basePath}/img/illustrations/no-avatar.svg`),s}return{user:r,avatar:i(),userDescription:e}}function IO(){const{currentLanguage:r}=Ai(),{userDescription:e}=Z0(),{isAdml:t}=PO(),{theme:i}=dl(),s=window.innerWidth<=768,n=pi("net.atos.entng.support.controllers.DisplayController|view"),[a,o]=N.useState(""),[l,u]=N.useState(void 0),c=()=>{const d=a.split("/");let h="",f="";if(l!=null&&l.labels&&Object.keys(l==null?void 0:l.labels).length>0&&d.length>1){for(let p=1;p<d.length;p++)d[p].length>0&&d[p].match(/\d/)==null&&(h.length===0?h=d[p]:h=h+"/"+d[p]);l!=null&&l.labels&&Object.prototype.hasOwnProperty.call(l==null?void 0:l.labels,h)?f=l==null?void 0:l.labels[h]:l!=null&&l.default&&String(l.default).length>0&&(f=l==null?void 0:l.default)}else l!=null&&l.default&&String(l==null?void 0:l.default).length>0&&(f=l==null?void 0:l.default);if(d.includes("collaborativewall")&&d.includes("id")&&s&&window.zE("webWidget","hide"),f.includes("${adml}")&&(t?f=f.replace("${adml}","adml"):f=f.replace("/${adml}","")),f.includes("${profile}")){const p=e==null?void 0:e.profiles;f=f.replace("${profile}",p[0].toLowerCase())}f.includes("${theme")&&(i!=null&&i.is1d?f=f.replace("${theme}","1D"):f=f.replace("${theme}","2D")),window.zE("webWidget","helpCenter:setSuggestions",{labels:[f]})};return N.useEffect(()=>{window.location.pathname!==a&&o(window.location.pathname),!(l===void 0||Object.keys(l).length===0)&&c()},[window.location.pathname,l]),N.useEffect(()=>{document.getElementById("ze-snippet")||n===void 0||(async()=>{const d=await Pt.http().get("/zendeskGuide/config");if(d&&d.key&&d.key!==""){const h=document.createElement("script");h.id="ze-snippet",h.src=`https://static.zdassets.com/ekr/snippet.js?key=${d.key}`,document.body.appendChild(h).onload=()=>{r==="es"?window.zE(function(){window.zE.setLocale("es-419")}):window.zE(function(){window.zE.setLocale("fr")}),Object.keys(d.module).length>0&&u(d.module),window.zE("webWidget","show"),window.zE("webWidget","updateSettings",{webWidget:{color:{theme:d.color||"#ffc400"},zIndex:3,launcher:{mobile:{labelVisible:!0}},contactForm:{suppress:!n},helpCenter:{messageButton:{"*":"Assistance ENT","es-419":"Asistencia ENT"}}}}),window.addEventListener("scroll",()=>{window.zE("webWidget","updateSettings",{webWidget:{launcher:{mobile:{labelVisible:window.scrollY<=5}}}})}),window.zE("webWidget:on","open",function(){n&&window.zE("webWidget","updateSettings",{webWidget:{contactForm:{suppress:!1}}})}),window.zE("webWidget:on","userEvent",function(f){const p=f.category,m=f.action,g=f.properties;m==="Contact Form Shown"&&p==="Zendesk Web Widget"&&g&&g.name==="contact-form"&&n&&(window.zE("webWidget","updateSettings",{webWidget:{contactForm:{suppress:!0}}}),window.zE("webWidget","close"),window.open("/support","_blank"))})}}})()},[n]),null}const MO=N.forwardRef(({src:r,alt:e,imgPlaceholder:t,ratio:i,objectFit:s,className:n,...a},o)=>{const[l]=fl(),u=t??`${l}/common/image-placeholder.png`,{imgSrc:c,onError:d}=EO({src:r,placeholder:u}),h={"ratio ratio-1x1":i==="1","ratio ratio-4x3":i==="4","ratio ratio-16x9":i==="16","ratio ratio-21x9":i==="21"},f={"object-fit-contain":s==="contain","object-fit-cover":s==="cover","object-fit-fill":s==="fill","object-fit-scale":s==="scale","object-fit-none":s==="none"},p=_e({...h}),m=_e({...f},n),g=P.jsx("img",{alt:e,onError:d,ref:o,src:c,className:m,...a});return i?P.jsx("div",{className:p,children:g}):g}),J0=MO,OO=N.forwardRef(({app:r,size:e="24",iconFit:t="contain",variant:i="square",className:s=""},n)=>{const{isIconUrl:a,getIconCode:o}=RO(),[,l]=fl(),u=i==="square",c=i==="rounded",d=i==="circle",h=t==="contain",f=t==="ratio",p={"icon-xs":e==="24","icon-sm":e==="40","icon-md":e==="48","icon-lg":e==="80","icon-xl":e==="160"},m={square:u,rounded:c,"rounded-circle":d},g={"icon-contain":h,"icon-ratio":f},b=typeof r=="string"?r:(r==null?void 0:r.icon)!==void 0?r.icon:"placeholder",x=typeof r!="string"&&(r==null?void 0:r.displayName)!==void 0?r.displayName:"",y=r?o(r):"",v=a(b),S=y||"placeholder";if(v){const w=_e("h-full",s);return P.jsx(J0,{src:b,alt:x,objectFit:"contain",width:e,height:e,className:w})}const T=_e("app-icon",{...p,...m,...g,[`bg-light-${S}`]:S&&!h,[`color-app-${S}`]:S},s);return P.jsx("div",{className:T,style:{width:e+"px",height:e+"px"},children:P.jsx("svg",{ref:n,width:e,height:e,role:"img",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:P.jsx("use",{xlinkHref:`${l}/apps.svg#${S}`})})})}),DO=OO,e1=N.createContext({ariaLabelId:"",ariaDescriptionId:"",focusId:""}),t1=()=>{const r=N.useContext(e1);if(!r)throw new Error("Cannot be rendered outside the Modal component");return r},LO=r=>{const{ariaDescriptionId:e}=t1(),{children:t,className:i}=r,s=_e("modal-body",i);return P.jsx("div",{id:e,className:s,children:t})},NO=LO,FO=r=>P.jsx("div",{className:"modal-footer",children:r.children}),kO=FO,BO=r=>{const{onModalClose:e,children:t}=r,{ariaLabelId:i,focusId:s}=t1(),n=N.useRef(null),{t:a}=Ot();return N.useEffect(()=>{var o;s||(o=n.current)==null||o.focus()},[s]),P.jsxs("div",{className:"modal-header",children:[P.jsx("h2",{id:i,className:"modal-title",tabIndex:-1,children:t}),P.jsx(W0,{ref:n,"aria-label":a("close"),color:"tertiary",icon:P.jsx(fb,{}),type:"button",variant:"ghost",title:a("close"),onClick:e,className:"btn-close"})]})},UO=BO,jO=r=>P.jsx("p",{className:"modal-subtitle",children:r.children}),$O=jO,GO=N.forwardRef((r,e)=>{const{id:t,isOpen:i,onModalClose:s,size:n="md",viewport:a=!1,scrollable:o=!1,focusId:l,children:u}=r,c=`aria_label_${t}`,d=`aria_desc_${t}`,h=SO(s),f=AO();TO(s,["Escape"]),N.useEffect(()=>{if(i&&(document.body.style.overflow="hidden",l)){const x=document.getElementById(l);x==null||x.focus()}return()=>{document.body.style.overflow=""}},[l,i]);const p=_e("modal fade",{"show d-block":i,"modal-scrollable":o,viewport:a,[`modal-${n}`]:n}),m=_e("modal-dialog"),g={ariaLabelId:c,ariaDescriptionId:d,focusId:l},b=a0(i,{from:{x:-50,opacity:0},enter:{x:0,opacity:1},leave:{x:50,opacity:0}});return P.jsx(e1.Provider,{value:g,children:b((x,y)=>P.jsxs(P.Fragment,{children:[y&&P.jsx(qc.div,{id:t,ref:e,role:"dialog","aria-modal":"true","aria-labelledby":c,"aria-describedby":d,className:p,style:x,tabIndex:-1,children:P.jsx("div",{id:`${t}_ref`,ref:v=>{h.current=v,y&&(f.current=v)},className:m,children:P.jsx("div",{className:"modal-content",children:u})})}),y&&P.jsx(qc.div,{className:"modal-backdrop fade show",style:{opacity:.65}})]}))})}),HO=Object.assign(GO,{Header:UO,Subtitle:$O,Body:NO,Footer:kO}),Ta=HO,zO=N.forwardRef(({variant:r="square",size:e="md",alt:t,src:i,imgPlaceholder:s,className:n,...a},o)=>{const[l]=fl(),u=s||`${l}/avatar/no-avatar.svg`,c=_e("avatar",{"avatar-xs":e==="xs","avatar-sm":e==="sm","avatar-md":e==="md","avatar-lg":e==="lg","avatar-xl":e==="xl",square:r==="square",rounded:r==="rounded","rounded-circle":r==="circle"},n);return P.jsx("div",{ref:o,className:c,children:P.jsx(J0,{src:i||u,alt:t,imgPlaceholder:u,...a})})}),vm=zO,r1=N.createContext(null),ad=()=>{const r=N.useContext(r1);if(!r)throw new Error("Cannot be rendered outside the FormControl component");return r},VO=({children:r})=>{const{status:e}=ad(),t=_e("form-text",{"is-invalid":e==="invalid",valid:e==="valid"});return P.jsx("p",{className:t,children:P.jsx("em",{children:r})})},WO=VO,qO=N.forwardRef(({noValidationIcon:r,placeholder:e,size:t="md",type:i="text",className:s,...n},a)=>{const{id:o,isRequired:l,isReadOnly:u,status:c}=ad(),d=_e({"form-control":!u,"form-control-lg":t==="lg","form-control-sm":t==="sm","is-invalid":c==="invalid","is-valid":c==="valid","form-control-plaintext":u,"no-validation-icon":r},s);return P.jsx("input",{ref:a,id:o,className:d,type:i,placeholder:e,required:l,readOnly:u,...n})}),XO=qO,YO=N.forwardRef(({leftIcon:r,optionalText:e,requiredText:t="*",children:i,className:s},n)=>{const{id:a,isOptional:o,isRequired:l}=ad(),{t:u}=Ot(),c=_e("form-label",{"has-icon":r},s),d=o&&!l,h=l&&!o;return N.useEffect(()=>{if(o&&l)throw new Error("Cannot be optional and required at the same time")},[o,l]),P.jsxs("label",{ref:n,htmlFor:a,className:c,children:[r,i,d&&P.jsxs("em",{className:"optional",children:["- ",e??u("explorer.optional")]}),h&&P.jsx("em",{className:"required",children:t})]})}),QO=YO,KO=N.forwardRef(({children:r,className:e,id:t,isOptional:i,isReadOnly:s,isRequired:n,status:a,...o},l)=>{const u=N.useMemo(()=>({id:t,isOptional:i,isRequired:n,isReadOnly:s,status:a}),[t,i,s,n,a]);return P.jsx(r1.Provider,{value:u,children:P.jsx("div",{ref:l,className:e,...o,children:r})})}),ZO=Object.assign(KO,{Label:QO,Input:XO,Text:WO}),bm=ZO,JO=N.forwardRef(({position:r=!0,caption:e},t)=>{const[i]=fl(),s=`${i}/loading/screen-loading.gif`,n=_e("top-0 end-0 start-0 bottom-0 d-grid justify-content-center align-content-center align-items-center z-2000",{"position-fixed":!r,"position-static":r}),a=_e("text-center pt-12",{"text-white":!r});return P.jsxs(P.Fragment,{children:[P.jsxs("div",{ref:t,className:n,children:[P.jsx("div",{className:"bg-white rounded-circle mx-auto w-25",children:P.jsx("img",{src:s,alt:"loading"})}),e&&P.jsx("div",{className:a,children:e})]}),!r&&P.jsx("div",{className:"modal-backdrop fade show"})]})}),eD=JO,tD=N.forwardRef(({src:r,is1d:e,translate:t="Retour accueil"},i)=>{const s=_e("navbar-brand d-none d-md-block");return P.jsx("a",{ref:i,className:s,href:"/timeline/timeline","aria-label":t,children:P.jsx("img",{className:"logo",src:r,alt:`logo ${e?"ONE":"NEO"}`,width:"300",height:"52"})})}),xm=tD,rD=({children:r,className:e})=>{const t=_e("popover-body",e);return P.jsx("div",{className:t,children:r})},iD=({children:r,className:e})=>{const t=_e("popover-footer p-8",e);return P.jsx("div",{className:t,children:r})},i1=N.forwardRef(({children:r,className:e,id:t,isVisible:i,...s},n)=>{const a=_e("popover d-block position-absolute top-100 start-50 translate-middle-x",e);return a0(i,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:0}})((o,l)=>l&&P.jsx(qc.div,{ref:n,"aria-labelledby":t,className:a,role:"tooltip",style:o,...s,children:r}))}),sD=N.forwardRef(({children:r},e)=>P.jsx("span",{className:"visually-hidden",ref:e,children:r})),Hs=sD;var s1={};Object.defineProperty(s1,"__esModule",{value:!0});const nD=r=>{const e="ÀÁÂÃÄÅĄĀàáâãäåąāÒÓÔÕÕÖØòóôõöøÈÉÊËĘĒèéêëðęēÇĆČçćčÐÌÍÎÏĪìíîïīÙÚÛÜŪùúûüūÑŅñņŠŚšśŸÿýŽŹŻžźżŁĻłļŃŅńņàáãảạăằắẳẵặâầấẩẫậèéẻẽẹêềếểễệđùúủũụưừứửữựòóỏõọôồốổỗộơờớởỡợìíỉĩịäëïîüûñçýỳỹỵỷğışĞİŞĢģĶķ",t="AAAAAAAAaaaaaaaaOOOOOOOooooooEEEEEEeeeeeeeCCCcccDIIIIIiiiiiUUUUUuuuuuNNnnSSssYyyZZZzzzLLllNNnnaaaaaaaaaaaaaaaaaeeeeeeeeeeeduuuuuuuuuuuoooooooooooooooooiiiiiaeiiuuncyyyyygisGISGgKk",i=e.split("").join("|"),s=new RegExp(`(${i})`,"g");function n(a){return t[e.indexOf(a)]||""}return r.replace(s,n)},aD=r=>r.split("").map(e=>`\\${e}`).join(""),_m=(r,e,t=!1)=>{const i=nD(r).trim().toLowerCase(),s=aD(e);return t?i.replace(/\s+/g,e):i.replace(new RegExp(`[^a-z0-9${s}]+`,"g"),e).replace(new RegExp(`${s}+`,"g"),e).replace(new RegExp(`^${s}`,"g"),"").replace(new RegExp(`${s}$`,"g"),"")},zs=(r,e={delimiter:"-",prefix:""})=>{if(e.delimiter||(e.delimiter="-"),e.prefix||(e.prefix=""),!r||typeof r=="boolean")return"";const{delimiter:t,prefix:i}=e;if(typeof r=="boolean")return"";if(typeof r=="string"||typeof r=="number"){const s=_m(i,t,!0),n=_m(String(r),t);return s?`${s}${t}${n}`:n}return"children"in r?zs(r.children):"type"in r?zs(r.props.children,e):Symbol.iterator in r?zs(Array.from(r).map(s=>zs(s,{delimiter:t})).join(t),e):""};s1.default=zs;function oD(r){return{getPreference:async()=>await Pt.conf().getPreference(r),savePreference:async e=>await Pt.conf().savePreference(r,JSON.stringify(e))}}function lD(){const[r,e]=N.useState(!1),{getPreference:t,savePreference:i}=oD("rgpdCookies");return N.useEffect(()=>{(async()=>{const s=await t();e(s===null?!0:s.showInfoTip)})()},[]),{showCookiesConsent:r,handleConsultCookies:()=>{document.location.href="/userbook/mon-compte",i({showInfoTip:!1}),e(!1)},handleCloseCookiesConsent:()=>{i({showInfoTip:!1}),e(!1)}}}function Eu({children:r}){return P.jsx("span",{className:"position-absolute badge rounded-pill bg-warning",children:r})}function Tu({children:r,className:e,...t}){const i=_e("navbar",e);return P.jsx("nav",{className:i,...t,children:r})}function wm({children:r,className:e,...t}){const i=_e("navbar-nav",e);return P.jsx("ul",{className:i,...t,children:r})}const Ne=N.forwardRef(({children:r,className:e,...t},i)=>{const s=_e("nav-item",e);return P.jsx("li",{ref:i,className:s,...t,children:r})});function Cs({link:r,className:e,children:t,translate:i,...s}){const n=_e("nav-link",e);return P.jsxs("a",{href:r,className:n,...s,children:[t,i&&P.jsx(Hs,{children:P.jsx("span",{className:"nav-text",children:i})})]})}const uD=()=>{const{t:r}=Ot();return P.jsx("div",{className:"widget-footer",children:P.jsx("div",{className:"widget-footer-action",children:P.jsx("a",{href:"/welcome",className:"link",children:r("plus")})})})},cD=({bookmarkedApps:r})=>{const{t:e}=Ot();return P.jsxs("div",{className:"widget-body d-flex flex-wrap",children:[!r.length&&P.jsx("div",{className:"text-dark",children:e("navbar.myapps.more")}),r.slice(0,6).map((t,i)=>P.jsx("a",{href:t.address,className:"bookmarked-app",children:P.jsx(DO,{app:t,size:"32"})},i))]})};function Sm({isHelpOpen:r,setIsHelpOpen:e,parsedHeadline:t,parsedContent:i,error:s}){const{t:n}=Ot(),a=()=>{e(!1)};return r?fh.createPortal(P.jsxs(Ta,{id:"help-modal",isOpen:r,onModalClose:a,scrollable:!0,size:"lg",children:[P.jsx(Ta.Header,{onModalClose:a,children:n("navbar.help")}),P.jsx(Ta.Subtitle,{children:s?n("help.notfound.title"):t}),P.jsx(Ta.Body,{className:s?"d-flex":null,children:s?n("help.notfound.text"):i})]}),document.getElementById("portal")):null}function hD(){var r,e,t,i,s;const{appCode:n}=Ai(),{theme:a}=dl(),[o,l]=N.useState(""),[u,c]=N.useState(!0),[d,h]=N.useState(!1),[f,p]=N.useState(!1),m=a!=null&&a.is1d?"/help-1d":"/help-2d";N.useEffect(()=>{(async()=>{let y="";y=m+"/application/"+n+"/",!n&&window.location.pathname!=="/adapter"?y=m+"/application/portal/":window.location.pathname==="/adapter"?y=m+"/application/"+window.location.search.split("eliot=")[1].split("&")[0]+"/":window.location.pathname.includes("/directory/class-admin")?y=m+"/application/parametrage-de-la-classe/":(window.location.pathname.includes("/userbook/mon-compte")||window.location.pathname.includes("/timeline/preferencesView")||window.location.pathname.includes("/timeline/historyView"))&&(y=m+"/application/userbook/");try{const v=await fetch(y),S=await v.text();if(v.status===404){p(!0);return}l(S),p(!1)}catch(v){p(!0),console.error(v)}})()},[n,m]);const g=Vr(o,{replace:y=>{const v=y;if(v.attribs&&v.attribs.id==="TOC")return P.jsxs("nav",{id:"TOC",children:[P.jsx(hl,{onClick:()=>{c(!u)},children:P.jsx(hb,{})}),Ea(v.children,{replace:S=>{const T=S;if(T.attribs&&T.name==="ul")return P.jsx("ul",{id:"TOC-list",style:{display:u?"block":"none"},children:Ea(T.children,{replace:w=>{const E=w;if(E.attribs&&E.name==="a")return P.jsx("a",{...Su(E.attribs),children:P.jsx("span",{onClick:()=>{c(!1)},children:Ea(E.children)})})}})})}})]});if(v.attribs&&v.attribs.class==="section level2"){const S=Su(y.attribs);return P.jsx("div",{...S,className:"section level2",style:{display:v.attribs.id!=="présentation"?"none":"block"},children:Ea(v.children,{replace:T=>{const w=T;if(w.attribs&&w.name==="img"){const E=T.attribs.src;return P.jsx("img",{...Su(w.attribs),src:`${m}/${E}`,alt:""})}}})})}}}),b=(t=(e=(r=g==null?void 0:g.props)==null?void 0:r.children.find(y=>y.type==="body"))==null?void 0:e.props)==null?void 0:t.children,x=(s=(i=b==null?void 0:b.find(y=>y.type==="p"))==null?void 0:i.props)==null?void 0:s.children;return{html:o,visibility:u,isModalOpen:d,setIsModalOpen:h,parsedContent:b,parsedHeadline:x,error:f}}const dD=()=>{const[r,e]=K0(),t=N.useRef(null),i=N.useId(),{t:s}=Ot();function n(){if(t.current){const a=t.current.value;window.location.href=`/searchengine#/${a}`}}return P.jsxs(Ne,{id:i,ref:r,className:"position-relative","aria-haspopup":"true","aria-expanded":e,children:[P.jsxs("a",{href:"/searchengine",className:"nav-link dropdown-item",children:[P.jsx(Xx,{className:"icon search"}),P.jsx("span",{className:"nav-text",children:s("navbar.search")})]}),P.jsx(i1,{id:i,isVisible:e,className:"d-none d-md-flex",children:P.jsxs(bm,{id:"my-search-input",className:"search-text input-group py-8 px-12",children:[P.jsx(bm.Input,{ref:t,size:"sm",type:"text",name:"my-search-input",placeholder:"Rechercher"}),P.jsx(eO,{type:"submit",size:"sm",onClick:n,"aria-label":s("navbar.search")})]})})]})},fD=dD,pD=({is1d:r=!1,src:e=""})=>{const{t}=Ot(),{messages:i,msgLink:s,zimbraWorkflow:n}=hO(),{user:a,avatar:o}=Z0(),{currentLanguage:l,currentApp:u}=Ai(),c=pi("org.entcore.portal.controllers.PortalController|oldHelpEnable")||!1,{isModalOpen:d,setIsModalOpen:h,parsedContent:f,parsedHeadline:p,error:m}=hD(),g=_e("header",{"no-2d":r,"no-1d":!r}),{title:b,bookmarkedApps:x,appsRef:y,isAppsHovered:v,popoverAppsId:S,userAvatar:T,userName:w,welcomeUser:E,communityWorkflow:A,conversationWorflow:M,searchWorkflow:I,isCollapsed:O,toggleCollapsedNav:R,handleLogout:_}=CO({user:a,avatar:o}),C=i>0;return P.jsx("header",{className:g,children:r?P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"container-fluid",children:P.jsxs(Tu,{children:[P.jsx("a",{className:"navbar-title d-md-none text-truncate h4",href:u?u.address:"/timeline/timeline",children:b}),P.jsxs("div",{className:"d-none d-md-inline-flex gap-12 align-items-center",children:[P.jsx(vm,{alt:w,size:"sm",src:T,variant:"circle",width:"32",height:"32"}),P.jsx("span",{className:"navbar-text",children:E})]}),P.jsxs(wm,{className:"gap-8","aria-hidden":"false","aria-label":t("navbar.main.navigation"),children:[M&&P.jsx(Ne,{children:P.jsxs("a",{href:"/conversation/conversation",className:"nav-link",children:[P.jsx(zx,{className:"icon notification"}),C&&P.jsx(Eu,{children:i}),P.jsx(Hs,{children:t("navbar.messages")})]})}),P.jsx(Ne,{children:P.jsx(Cs,{link:"/userbook/mon-compte",className:"dropdown-item",translate:t("navbar.myaccount"),children:P.jsx(Wx,{className:"icon user"})})}),l==="fr"&&c?P.jsxs(Ne,{children:[P.jsxs("button",{className:"nav-link",onClick:()=>{h(!0)},children:[P.jsx(Gx,{className:"icon help"}),P.jsx(Hs,{children:t("navbar.help")})]}),P.jsx(Sm,{isHelpOpen:d,setIsHelpOpen:h,parsedContent:f,parsedHeadline:p,error:m})]}):null,P.jsx(Ne,{children:P.jsxs("button",{className:"nav-link",onClick:_,children:[P.jsx(Ud,{className:"icon logout"}),P.jsx(Hs,{children:t("navbar.disconnect")})]})}),P.jsx(Ne,{className:"d-md-none",children:P.jsx("button",{className:"nav-link btn btn-naked",type:"button","aria-controls":"navbarCollapsed","aria-expanded":!O,"aria-label":t("navbar.secondary.navigation"),onClick:R,children:P.jsx(Ed,{className:"icon rafter-down",width:"20",height:"20"})})})]})]})}),P.jsx(Tu,{className:"no-2d navbar-secondary navbar-expand-md","aria-label":t("navbar.secondary.navigation"),children:P.jsx("div",{className:"container-fluid",children:P.jsxs("div",{className:`collapse navbar-collapse ${O?"":"show"}`,id:"navbarCollapsed",children:[P.jsx(xm,{is1d:!0,src:`${e}/img/illustrations/logo.png`,translate:t("navbar.home")}),P.jsxs(wm,{className:"gap-8",children:[P.jsx(Ne,{children:P.jsxs("a",{href:"/timeline/timeline",className:"button",children:[P.jsx(jx,{color:"#fff",className:"d-md-none"}),P.jsx("span",{className:"d-inline-block",children:t("portal.header.navigation.whatsnew")})]})}),P.jsx(Ne,{children:P.jsxs("a",{href:"/userbook/annuaire",className:"button",children:[P.jsx(Qx,{color:"#fff",className:"d-md-none"}),P.jsx("span",{className:"d-inline-block",children:t("portal.header.navigation.classMembers")})]})}),P.jsx(Ne,{children:P.jsxs("a",{href:"/welcome",className:"button",children:[P.jsx(jd,{color:"#fff",className:"d-md-none"}),P.jsx("span",{className:"d-inline-block",children:t("portal.header.navigation.myapps")})]})})]})]})})})]}):P.jsx(Tu,{className:"navbar-expand-md",children:P.jsxs("div",{className:"container-fluid",children:[P.jsx(xm,{src:`${e}/img/illustrations/logo.png`}),P.jsx("a",{href:u?u.address:"/timeline/timeline",className:"navbar-title text-truncate d-md-none",children:b}),P.jsxs("ul",{className:"navbar-nav",children:[P.jsx(Ne,{children:P.jsx(Cs,{link:"/timeline/timeline",translate:t("navbar.home"),children:P.jsx(Lx,{color:"#fff"})})}),P.jsxs(Ne,{className:"position-relative",ref:y,id:S,"aria-haspopup":"true","aria-expanded":v,children:[P.jsx(Cs,{link:"/welcome",translate:t("navbar.applications"),children:P.jsx(jd,{color:"#fff"})}),P.jsxs(i1,{className:"top-100 widget",id:S,isVisible:v,children:[P.jsx(rD,{children:P.jsx(cD,{bookmarkedApps:x})}),P.jsx(iD,{className:"widget-footer border-top border-ghost",children:P.jsx(uD,{})})]})]}),M&&P.jsx(Ne,{children:P.jsxs(Cs,{className:"position-relative",link:"/conversation/conversation",translate:t("conversation"),children:[P.jsx($d,{color:"#fff"}),C&&P.jsx(Eu,{children:i})]})}),n&&P.jsx(Ne,{children:P.jsxs(Cs,{className:"position-relative",link:s,translate:t("conversation"),children:[P.jsx($d,{color:"#fff"}),C&&P.jsx(Eu,{children:i})]})}),l==="fr"&&c?P.jsxs(Ne,{children:[P.jsxs("button",{className:"nav-link btn btn-naked",onClick:()=>{h(!0)},children:[P.jsx(kx,{color:"#fff"}),P.jsx(Hs,{children:t("support")})]}),P.jsx(Sm,{isHelpOpen:d,setIsHelpOpen:h,parsedContent:f,parsedHeadline:p,error:m})]}):null,P.jsx(Ne,{children:P.jsxs("div",{className:"dropdown",children:[P.jsx("button",{className:"nav-link btn btn-naked d-md-none",type:"button","aria-controls":"dropdown-navbar","aria-expanded":!O,"aria-label":t("navbar.open.menu"),onClick:R,children:P.jsx(Ed,{className:"icon rafter-down",width:"20",height:"20",color:"#fff"})}),P.jsxs("ul",{className:`dropdown-menu dropdown-menu-end ${O?"":"show"}`,id:"dropdown-navbar",children:[A&&P.jsx(Ne,{children:P.jsxs("a",{href:"/community",className:"nav-link dropdown-item",children:[P.jsx(Mx,{className:"icon community"}),P.jsx("span",{className:"nav-text",children:t("navbar.community")})]})}),I?P.jsx(fD,{}):null,P.jsx(Ne,{children:P.jsxs("a",{href:"/userbook/mon-compte",className:"nav-link dropdown-item",children:[P.jsx(vm,{alt:w,size:"sm",src:T,variant:"circle",className:"bg-white",width:"32",height:"32"}),P.jsx("span",{className:"nav-text",children:t("navbar.myaccount")})]})}),P.jsx(Ne,{children:P.jsx("hr",{className:"dropdown-divider"})}),P.jsx(Ne,{children:P.jsxs("a",{href:"/auth/logout?callback=",className:"nav-link dropdown-item",children:[P.jsx(Ud,{className:"icon logout"}),P.jsx("span",{id:"logout-label",className:"nav-text",children:t("navbar.disconnect")})]})})]})]})})]})]})})})},mD=pD,gD=({children:r,headless:e=!1,...t})=>{const{theme:i}=dl(),{t:s}=Ot(),{showCookiesConsent:n,handleConsultCookies:a,handleCloseCookiesConsent:o}=lD();IO();const l=_e("d-flex flex-column bg-white",{"container-fluid":!e,"rounded-4 border":(i==null?void 0:i.is1d)&&!e,"mt-24":(i==null?void 0:i.is1d)&&!e}),u=e?null:P.jsx(mD,{is1d:i==null?void 0:i.is1d,src:i==null?void 0:i.basePath}),c=n&&P.jsx(rO,{type:"info",className:"m-12",isConfirm:!0,position:"bottom-right",button:P.jsx(hl,{color:"tertiary",variant:"ghost",onClick:a,children:s("rgpd.cookies.banner.button.consult")}),onClose:o,children:s("rgpd.cookies.banner.text1")}),d=P.jsx(q1,{containerClassName:"toaster-container",toastOptions:{position:"top-right"}});return P.jsxs(P.Fragment,{children:[u,P.jsx("main",{className:l,...t,children:r}),d,c]})},yD=gD,vD=function(){return null};var n1,Em=fh;n1=Em.createRoot,Em.hydrateRoot;var a1={exports:{}},o1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jn=N;function bD(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var xD=typeof Object.is=="function"?Object.is:bD,_D=jn.useSyncExternalStore,wD=jn.useRef,SD=jn.useEffect,ED=jn.useMemo,TD=jn.useDebugValue;o1.useSyncExternalStoreWithSelector=function(r,e,t,i,s){var n=wD(null);if(n.current===null){var a={hasValue:!1,value:null};n.current=a}else a=n.current;n=ED(function(){function l(f){if(!u){if(u=!0,c=f,f=i(f),s!==void 0&&a.hasValue){var p=a.value;if(s(p,f))return d=p}return d=f}if(p=d,xD(c,f))return p;var m=i(f);return s!==void 0&&s(p,m)?p:(c=f,d=m)}var u=!1,c,d,h=t===void 0?null:t;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,t,i,s]);var o=_D(r,n[0],n[1]);return SD(function(){a.hasValue=!0,a.value=o},[o]),TD(o),o};a1.exports=o1;var AD=a1.exports,at="default"in wd?Oe:wd,Tm=Symbol.for("react-redux-context"),Am=typeof globalThis<"u"?globalThis:{};function CD(){if(!at.createContext)return{};const r=Am[Tm]??(Am[Tm]=new Map);let e=r.get(at.createContext);return e||(e=at.createContext(null),r.set(at.createContext,e)),e}var Br=CD(),PD=()=>{throw new Error("uSES not initialized!")};function od(r=Br){return function(){return at.useContext(r)}}var l1=od(),u1=PD,RD=r=>{u1=r},ID=(r,e)=>r===e;function MD(r=Br){const e=r===Br?l1:od(r),t=(i,s={})=>{const{equalityFn:n=ID,devModeChecks:a={}}=typeof s=="function"?{equalityFn:s}:s,{store:o,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:d}=e();at.useRef(!0);const h=at.useCallback({[i.name](p){return i(p)}}[i.name],[i,c,a.stabilityCheck]),f=u1(l.addNestedSub,o.getState,u||o.getState,h,n);return at.useDebugValue(f),f};return Object.assign(t,{withTypes:()=>t}),t}var OD=MD();function c1(r){r()}function DD(){let r=null,e=null;return{clear(){r=null,e=null},notify(){c1(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=r;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:r=s,function(){!i||r===null||(i=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:r=s.next)}}}}var Cm={notify(){},get:()=>[]};function LD(r,e){let t,i=Cm,s=0,n=!1;function a(m){c();const g=i.subscribe(m);let b=!1;return()=>{b||(b=!0,g(),d())}}function o(){i.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return n}function c(){s++,t||(t=e?e.addNestedSub(l):r.subscribe(l),i=DD())}function d(){s--,t&&s===0&&(t(),t=void 0,i.clear(),i=Cm)}function h(){n||(n=!0,c())}function f(){n&&(n=!1,d())}const p={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>i};return p}var ND=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FD=typeof navigator<"u"&&navigator.product==="ReactNative",kD=ND||FD?at.useLayoutEffect:at.useEffect;function Pm(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function rn(r,e){if(Pm(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r),i=Object.keys(e);if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!Object.prototype.hasOwnProperty.call(e,t[s])||!Pm(r[t[s]],e[t[s]]))return!1;return!0}function BD({store:r,context:e,children:t,serverState:i,stabilityCheck:s="once",identityFunctionCheck:n="once"}){const a=at.useMemo(()=>{const u=LD(r);return{store:r,subscription:u,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:n}},[r,i,s,n]),o=at.useMemo(()=>r.getState(),[r]);kD(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==r.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const l=e||Br;return at.createElement(l.Provider,{value:a},t)}var UD=BD;function h1(r=Br){const e=r===Br?l1:od(r),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var d1=h1();function jD(r=Br){const e=r===Br?d1:h1(r),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var $D=jD(),GD=c1;RD(AD.useSyncExternalStoreWithSelector);const HD={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console&&console[r]&&console[r].apply(console,e)}};class Eo{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||HD,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,s){return s&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Eo(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Eo(this.logger,e)}}var qt=new Eo;class pl{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]=this.observers[i]||[],this.observers[i].push(t)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e]=this.observers[e].filter(i=>i!==t)}}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.observers[e]&&[].concat(this.observers[e]).forEach(a=>{a(...i)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(a=>{a.apply(a,[e,...i])})}}function Ps(){let r,e;const t=new Promise((i,s)=>{r=i,e=s});return t.resolve=r,t.reject=e,t}function Rm(r){return r==null?"":""+r}function zD(r,e,t){r.forEach(i=>{e[i]&&(t[i]=e[i])})}function ld(r,e,t){function i(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function s(){return!r||typeof r=="string"}const n=typeof e!="string"?[].concat(e):e.split(".");for(;n.length>1;){if(s())return{};const a=i(n.shift());!r[a]&&t&&(r[a]=new t),Object.prototype.hasOwnProperty.call(r,a)?r=r[a]:r={}}return s()?{}:{obj:r,k:i(n.shift())}}function Im(r,e,t){const{obj:i,k:s}=ld(r,e,Object);i[s]=t}function VD(r,e,t,i){const{obj:s,k:n}=ld(r,e,Object);s[n]=s[n]||[],i&&(s[n]=s[n].concat(t)),i||s[n].push(t)}function To(r,e){const{obj:t,k:i}=ld(r,e);if(t)return t[i]}function WD(r,e,t){const i=To(r,t);return i!==void 0?i:To(e,t)}function f1(r,e,t){for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in r?typeof r[i]=="string"||r[i]instanceof String||typeof e[i]=="string"||e[i]instanceof String?t&&(r[i]=e[i]):f1(r[i],e[i],t):r[i]=e[i]);return r}function Li(r){return r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var qD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function XD(r){return typeof r=="string"?r.replace(/[&<>"'\/]/g,e=>qD[e]):r}const YD=[" ",",","?","!",";"];function QD(r,e,t){e=e||"",t=t||"";const i=YD.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(i.length===0)return!0;const s=new RegExp(`(${i.map(a=>a==="?"?"\\?":a).join("|")})`);let n=!s.test(r);if(!n){const a=r.indexOf(t);a>0&&!s.test(r.substring(0,a))&&(n=!0)}return n}function Ao(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return r[e];const i=e.split(t);let s=r;for(let n=0;n<i.length;++n){if(!s||typeof s[i[n]]=="string"&&n+1<i.length)return;if(s[i[n]]===void 0){let a=2,o=i.slice(n,n+a).join(t),l=s[o];for(;l===void 0&&i.length>n+a;)a++,o=i.slice(n,n+a).join(t),l=s[o];if(l===void 0)return;if(l===null)return null;if(e.endsWith(o)){if(typeof l=="string")return l;if(o&&typeof l[o]=="string")return l[o]}const u=i.slice(n+a).join(t);return u?Ao(l,u,t):void 0}s=s[i[n]]}return s}function Co(r){return r&&r.indexOf("_")>0?r.replace("_","-"):r}class Mm extends pl{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const n=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o=[e,t];i&&typeof i!="string"&&(o=o.concat(i)),i&&typeof i=="string"&&(o=o.concat(n?i.split(n):i)),e.indexOf(".")>-1&&(o=e.split("."));const l=To(this.data,o);return l||!a||typeof i!="string"?l:Ao(this.data&&this.data[e]&&this.data[e][t],i,n)}addResource(e,t,i,s){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=[e,t];i&&(o=o.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),Im(this.data,o,s),n.silent||this.emit("added",e,t,i,s)}addResources(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const n in i)(typeof i[n]=="string"||Object.prototype.toString.apply(i[n])==="[object Array]")&&this.addResource(e,t,n,i[n],{silent:!0});s.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,s,n){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=i,i=t,t=o[1]),this.addNamespaces(t);let l=To(this.data,o)||{};s?f1(l,i,n):l={...l,...i},Im(this.data,o,l),a.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var p1={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,i,s){return r.forEach(n=>{this.processors[n]&&(e=this.processors[n].process(e,t,i,s))}),e}};const Om={};class Po extends pl{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),zD(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=qt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,t);return i&&i.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const a=i&&e.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!QD(e,i,s);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:n};const u=e.split(i);(i!==s||i===s&&this.options.ns.indexOf(u[0])>-1)&&(n=u.shift()),e=u.join(s)}return typeof n=="string"&&(n=[n]),{key:e,namespaces:n}}translate(e,t,i){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),l=o[o.length-1],u=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const v=t.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${v}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l}:`${l}${v}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l}:a}const d=this.resolve(e,t);let h=d&&d.res;const f=d&&d.usedKey||a,p=d&&d.exactUsedKey||a,m=Object.prototype.toString.apply(h),g=["[object Number]","[object Function]","[object RegExp]"],b=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&h&&(typeof h!="string"&&typeof h!="boolean"&&typeof h!="number")&&g.indexOf(m)<0&&!(typeof b=="string"&&m==="[object Array]")){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const v=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(d.res=v,d):v}if(n){const v=m==="[object Array]",S=v?[]:{},T=v?p:f;for(const w in h)if(Object.prototype.hasOwnProperty.call(h,w)){const E=`${T}${n}${w}`;S[w]=this.translate(E,{...t,joinArrays:!1,ns:o}),S[w]===E&&(S[w]=h[w])}h=S}}else if(x&&typeof b=="string"&&m==="[object Array]")h=h.join(b),h&&(h=this.extendTranslation(h,e,t,i));else{let v=!1,S=!1;const T=t.count!==void 0&&typeof t.count!="string",w=Po.hasDefaultValue(t),E=T?this.pluralResolver.getSuffix(u,t.count,t):"",A=t.ordinal&&T?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",M=t[`defaultValue${E}`]||t[`defaultValue${A}`]||t.defaultValue;!this.isValidLookup(h)&&w&&(v=!0,h=M),this.isValidLookup(h)||(S=!0,h=a);const O=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:h,R=w&&M!==h&&this.options.updateMissing;if(S||v||R){if(this.logger.log(R?"updateKey":"missingKey",u,l,a,R?M:h),n){const k=this.resolve(a,{...t,keySeparator:!1});k&&k.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let _=[];const C=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&C&&C[0])for(let k=0;k<C.length;k++)_.push(C[k]);else this.options.saveMissingTo==="all"?_=this.languageUtils.toResolveHierarchy(t.lng||this.language):_.push(t.lng||this.language);const D=(k,L,B)=>{const F=w&&B!==h?B:O;this.options.missingKeyHandler?this.options.missingKeyHandler(k,l,L,F,R,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(k,l,L,F,R,t),this.emit("missingKey",k,l,L,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?_.forEach(k=>{this.pluralResolver.getSuffixes(k,t).forEach(L=>{D([k],a+L,t[`defaultValue${L}`]||M)})}):D(_,a,M))}h=this.extendTranslation(h,e,t,d,i),S&&h===a&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${a}`),(S||v)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,v?h:void 0):h=this.options.parseMissingKeyHandler(h))}return s?(d.res=h,d):h}extendTranslation(e,t,i,s,n){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=typeof e=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const h=e.match(this.interpolator.nestingRegexp);c=h&&h.length}let d=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,i.lng||this.language,i),u){const h=e.match(this.interpolator.nestingRegexp),f=h&&h.length;c<f&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(i.lng=s.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,f=new Array(h),p=0;p<h;p++)f[p]=arguments[p];return n&&n[0]===f[0]&&!i.context?(a.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):a.translate(...f,t)},i)),i.interpolation&&this.interpolator.reset()}const o=i.postProcess||this.options.postProcess,l=typeof o=="string"?[o]:o;return e!=null&&l&&l.length&&i.applyPostProcessor!==!1&&(e=p1.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:s,...i}:i,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,s,n,a,o;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(l,t),c=u.key;s=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=t.count!==void 0&&typeof t.count!="string",f=h&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),p=t.context!==void 0&&(typeof t.context=="string"||typeof t.context=="number")&&t.context!=="",m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach(g=>{this.isValidLookup(i)||(o=g,!Om[`${m[0]}-${g}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(Om[`${m[0]}-${g}`]=!0,this.logger.warn(`key "${s}" for languages "${m.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(b=>{if(this.isValidLookup(i))return;a=b;const x=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,b,g,t);else{let v;h&&(v=this.pluralResolver.getSuffix(b,t.count,t));const S=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(x.push(c+v),t.ordinal&&v.indexOf(T)===0&&x.push(c+v.replace(T,this.options.pluralSeparator)),f&&x.push(c+S)),p){const w=`${c}${this.options.contextSeparator}${t.context}`;x.push(w),h&&(x.push(w+v),t.ordinal&&v.indexOf(T)===0&&x.push(w+v.replace(T,this.options.pluralSeparator)),f&&x.push(w+S))}}let y;for(;y=x.pop();)this.isValidLookup(i)||(n=y,i=this.getResource(b,g,y,t))}))})}),{res:i,usedKey:s,exactUsedKey:n,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,i,s):this.resourceStore.getResource(e,t,i,s)}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}function Au(r){return r.charAt(0).toUpperCase()+r.slice(1)}class Dm{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=qt.create("languageUtils")}getScriptPartFromCode(e){if(e=Co(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Co(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(s=>s.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=Au(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=Au(i[1].toLowerCase())),t.indexOf(i[2].toLowerCase())>-1&&(i[2]=Au(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const s=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(n=>{if(n===s)return n;if(!(n.indexOf("-")<0&&s.indexOf("-")<0)&&n.indexOf(s)===0)return n})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],n=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&n(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&n(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&n(this.getLanguagePartFromCode(e))):typeof e=="string"&&n(this.formatLanguageCode(e)),i.forEach(a=>{s.indexOf(a)<0&&n(this.formatLanguageCode(a))}),s}}let KD=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ZD={1:function(r){return+(r>1)},2:function(r){return+(r!=1)},3:function(r){return 0},4:function(r){return r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2},5:function(r){return r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5},6:function(r){return r==1?0:r>=2&&r<=4?1:2},7:function(r){return r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2},8:function(r){return r==1?0:r==2?1:r!=8&&r!=11?2:3},9:function(r){return+(r>=2)},10:function(r){return r==1?0:r==2?1:r<7?2:r<11?3:4},11:function(r){return r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3},12:function(r){return+(r%10!=1||r%100==11)},13:function(r){return+(r!==0)},14:function(r){return r==1?0:r==2?1:r==3?2:3},15:function(r){return r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2},16:function(r){return r%10==1&&r%100!=11?0:r!==0?1:2},17:function(r){return r==1||r%10==1&&r%100!=11?0:1},18:function(r){return r==0?0:r==1?1:2},19:function(r){return r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3},20:function(r){return r==1?0:r==0||r%100>0&&r%100<20?1:2},21:function(r){return r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0},22:function(r){return r==1?0:r==2?1:(r<0||r>10)&&r%10==0?2:3}};const JD=["v1","v2","v3"],eL=["v4"],Lm={zero:0,one:1,two:2,few:3,many:4,other:5};function tL(){const r={};return KD.forEach(e=>{e.lngs.forEach(t=>{r[t]={numbers:e.nr,plurals:ZD[e.fc]}})}),r}class rL{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=qt.create("pluralResolver"),(!this.options.compatibilityJSON||eL.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=tL()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Co(e),{type:t.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,t);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,t);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((s,n)=>Lm[s]-Lm[n]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):i.numbers.map(s=>this.getSuffix(e,s,t)):[]}getSuffix(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,i);return s?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:this.getSuffixRetroCompatible(s,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let s=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const n=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:n():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?n():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!JD.includes(this.options.compatibilityJSON)}}function Nm(r,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,n=WD(r,e,t);return!n&&s&&typeof t=="string"&&(n=Ao(r,t,i),n===void 0&&(n=Ao(e,t,i))),n}class iL{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const t=e.interpolation;this.escape=t.escape!==void 0?t.escape:XD,this.escapeValue=t.escapeValue!==void 0?t.escapeValue:!0,this.useRawValueToEscape=t.useRawValueToEscape!==void 0?t.useRawValueToEscape:!1,this.prefix=t.prefix?Li(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Li(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Li(t.nestingPrefix):t.nestingPrefixEscaped||Li("$t("),this.nestingSuffix=t.nestingSuffix?Li(t.nestingSuffix):t.nestingSuffixEscaped||Li(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=t.alwaysFormat!==void 0?t.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(e,"g");const t=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(t,"g");const i=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(i,"g")}interpolate(e,t,i,s){let n,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(p){return p.replace(/\$/g,"$$$$")}const c=p=>{if(p.indexOf(this.formatSeparator)<0){const x=Nm(t,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,i,{...s,...t,interpolationkey:p}):x}const m=p.split(this.formatSeparator),g=m.shift().trim(),b=m.join(this.formatSeparator).trim();return this.format(Nm(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),b,i,{...s,...t,interpolationkey:g})};this.resetRegExp();const d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,h=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>u(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?u(this.escape(p)):u(p)}].forEach(p=>{for(o=0;n=p.regex.exec(e);){const m=n[1].trim();if(a=c(m),a===void 0)if(typeof d=="function"){const b=d(e,n,s);a=typeof b=="string"?b:""}else if(s&&Object.prototype.hasOwnProperty.call(s,m))a="";else if(h){a=n[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),a="";else typeof a!="string"&&!this.useRawValueToEscape&&(a=Rm(a));const g=p.safeValue(a);if(e=e.replace(n[0],g),h?(p.regex.lastIndex+=a.length,p.regex.lastIndex-=n[0].length):p.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,n,a;function o(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let h=`{${d[1]}`;l=d[0],h=this.interpolate(h,a);const f=h.match(/'/g),p=h.match(/"/g);(f&&f.length%2===0&&!p||p.length%2!==0)&&(h=h.replace(/'/g,'"'));try{a=JSON.parse(h),u&&(a={...u,...a})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${c}${h}`}return delete a.defaultValue,l}for(;s=this.nestingRegexp.exec(e);){let l=[];a={...i},a=a.replace&&typeof a.replace!="string"?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const c=s[1].split(this.formatSeparator).map(d=>d.trim());s[1]=c.shift(),l=c,u=!0}if(n=t(o.call(this,s[1].trim(),a),a),n&&s[0]===e&&typeof n!="string")return n;typeof n!="string"&&(n=Rm(n)),n||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),n=""),u&&(n=l.reduce((c,d)=>this.format(c,d,i.lng,{...i,interpolationkey:s[1].trim()}),n.trim())),e=e.replace(s[0],n),this.regexp.lastIndex=0}return e}}function sL(r){let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const i=r.split("(");e=i[0].toLowerCase().trim();const s=i[1].substring(0,i[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(a=>{if(!a)return;const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,"");t[o.trim()]||(t[o.trim()]=u),u==="false"&&(t[o.trim()]=!1),u==="true"&&(t[o.trim()]=!0),isNaN(u)||(t[o.trim()]=parseInt(u,10))})}return{formatName:e,formatOptions:t}}function Ni(r){const e={};return function(i,s,n){const a=s+JSON.stringify(n);let o=e[a];return o||(o=r(Co(s),n),e[a]=o),o(i)}}class nL{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qt.create("formatter"),this.options=e,this.formats={number:Ni((t,i)=>{const s=new Intl.NumberFormat(t,{...i});return n=>s.format(n)}),currency:Ni((t,i)=>{const s=new Intl.NumberFormat(t,{...i,style:"currency"});return n=>s.format(n)}),datetime:Ni((t,i)=>{const s=new Intl.DateTimeFormat(t,{...i});return n=>s.format(n)}),relativetime:Ni((t,i)=>{const s=new Intl.RelativeTimeFormat(t,{...i});return n=>s.format(n,i.range||"day")}),list:Ni((t,i)=>{const s=new Intl.ListFormat(t,{...i});return n=>s.format(n)})},this.init(e)}init(e){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Ni(t)}format(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return t.split(this.formatSeparator).reduce((o,l)=>{const{formatName:u,formatOptions:c}=sL(l);if(this.formats[u]){let d=o;try{const h=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},f=h.locale||h.lng||s.locale||s.lng||i;d=this.formats[u](o,f,{...c,...s,...h})}catch(h){this.logger.warn(h)}return d}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}function aL(r,e){r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)}class oL extends pl{constructor(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=s,this.logger=qt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,s.backend,s)}queueLoad(e,t,i,s){const n={},a={},o={},l={};return e.forEach(u=>{let c=!0;t.forEach(d=>{const h=`${u}|${d}`;!i.reload&&this.store.hasResourceBundle(u,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?a[h]===void 0&&(a[h]=!0):(this.state[h]=1,c=!1,a[h]===void 0&&(a[h]=!0),n[h]===void 0&&(n[h]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(o[u]=!0)}),(Object.keys(n).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(n),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,i){const s=e.split("|"),n=s[0],a=s[1];t&&this.emit("failedLoading",n,a,t),i&&this.store.addResourceBundle(n,a,i),this.state[e]=t?-1:2;const o={};this.queue.forEach(l=>{VD(l.loaded,[n],a),aL(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{o[u][d]===void 0&&(o[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:s,wait:n,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,s+1,n*2,a)},n);return}a(u,c)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const u=l(e,t);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,t,o)}prepareLoading(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof t=="string"&&(t=[t]);const n=this.queueLoad(e,t,i,s);if(!n.toLoad.length)return n.pending.length||s(),null;n.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),s=i[0],n=i[1];this.read(s,n,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${n} for language ${s} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${n} for language ${s}`,o),this.loaded(e,a,o)})}saveMissing(e,t,i,s,n){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:n},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,t,i,s,l):c=u(e,t,i,s),c&&typeof c.then=="function"?c.then(d=>o(null,d)).catch(o):o(null,c)}catch(c){o(c)}else u(e,t,i,s,o,l)}!e||!e[0]||this.store.addResource(e[0],t,i,s)}}}function Fm(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if(typeof e[1]=="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const i=e[3]||e[2];Object.keys(i).forEach(s=>{t[s]=i[s]})}return t},interpolation:{escapeValue:!0,format:(r,e,t,i)=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function km(r){return typeof r.ns=="string"&&(r.ns=[r.ns]),typeof r.fallbackLng=="string"&&(r.fallbackLng=[r.fallbackLng]),typeof r.fallbackNS=="string"&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r}function Aa(){}function lL(r){Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})}class xn extends pl{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=km(e),this.services={},this.logger=qt,this.modules={external:[]},lL(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;typeof t=="function"&&(i=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(typeof t.ns=="string"?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=Fm();this.options={...s,...this.options,...km(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);function n(c){return c?typeof c=="function"?new c:c:null}if(!this.options.isClone){this.modules.logger?qt.init(n(this.modules.logger),this.options):qt.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=nL);const d=new Dm(this.options);this.store=new Mm(this.options.resources,this.options);const h=this.services;h.logger=qt,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new rL(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=n(c),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new iL(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new oL(n(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(f){for(var p=arguments.length,m=new Array(p>1?p-1:0),g=1;g<p;g++)m[g-1]=arguments[g];e.emit(f,...m)}),this.modules.languageDetector&&(h.languageDetector=n(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=n(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Po(this.services,this.options),this.translator.on("*",function(f){for(var p=arguments.length,m=new Array(p>1?p-1:0),g=1;g<p;g++)m[g-1]=arguments[g];e.emit(f,...m)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Aa),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const l=Ps(),u=()=>{const c=(d,h)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),i(d,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Aa;const s=typeof e=="string"?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const n=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(u=>{u!=="cimode"&&n.indexOf(u)<0&&n.push(u)})};s?a(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(n,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(o)})}else i(null)}reloadResources(e,t,i){const s=Ps();return e||(e=this.languages),t||(t=this.options.ns),i||(i=Aa),this.services.backendConnector.reload(e,t,n=>{s.resolve(),i(n)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&p1.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,t){var i=this;this.isLanguageChangingTo=e;const s=Ps();this.emit("languageChanging",e);const n=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(n(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,s.resolve(function(){return i.t(...arguments)}),t&&t(l,function(){return i.t(...arguments)})},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||n(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{a(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),s}getFixedT(e,t,i){var s=this;const n=function(a,o){let l;if(typeof o!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=s.options.overloadTranslationOptionHandler([a,o].concat(c))}else l={...o};l.lng=l.lng||n.lng,l.lngs=l.lngs||n.lngs,l.ns=l.ns||n.ns,l.keyPrefix=l.keyPrefix||i||n.keyPrefix;const h=s.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(a)?f=a.map(p=>`${l.keyPrefix}${h}${p}`):f=l.keyPrefix?`${l.keyPrefix}${h}${a}`:a,s.t(f,l)};return typeof e=="string"?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=i,n}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,n=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(i,e)&&(!s||a(n,e)))}loadNamespaces(e,t){const i=Ps();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=Ps();typeof e=="string"&&(e=[e]);const s=this.options.preload||[],n=e.filter(a=>s.indexOf(a)<0);return n.length?(this.options.preload=s.concat(n),this.loadResources(a=>{i.resolve(),t&&t(a)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Dm(Fm());return t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new xn(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Aa;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},n=new xn(s);return(e.debug!==void 0||e.prefix!==void 0)&&(n.logger=n.logger.clone(e)),["store","services","language"].forEach(o=>{n[o]=this[o]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},i&&(n.store=new Mm(this.store.data,s),n.services.resourceStore=n.store),n.translator=new Po(n.services,s),n.translator.on("*",function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];n.emit(o,...u)}),n.init(s,t),n.translator.options=s,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Xe=xn.createInstance();Xe.createInstance=xn.createInstance;Xe.createInstance;Xe.dir;Xe.init;Xe.loadResources;Xe.reloadResources;Xe.use;Xe.changeLanguage;Xe.getFixedT;Xe.t;Xe.exists;Xe.setDefaultNamespace;Xe.hasLoadedNamespace;Xe.loadNamespaces;Xe.loadLanguages;function uL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _n(r){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(r)}function cL(r,e){if(_n(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(_n(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function hL(r){var e=cL(r,"string");return _n(e)=="symbol"?e:e+""}function Bm(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,hL(i.key),i)}}function dL(r,e,t){return e&&Bm(r.prototype,e),t&&Bm(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var m1=[],fL=m1.forEach,pL=m1.slice;function mL(r){return fL.call(pL.call(arguments,1),function(e){if(e)for(var t in e)r[t]===void 0&&(r[t]=e[t])}),r}var Um=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,gL=function(e,t,i){var s=i||{};s.path=s.path||"/";var n=encodeURIComponent(t),a="".concat(e,"=").concat(n);if(s.maxAge>0){var o=s.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(o))}if(s.domain){if(!Um.test(s.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(s.domain)}if(s.path){if(!Um.test(s.path))throw new TypeError("option path is invalid");a+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.sameSite){var l=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(l){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},jm={create:function(e,t,i,s){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+i*60*1e3)),s&&(n.domain=s),document.cookie=gL(e,encodeURIComponent(t),n)},read:function(e){for(var t="".concat(e,"="),i=document.cookie.split(";"),s=0;s<i.length;s++){for(var n=i[s];n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return n.substring(t.length,n.length)}return null},remove:function(e){this.create(e,"",-1)}},yL={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var i=jm.read(e.lookupCookie);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&jm.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},vL={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=i.substring(1),n=s.split("&"),a=0;a<n.length;a++){var o=n[a].indexOf("=");if(o>0){var l=n[a].substring(0,o);l===e.lookupQuerystring&&(t=n[a].substring(o+1))}}}return t}},Rs=null,$m=function(){if(Rs!==null)return Rs;try{Rs=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Rs=!1}return Rs},bL={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&$m()){var i=window.localStorage.getItem(e.lookupLocalStorage);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&$m()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Is=null,Gm=function(){if(Is!==null)return Is;try{Is=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Is=!1}return Is},xL={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&Gm()){var i=window.sessionStorage.getItem(e.lookupSessionStorage);i&&(t=i)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&Gm()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},_L={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)t.push(navigator.languages[i]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},wL={name:"htmlTag",lookup:function(e){var t,i=e.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},SL={name:"path",lookup:function(e){var t;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof i[e.lookupFromPathIndex]!="string")return;t=i[e.lookupFromPathIndex].replace("/","")}else t=i[0].replace("/","")}return t}},EL={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,i=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};function TL(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var g1=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uL(this,r),this.type="languageDetector",this.detectors={},this.init(e,t)}return dL(r,[{key:"init",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=mL(i,this.options||{},TL()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(n){return n.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(yL),this.addDetector(vL),this.addDetector(bL),this.addDetector(xL),this.addDetector(_L),this.addDetector(wL),this.addDetector(SL),this.addDetector(EL)}},{key:"addDetector",value:function(t){return this.detectors[t.name]=t,this}},{key:"detect",value:function(t){var i=this;t||(t=this.options.order);var s=[];return t.forEach(function(n){if(i.detectors[n]){var a=i.detectors[n].lookup(i.options);a&&typeof a=="string"&&(a=[a]),a&&(s=s.concat(a))}}),s=s.map(function(n){return i.options.convertDetectedLanguage(n)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(t,i){var s=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||i.forEach(function(n){s.detectors[n]&&s.detectors[n].cacheUserLanguage(t,s.options)}))}}]),r}();g1.type="languageDetector";function Jc(r){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(r)}var y1=[],AL=y1.forEach,CL=y1.slice;function eh(r){return AL.call(CL.call(arguments,1),function(e){if(e)for(var t in e)r[t]===void 0&&(r[t]=e[t])}),r}function v1(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":Jc(XMLHttpRequest))==="object"}function PL(r){return!!r&&typeof r.then=="function"}function RL(r){return PL(r)?r:Promise.resolve(r)}function IL(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var th={exports:{}},Ca={exports:{}},Hm;function ML(){return Hm||(Hm=1,function(r,e){var t=typeof self<"u"?self:Ie,i=function(){function n(){this.fetch=!1,this.DOMException=t.DOMException}return n.prototype=t,new n}();(function(n){(function(a){var o={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function l(_){return _&&DataView.prototype.isPrototypeOf(_)}if(o.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(_){return _&&u.indexOf(Object.prototype.toString.call(_))>-1};function d(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function h(_){return typeof _!="string"&&(_=String(_)),_}function f(_){var C={next:function(){var D=_.shift();return{done:D===void 0,value:D}}};return o.iterable&&(C[Symbol.iterator]=function(){return C}),C}function p(_){this.map={},_ instanceof p?_.forEach(function(C,D){this.append(D,C)},this):Array.isArray(_)?_.forEach(function(C){this.append(C[0],C[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(C){this.append(C,_[C])},this)}p.prototype.append=function(_,C){_=d(_),C=h(C);var D=this.map[_];this.map[_]=D?D+", "+C:C},p.prototype.delete=function(_){delete this.map[d(_)]},p.prototype.get=function(_){return _=d(_),this.has(_)?this.map[_]:null},p.prototype.has=function(_){return this.map.hasOwnProperty(d(_))},p.prototype.set=function(_,C){this.map[d(_)]=h(C)},p.prototype.forEach=function(_,C){for(var D in this.map)this.map.hasOwnProperty(D)&&_.call(C,this.map[D],D,this)},p.prototype.keys=function(){var _=[];return this.forEach(function(C,D){_.push(D)}),f(_)},p.prototype.values=function(){var _=[];return this.forEach(function(C){_.push(C)}),f(_)},p.prototype.entries=function(){var _=[];return this.forEach(function(C,D){_.push([D,C])}),f(_)},o.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function g(_){return new Promise(function(C,D){_.onload=function(){C(_.result)},_.onerror=function(){D(_.error)}})}function b(_){var C=new FileReader,D=g(C);return C.readAsArrayBuffer(_),D}function x(_){var C=new FileReader,D=g(C);return C.readAsText(_),D}function y(_){for(var C=new Uint8Array(_),D=new Array(C.length),k=0;k<C.length;k++)D[k]=String.fromCharCode(C[k]);return D.join("")}function v(_){if(_.slice)return _.slice(0);var C=new Uint8Array(_.byteLength);return C.set(new Uint8Array(_)),C.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:o.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:o.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():o.arrayBuffer&&o.blob&&l(_)?(this._bodyArrayBuffer=v(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||c(_))?this._bodyArrayBuffer=v(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(_){var C=_.toUpperCase();return T.indexOf(C)>-1?C:_}function E(_,C){C=C||{};var D=C.body;if(_ instanceof E){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,C.headers||(this.headers=new p(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!D&&_._bodyInit!=null&&(D=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new p(C.headers)),this.method=w(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(D)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function A(_){var C=new FormData;return _.trim().split("&").forEach(function(D){if(D){var k=D.split("="),L=k.shift().replace(/\+/g," "),B=k.join("=").replace(/\+/g," ");C.append(decodeURIComponent(L),decodeURIComponent(B))}}),C}function M(_){var C=new p,D=_.replace(/\r?\n[\t ]+/g," ");return D.split(/\r?\n/).forEach(function(k){var L=k.split(":"),B=L.shift().trim();if(B){var F=L.join(":").trim();C.append(B,F)}}),C}S.call(E.prototype);function I(_,C){C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"OK",this.headers=new p(C.headers),this.url=C.url||"",this._initBody(_)}S.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},I.error=function(){var _=new I(null,{status:0,statusText:""});return _.type="error",_};var O=[301,302,303,307,308];I.redirect=function(_,C){if(O.indexOf(C)===-1)throw new RangeError("Invalid status code");return new I(null,{status:C,headers:{location:_}})},a.DOMException=n.DOMException;try{new a.DOMException}catch{a.DOMException=function(C,D){this.message=C,this.name=D;var k=Error(C);this.stack=k.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function R(_,C){return new Promise(function(D,k){var L=new E(_,C);if(L.signal&&L.signal.aborted)return k(new a.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function F(){B.abort()}B.onload=function(){var U={status:B.status,statusText:B.statusText,headers:M(B.getAllResponseHeaders()||"")};U.url="responseURL"in B?B.responseURL:U.headers.get("X-Request-URL");var $="response"in B?B.response:B.responseText;D(new I($,U))},B.onerror=function(){k(new TypeError("Network request failed"))},B.ontimeout=function(){k(new TypeError("Network request failed"))},B.onabort=function(){k(new a.DOMException("Aborted","AbortError"))},B.open(L.method,L.url,!0),L.credentials==="include"?B.withCredentials=!0:L.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&o.blob&&(B.responseType="blob"),L.headers.forEach(function(U,$){B.setRequestHeader($,U)}),L.signal&&(L.signal.addEventListener("abort",F),B.onreadystatechange=function(){B.readyState===4&&L.signal.removeEventListener("abort",F)}),B.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return R.polyfill=!0,n.fetch||(n.fetch=R,n.Headers=p,n.Request=E,n.Response=I),a.Headers=p,a.Request=E,a.Response=I,a.fetch=R,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e}(Ca,Ca.exports)),Ca.exports}(function(r,e){var t;if(typeof fetch=="function"&&(typeof Ie<"u"&&Ie.fetch?t=Ie.fetch:typeof window<"u"&&window.fetch?t=window.fetch:t=fetch),typeof IL<"u"&&(typeof window>"u"||typeof window.document>"u")){var i=t||ML();i.default&&(i=i.default),e.default=i,r.exports=e.default}})(th,th.exports);var b1=th.exports;const x1=In(b1),zm=Z1({__proto__:null,default:x1},[b1]);function Ro(r){"@babel/helpers - typeof";return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(r)}var pr;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?pr=global.fetch:typeof window<"u"&&window.fetch?pr=window.fetch:pr=fetch);var wn;v1()&&(typeof global<"u"&&global.XMLHttpRequest?wn=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(wn=window.XMLHttpRequest));var Io;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Io=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Io=window.ActiveXObject));!pr&&zm&&!wn&&!Io&&(pr=x1||zm);typeof pr!="function"&&(pr=void 0);var rh=function(e,t){if(t&&Ro(t)==="object"){var i="";for(var s in t)i+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t[s]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},Vm=function(e,t,i){var s=function(a){if(!a.ok)return i(a.statusText||"Error",{status:a.status});a.text().then(function(o){i(null,{status:a.status,data:o})}).catch(i)};typeof fetch=="function"?fetch(e,t).then(s).catch(i):pr(e,t).then(s).catch(i)},Wm=!1,OL=function(e,t,i,s){e.queryStringParams&&(t=rh(t,e.queryStringParams));var n=eh({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);i&&(n["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,o=eh({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:n},Wm?{}:a);try{Vm(t,o,s)}catch(l){if(!a||Object.keys(a).length===0||!l.message||l.message.indexOf("not implemented")<0)return s(l);try{Object.keys(a).forEach(function(u){delete o[u]}),Vm(t,o,s),Wm=!0}catch(u){s(u)}}},DL=function(e,t,i,s){i&&Ro(i)==="object"&&(i=rh("",i).slice(1)),e.queryStringParams&&(t=rh(t,e.queryStringParams));try{var n;wn?n=new wn:n=new Io("MSXML2.XMLHTTP.3.0"),n.open(i?"POST":"GET",t,1),e.crossDomain||n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.withCredentials=!!e.withCredentials,i&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.overrideMimeType&&n.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var o in a)n.setRequestHeader(o,a[o]);n.onreadystatechange=function(){n.readyState>3&&s(n.status>=400?n.statusText:null,{status:n.status,data:n.responseText})},n.send(i)}catch(l){console&&console.log(l)}},LL=function(e,t,i,s){if(typeof i=="function"&&(s=i,i=void 0),s=s||function(){},pr&&t.indexOf("file:")!==0)return OL(e,t,i,s);if(v1()||typeof ActiveXObject=="function")return DL(e,t,i,s);s(new Error("No fetch and no xhr implementation found!"))};function Sn(r){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(r)}function NL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qm(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,_1(i.key),i)}}function FL(r,e,t){return e&&qm(r.prototype,e),t&&qm(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function kL(r,e,t){return e=_1(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _1(r){var e=BL(r,"string");return Sn(e)==="symbol"?e:String(e)}function BL(r,e){if(Sn(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(Sn(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var UL=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,s){return kL({},i,s||"")},parseLoadPayload:function(t,i){},request:LL,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},w1=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};NL(this,r),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return FL(r,[{key:"init",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=eh(s,this.options||{},UL()),this.allOptions=n,this.services&&this.options.reloadInterval&&setInterval(function(){return i.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(t,i,s){this._readAny(t,t,i,i,s)}},{key:"read",value:function(t,i,s){this._readAny([t],t,[i],i,s)}},{key:"_readAny",value:function(t,i,s,n,a){var o=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(t,s)),l=RL(l),l.then(function(u){if(!u)return a(null,{});var c=o.services.interpolator.interpolate(u,{lng:t.join("+"),ns:s.join("+")});o.loadUrl(c,a,i,n)})}},{key:"loadUrl",value:function(t,i,s,n){var a=this,o=typeof s=="string"?[s]:s,l=typeof n=="string"?[n]:n,u=this.options.parseLoadPayload(o,l);this.options.request(this.options,t,u,function(c,d){if(d&&(d.status>=500&&d.status<600||!d.status))return i("failed loading "+t+"; status code: "+d.status,!0);if(d&&d.status>=400&&d.status<500)return i("failed loading "+t+"; status code: "+d.status,!1);if(!d&&c&&c.message&&c.message.indexOf("Failed to fetch")>-1)return i("failed loading "+t+": "+c.message,!0);if(c)return i(c,!1);var h,f;try{typeof d.data=="string"?h=a.options.parse(d.data,s,n):h=d.data}catch{f="failed parsing "+t+" to json"}if(f)return i(f,!1);i(null,h)})}},{key:"create",value:function(t,i,s,n,a){var o=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var l=this.options.parsePayload(i,s,n),u=0,c=[],d=[];t.forEach(function(h){var f=o.options.addPath;typeof o.options.addPath=="function"&&(f=o.options.addPath(h,i));var p=o.services.interpolator.interpolate(f,{lng:h,ns:i});o.options.request(o.options,p,l,function(m,g){u+=1,c.push(m),d.push(g),u===t.length&&typeof a=="function"&&a(c,d)})})}}},{key:"reload",value:function(){var t=this,i=this.services,s=i.backendConnector,n=i.languageUtils,a=i.logger,o=s.language;if(!(o&&o.toLowerCase()==="cimode")){var l=[],u=function(d){var h=n.toResolveHierarchy(d);h.forEach(function(f){l.indexOf(f)<0&&l.push(f)})};u(o),this.allOptions.preload&&this.allOptions.preload.forEach(function(c){return u(c)}),l.forEach(function(c){t.allOptions.ns.forEach(function(d){s.read(c,d,"read",null,null,function(h,f){h&&a.warn("loading namespace ".concat(d," for language ").concat(c," failed"),h),!h&&f&&a.log("loaded namespace ".concat(d," for language ").concat(c),f),s.loaded("".concat(c,"|").concat(d),h,f)})})})}}}]),r}();w1.type="backend";Xe.use(w1).use(g1).use(Fb).init({backend:{loadPath:(r,e)=>e.map(i=>i==="common"?"/i18n":`/${i}/i18n`),parse:function(r){return JSON.parse(r)}},defaultNS:"common",ns:["common","homework-assistance"],fallbackLng:"fr",supportedLngs:["fr","en","es","de","it","pt"],interpolation:{escapeValue:!1,prefix:"{{",suffix:"}}"},debug:!1});function jL(){const{init:r}=Ai();return r?r?P.jsx(yD,{children:P.jsx(X1,{})}):null:P.jsx(eD,{position:!1})}function $L(){const r=Y1();return console.error("an error has occured: "+r),P.jsxs("div",{id:"error-page",children:[P.jsx("h1",{children:"Oops!"}),P.jsx("p",{children:"Sorry, an unexpected error has occurred."}),P.jsx("p",{children:P.jsx("i",{children:r.statusText||r.message})})]})}const GL=[{path:"/",element:P.jsx(jL,{}),errorElement:P.jsx($L,{}),children:[{index:!0,async lazy(){const{App:r}=await tb(()=>import("./index-1525dcfe.js"),["public/index-1525dcfe.js","public/react-a2531974.js"]);return{Component:r}}}]}],HL=Q1(GL);function Ge(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var zL=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),Xm=zL,Cu=()=>Math.random().toString(36).substring(7).split("").join("."),VL={INIT:`@@redux/INIT${Cu()}`,REPLACE:`@@redux/REPLACE${Cu()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Cu()}`},Mo=VL;function Jt(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function S1(r,e,t){if(typeof r!="function")throw new Error(Ge(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Ge(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Ge(1));return t(S1)(r,e)}let i=r,s=e,n=new Map,a=n,o=0,l=!1;function u(){a===n&&(a=new Map,n.forEach((g,b)=>{a.set(b,g)}))}function c(){if(l)throw new Error(Ge(3));return s}function d(g){if(typeof g!="function")throw new Error(Ge(4));if(l)throw new Error(Ge(5));let b=!0;u();const x=o++;return a.set(x,g),function(){if(b){if(l)throw new Error(Ge(6));b=!1,u(),a.delete(x),n=null}}}function h(g){if(!Jt(g))throw new Error(Ge(7));if(typeof g.type>"u")throw new Error(Ge(8));if(typeof g.type!="string")throw new Error(Ge(17));if(l)throw new Error(Ge(9));try{l=!0,s=i(s,g)}finally{l=!1}return(n=a).forEach(x=>{x()}),g}function f(g){if(typeof g!="function")throw new Error(Ge(10));i=g,h({type:Mo.REPLACE})}function p(){const g=d;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Ge(11));function x(){const v=b;v.next&&v.next(c())}return x(),{unsubscribe:g(x)}},[Xm](){return this}}}return h({type:Mo.INIT}),{dispatch:h,subscribe:d,getState:c,replaceReducer:f,[Xm]:p}}function WL(r){Object.keys(r).forEach(e=>{const t=r[e];if(typeof t(void 0,{type:Mo.INIT})>"u")throw new Error(Ge(12));if(typeof t(void 0,{type:Mo.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ge(13))})}function ud(r){const e=Object.keys(r),t={};for(let n=0;n<e.length;n++){const a=e[n];typeof r[a]=="function"&&(t[a]=r[a])}const i=Object.keys(t);let s;try{WL(t)}catch(n){s=n}return function(a={},o){if(s)throw s;let l=!1;const u={};for(let c=0;c<i.length;c++){const d=i[c],h=t[d],f=a[d],p=h(f,o);if(typeof p>"u")throw o&&o.type,new Error(Ge(14));u[d]=p,l=l||p!==f}return l=l||i.length!==Object.keys(a).length,l?u:a}}function Oo(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...i)=>e(t(...i)))}function qL(...r){return e=>(t,i)=>{const s=e(t,i);let n=()=>{throw new Error(Ge(15))};const a={getState:s.getState,dispatch:(l,...u)=>n(l,...u)},o=r.map(l=>l(a));return n=Oo(...o)(s.dispatch),{...s,dispatch:n}}}function E1(r){return Jt(r)&&"type"in r&&typeof r.type=="string"}var cd=Symbol.for("immer-nothing"),sn=Symbol.for("immer-draftable"),rt=Symbol.for("immer-state");function ze(r,...e){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var xi=Object.getPrototypeOf;function er(r){return!!r&&!!r[rt]}function Mt(r){var e;return r?T1(r)||Array.isArray(r)||!!r[sn]||!!((e=r.constructor)!=null&&e[sn])||$n(r)||Gn(r):!1}var XL=Object.prototype.constructor.toString();function T1(r){if(!r||typeof r!="object")return!1;const e=xi(r);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===XL}function YL(r){return er(r)||ze(15,r),r[rt].base_}function En(r,e){_i(r)===0?Reflect.ownKeys(r).forEach(t=>{e(t,r[t],r)}):r.forEach((t,i)=>e(i,t,r))}function _i(r){const e=r[rt];return e?e.type_:Array.isArray(r)?1:$n(r)?2:Gn(r)?3:0}function Tn(r,e){return _i(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function Pu(r,e){return _i(r)===2?r.get(e):r[e]}function A1(r,e,t){const i=_i(r);i===2?r.set(e,t):i===3?r.add(t):r[e]=t}function QL(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}function $n(r){return r instanceof Map}function Gn(r){return r instanceof Set}function ri(r){return r.copy_||r.base_}function ih(r,e){if($n(r))return new Map(r);if(Gn(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const t=T1(r);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(r);delete i[rt];let s=Reflect.ownKeys(i);for(let n=0;n<s.length;n++){const a=s[n],o=i[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[a]})}return Object.create(xi(r),i)}else{const i=xi(r);if(i!==null&&t)return{...r};const s=Object.create(i);return Object.assign(s,r)}}function hd(r,e=!1){return ml(r)||er(r)||!Mt(r)||(_i(r)>1&&(r.set=r.add=r.clear=r.delete=KL),Object.freeze(r),e&&Object.entries(r).forEach(([t,i])=>hd(i,!0))),r}function KL(){ze(2)}function ml(r){return Object.isFrozen(r)}var sh={};function wi(r){const e=sh[r];return e||ze(0,r),e}function ZL(r,e){sh[r]||(sh[r]=e)}var An;function C1(){return An}function JL(r,e){return{drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ym(r,e){e&&(wi("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=e)}function nh(r){ah(r),r.drafts_.forEach(eN),r.drafts_=null}function ah(r){r===An&&(An=r.parent_)}function Qm(r){return An=JL(An,r)}function eN(r){const e=r[rt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Km(r,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return r!==void 0&&r!==t?(t[rt].modified_&&(nh(e),ze(4)),Mt(r)&&(r=Do(e,r),e.parent_||Lo(e,r)),e.patches_&&wi("Patches").generateReplacementPatches_(t[rt].base_,r,e.patches_,e.inversePatches_)):r=Do(e,t,[]),nh(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),r!==cd?r:void 0}function Do(r,e,t){if(ml(e))return e;const i=e[rt];if(!i)return En(e,(s,n)=>Zm(r,i,e,s,n,t)),e;if(i.scope_!==r)return e;if(!i.modified_)return Lo(r,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let n=s,a=!1;i.type_===3&&(n=new Set(s),s.clear(),a=!0),En(n,(o,l)=>Zm(r,i,s,o,l,t,a)),Lo(r,s,!1),t&&r.patches_&&wi("Patches").generatePatches_(i,t,r.patches_,r.inversePatches_)}return i.copy_}function Zm(r,e,t,i,s,n,a){if(er(s)){const o=n&&e&&e.type_!==3&&!Tn(e.assigned_,i)?n.concat(i):void 0,l=Do(r,s,o);if(A1(t,i,l),er(l))r.canAutoFreeze_=!1;else return}else a&&t.add(s);if(Mt(s)&&!ml(s)){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1)return;Do(r,s),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&Lo(r,s)}}function Lo(r,e,t=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&hd(e,t)}function tN(r,e){const t=Array.isArray(r),i={type_:t?1:0,scope_:e?e.scope_:C1(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=i,n=dd;t&&(s=[i],n=Cn);const{revoke:a,proxy:o}=Proxy.revocable(s,n);return i.draft_=o,i.revoke_=a,o}var dd={get(r,e){if(e===rt)return r;const t=ri(r);if(!Tn(t,e))return rN(r,t,e);const i=t[e];return r.finalized_||!Mt(i)?i:i===Ru(r.base_,e)?(Iu(r),r.copy_[e]=lh(i,r)):i},has(r,e){return e in ri(r)},ownKeys(r){return Reflect.ownKeys(ri(r))},set(r,e,t){const i=P1(ri(r),e);if(i!=null&&i.set)return i.set.call(r.draft_,t),!0;if(!r.modified_){const s=Ru(ri(r),e),n=s==null?void 0:s[rt];if(n&&n.base_===t)return r.copy_[e]=t,r.assigned_[e]=!1,!0;if(QL(t,s)&&(t!==void 0||Tn(r.base_,e)))return!0;Iu(r),oh(r)}return r.copy_[e]===t&&(t!==void 0||e in r.copy_)||Number.isNaN(t)&&Number.isNaN(r.copy_[e])||(r.copy_[e]=t,r.assigned_[e]=!0),!0},deleteProperty(r,e){return Ru(r.base_,e)!==void 0||e in r.base_?(r.assigned_[e]=!1,Iu(r),oh(r)):delete r.assigned_[e],r.copy_&&delete r.copy_[e],!0},getOwnPropertyDescriptor(r,e){const t=ri(r),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:r.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){ze(11)},getPrototypeOf(r){return xi(r.base_)},setPrototypeOf(){ze(12)}},Cn={};En(dd,(r,e)=>{Cn[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Cn.deleteProperty=function(r,e){return Cn.set.call(this,r,e,void 0)};Cn.set=function(r,e,t){return dd.set.call(this,r[0],e,t,r[0])};function Ru(r,e){const t=r[rt];return(t?ri(t):r)[e]}function rN(r,e,t){var s;const i=P1(e,t);return i?"value"in i?i.value:(s=i.get)==null?void 0:s.call(r.draft_):void 0}function P1(r,e){if(!(e in r))return;let t=xi(r);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=xi(t)}}function oh(r){r.modified_||(r.modified_=!0,r.parent_&&oh(r.parent_))}function Iu(r){r.copy_||(r.copy_=ih(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var iN=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const n=t;t=e;const a=this;return function(l=n,...u){return a.produce(l,c=>t.call(this,c,...u))}}typeof t!="function"&&ze(6),i!==void 0&&typeof i!="function"&&ze(7);let s;if(Mt(e)){const n=Qm(this),a=lh(e,void 0);let o=!0;try{s=t(a),o=!1}finally{o?nh(n):ah(n)}return Ym(n,i),Km(s,n)}else if(!e||typeof e!="object"){if(s=t(e),s===void 0&&(s=e),s===cd&&(s=void 0),this.autoFreeze_&&hd(s,!0),i){const n=[],a=[];wi("Patches").generateReplacementPatches_(e,s,n,a),i(n,a)}return s}else ze(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let i,s;return[this.produce(e,t,(a,o)=>{i=a,s=o}),i,s]},typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof(r==null?void 0:r.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy)}createDraft(r){Mt(r)||ze(8),er(r)&&(r=sN(r));const e=Qm(this),t=lh(r,void 0);return t[rt].isManual_=!0,ah(e),t}finishDraft(r,e){const t=r&&r[rt];(!t||!t.isManual_)&&ze(9);const{scope_:i}=t;return Ym(i,e),Km(void 0,i)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}applyPatches(r,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}t>-1&&(e=e.slice(t+1));const i=wi("Patches").applyPatches_;return er(r)?i(r,e):this.produce(r,s=>i(s,e))}};function lh(r,e){const t=$n(r)?wi("MapSet").proxyMap_(r,e):Gn(r)?wi("MapSet").proxySet_(r,e):tN(r,e);return(e?e.scope_:C1()).drafts_.push(t),t}function sN(r){return er(r)||ze(10,r),R1(r)}function R1(r){if(!Mt(r)||ml(r))return r;const e=r[rt];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ih(r,e.scope_.immer_.useStrictShallowCopy_)}else t=ih(r,!0);return En(t,(i,s)=>{A1(t,i,R1(s))}),e&&(e.finalized_=!1),t}function nN(){const e="replace",t="add",i="remove";function s(h,f,p,m){switch(h.type_){case 0:case 2:return a(h,f,p,m);case 1:return n(h,f,p,m);case 3:return o(h,f,p,m)}}function n(h,f,p,m){let{base_:g,assigned_:b}=h,x=h.copy_;x.length<g.length&&([g,x]=[x,g],[p,m]=[m,p]);for(let y=0;y<g.length;y++)if(b[y]&&x[y]!==g[y]){const v=f.concat([y]);p.push({op:e,path:v,value:d(x[y])}),m.push({op:e,path:v,value:d(g[y])})}for(let y=g.length;y<x.length;y++){const v=f.concat([y]);p.push({op:t,path:v,value:d(x[y])})}for(let y=x.length-1;g.length<=y;--y){const v=f.concat([y]);m.push({op:i,path:v})}}function a(h,f,p,m){const{base_:g,copy_:b}=h;En(h.assigned_,(x,y)=>{const v=Pu(g,x),S=Pu(b,x),T=y?Tn(g,x)?e:t:i;if(v===S&&T===e)return;const w=f.concat(x);p.push(T===i?{op:T,path:w}:{op:T,path:w,value:S}),m.push(T===t?{op:i,path:w}:T===i?{op:t,path:w,value:d(v)}:{op:e,path:w,value:d(v)})})}function o(h,f,p,m){let{base_:g,copy_:b}=h,x=0;g.forEach(y=>{if(!b.has(y)){const v=f.concat([x]);p.push({op:i,path:v,value:y}),m.unshift({op:t,path:v,value:y})}x++}),x=0,b.forEach(y=>{if(!g.has(y)){const v=f.concat([x]);p.push({op:t,path:v,value:y}),m.unshift({op:i,path:v,value:y})}x++})}function l(h,f,p,m){p.push({op:e,path:[],value:f===cd?void 0:f}),m.push({op:e,path:[],value:h})}function u(h,f){return f.forEach(p=>{const{path:m,op:g}=p;let b=h;for(let S=0;S<m.length-1;S++){const T=_i(b);let w=m[S];typeof w!="string"&&typeof w!="number"&&(w=""+w),(T===0||T===1)&&(w==="__proto__"||w==="constructor")&&ze(16+3),typeof b=="function"&&w==="prototype"&&ze(16+3),b=Pu(b,w),typeof b!="object"&&ze(16+2,m.join("/"))}const x=_i(b),y=c(p.value),v=m[m.length-1];switch(g){case e:switch(x){case 2:return b.set(v,y);case 3:ze(16);default:return b[v]=y}case t:switch(x){case 1:return v==="-"?b.push(y):b.splice(v,0,y);case 2:return b.set(v,y);case 3:return b.add(y);default:return b[v]=y}case i:switch(x){case 1:return b.splice(v,1);case 2:return b.delete(v);case 3:return b.delete(p.value);default:return delete b[v]}default:ze(16+1,g)}}),h}function c(h){if(!Mt(h))return h;if(Array.isArray(h))return h.map(c);if($n(h))return new Map(Array.from(h.entries()).map(([p,m])=>[p,c(m)]));if(Gn(h))return new Set(Array.from(h).map(c));const f=Object.create(xi(h));for(const p in h)f[p]=c(h[p]);return Tn(h,sn)&&(f[sn]=h[sn]),f}function d(h){return er(h)?c(h):h}ZL("Patches",{applyPatches_:u,generatePatches_:s,generateReplacementPatches_:l})}var ot=new iN,Hn=ot.produce,I1=ot.produceWithPatches.bind(ot);ot.setAutoFreeze.bind(ot);ot.setUseStrictShallowCopy.bind(ot);var Jm=ot.applyPatches.bind(ot);ot.createDraft.bind(ot);ot.finishDraft.bind(ot);function aN(r,e=`expected a function, instead received ${typeof r}`){if(typeof r!="function")throw new TypeError(e)}function oN(r,e=`expected an object, instead received ${typeof r}`){if(typeof r!="object")throw new TypeError(e)}function lN(r,e="expected all items to be functions, instead received the following types: "){if(!r.every(t=>typeof t=="function")){const t=r.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var eg=r=>Array.isArray(r)?r:[r];function uN(r){const e=Array.isArray(r[0])?r[0]:r;return lN(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function cN(r,e){const t=[],{length:i}=r;for(let s=0;s<i;s++)t.push(r[s].apply(null,e));return t}var hN=class{constructor(r){this.value=r}deref(){return this.value}},dN=typeof WeakRef<"u"?WeakRef:hN,fN=0,tg=1;function Pa(){return{s:fN,v:void 0,o:null,p:null}}function No(r,e={}){let t=Pa();const{resultEqualityCheck:i}=e;let s,n=0;function a(){var d;let o=t;const{length:l}=arguments;for(let h=0,f=l;h<f;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=o.o;m===null&&(o.o=m=new WeakMap);const g=m.get(p);g===void 0?(o=Pa(),m.set(p,o)):o=g}else{let m=o.p;m===null&&(o.p=m=new Map);const g=m.get(p);g===void 0?(o=Pa(),m.set(p,o)):o=g}}const u=o;let c;if(o.s===tg)c=o.v;else if(c=r.apply(null,arguments),n++,i){const h=((d=s==null?void 0:s.deref)==null?void 0:d.call(s))??s;h!=null&&i(h,c)&&(c=h,n!==0&&n--),s=typeof c=="object"&&c!==null||typeof c=="function"?new dN(c):c}return u.s=tg,u.v=c,c}return a.clearCache=()=>{t=Pa(),a.resetResultsCount()},a.resultsCount=()=>n,a.resetResultsCount=()=>{n=0},a}function pN(r,...e){const t=typeof r=="function"?{memoize:r,memoizeOptions:e}:r,i=(...s)=>{let n=0,a=0,o,l={},u=s.pop();typeof u=="object"&&(l=u,u=s.pop()),aN(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...t,...l},{memoize:d,memoizeOptions:h=[],argsMemoize:f=No,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=eg(h),b=eg(p),x=uN(s),y=d(function(){return n++,u.apply(null,arguments)},...g),v=f(function(){a++;const T=cN(x,arguments);return o=y.apply(null,T),o},...b);return Object.assign(v,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:d,argsMemoize:f})};return Object.assign(i,{withTypes:()=>i}),i}var fd=pN(No),mN=Object.assign((r,e=fd)=>{oN(r,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof r}`);const t=Object.keys(r),i=t.map(n=>r[n]);return e(i,(...n)=>n.reduce((a,o,l)=>(a[t[l]]=o,a),{}))},{withTypes:()=>mN});function M1(r){return({dispatch:t,getState:i})=>s=>n=>typeof n=="function"?n(t,i,r):s(n)}var gN=M1(),yN=M1,vN=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Oo:Oo.apply(null,arguments)},bN=r=>r&&typeof r.match=="function";function Ct(r,e){function t(...i){if(e){let s=e(...i);if(!s)throw new Error(mt(0));return{type:r,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:r,payload:i[0]}}return t.toString=()=>`${r}`,t.type=r,t.match=i=>E1(i)&&i.type===r,t}var O1=class Vs extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Vs.prototype)}static get[Symbol.species](){return Vs}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Vs(...e[0].concat(this)):new Vs(...e.concat(this))}};function rg(r){return Mt(r)?Hn(r,()=>{}):r}function ig(r,e,t){if(r.has(e)){let s=r.get(e);return t.update&&(s=t.update(s,e,r),r.set(e,s)),s}if(!t.insert)throw new Error(mt(10));const i=t.insert(e,r);return r.set(e,i),i}function xN(r){return typeof r=="boolean"}var _N=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:s=!0,actionCreatorCheck:n=!0}=e??{};let a=new O1;return t&&(xN(t)?a.push(gN):a.push(yN(t.extraArgument))),a},oi="RTK_autoBatch",Ms=()=>r=>({payload:r,meta:{[oi]:!0}}),D1=r=>e=>{setTimeout(e,r)},wN=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:D1(10),SN=(r={type:"raf"})=>e=>(...t)=>{const i=e(...t);let s=!0,n=!1,a=!1;const o=new Set,l=r.type==="tick"?queueMicrotask:r.type==="raf"?wN:r.type==="callback"?r.queueNotification:D1(r.timeout),u=()=>{a=!1,n&&(n=!1,o.forEach(c=>c()))};return Object.assign({},i,{subscribe(c){const d=()=>s&&c(),h=i.subscribe(d);return o.add(c),()=>{h(),o.delete(c)}},dispatch(c){var d;try{return s=!((d=c==null?void 0:c.meta)!=null&&d[oi]),n=!s,n&&(a||(a=!0,l(u))),i.dispatch(c)}finally{s=!0}}})},EN=r=>function(t){const{autoBatch:i=!0}=t??{};let s=new O1(r);return i&&s.push(SN(typeof i=="object"?i:void 0)),s};function TN(r){const e=_N(),{reducer:t=void 0,middleware:i,devTools:s=!0,preloadedState:n=void 0,enhancers:a=void 0}=r||{};let o;if(typeof t=="function")o=t;else if(Jt(t))o=ud(t);else throw new Error(mt(1));let l;typeof i=="function"?l=i(e):l=e();let u=Oo;s&&(u=vN({trace:!1,...typeof s=="object"&&s}));const c=qL(...l),d=EN(c);let h=typeof a=="function"?a(d):d();const f=u(...h);return S1(o,n,f)}function L1(r){const e={},t=[];let i;const s={addCase(n,a){const o=typeof n=="string"?n:n.type;if(!o)throw new Error(mt(28));if(o in e)throw new Error(mt(29));return e[o]=a,s},addMatcher(n,a){return t.push({matcher:n,reducer:a}),s},addDefaultCase(n){return i=n,s}};return r(s),[e,t,i]}function AN(r){return typeof r=="function"}function CN(r,e){let[t,i,s]=L1(e),n;if(AN(r))n=()=>rg(r());else{const o=rg(r);n=()=>o}function a(o=n(),l){let u=[t[l.type],...i.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[s]),u.reduce((c,d)=>{if(d)if(er(c)){const f=d(c,l);return f===void 0?c:f}else{if(Mt(c))return Hn(c,h=>d(h,l));{const h=d(c,l);if(h===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return c},o)}return a.getInitialState=n,a}var N1=(r,e)=>bN(r)?r.match(e):r(e);function yr(...r){return e=>r.some(t=>N1(t,e))}function nn(...r){return e=>r.every(t=>N1(t,e))}function gl(r,e){if(!r||!r.meta)return!1;const t=typeof r.meta.requestId=="string",i=e.indexOf(r.meta.requestStatus)>-1;return t&&i}function zn(r){return typeof r[0]=="function"&&"pending"in r[0]&&"fulfilled"in r[0]&&"rejected"in r[0]}function pd(...r){return r.length===0?e=>gl(e,["pending"]):zn(r)?yr(...r.map(e=>e.pending)):pd()(r[0])}function fs(...r){return r.length===0?e=>gl(e,["rejected"]):zn(r)?yr(...r.map(e=>e.rejected)):fs()(r[0])}function yl(...r){const e=t=>t&&t.meta&&t.meta.rejectedWithValue;return r.length===0?nn(fs(...r),e):zn(r)?nn(fs(...r),e):yl()(r[0])}function Ur(...r){return r.length===0?e=>gl(e,["fulfilled"]):zn(r)?yr(...r.map(e=>e.fulfilled)):Ur()(r[0])}function uh(...r){return r.length===0?e=>gl(e,["pending","fulfilled","rejected"]):zn(r)?yr(...r.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):uh()(r[0])}var PN="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",md=(r=21)=>{let e="",t=r;for(;t--;)e+=PN[Math.random()*64|0];return e},RN=["name","message","stack","code"],Mu=class{constructor(r,e){bl(this,"_type");this.payload=r,this.meta=e}},sg=class{constructor(r,e){bl(this,"_type");this.payload=r,this.meta=e}},IN=r=>{if(typeof r=="object"&&r!==null){const e={};for(const t of RN)typeof r[t]=="string"&&(e[t]=r[t]);return e}return{message:String(r)}},ng=(()=>{function r(e,t,i){const s=Ct(e+"/fulfilled",(l,u,c,d)=>({payload:l,meta:{...d||{},arg:c,requestId:u,requestStatus:"fulfilled"}})),n=Ct(e+"/pending",(l,u,c)=>({payload:void 0,meta:{...c||{},arg:u,requestId:l,requestStatus:"pending"}})),a=Ct(e+"/rejected",(l,u,c,d,h)=>({payload:d,error:(i&&i.serializeError||IN)(l||"Rejected"),meta:{...h||{},arg:c,requestId:u,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function o(l){return(u,c,d)=>{const h=i!=null&&i.idGenerator?i.idGenerator(l):md(),f=new AbortController;let p,m;function g(x){m=x,f.abort()}const b=async function(){var v,S;let x;try{let T=(v=i==null?void 0:i.condition)==null?void 0:v.call(i,l,{getState:c,extra:d});if(ON(T)&&(T=await T),T===!1||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const w=new Promise((E,A)=>{p=()=>{A({name:"AbortError",message:m||"Aborted"})},f.signal.addEventListener("abort",p)});u(n(h,l,(S=i==null?void 0:i.getPendingMeta)==null?void 0:S.call(i,{requestId:h,arg:l},{getState:c,extra:d}))),x=await Promise.race([w,Promise.resolve(t(l,{dispatch:u,getState:c,extra:d,requestId:h,signal:f.signal,abort:g,rejectWithValue:(E,A)=>new Mu(E,A),fulfillWithValue:(E,A)=>new sg(E,A)})).then(E=>{if(E instanceof Mu)throw E;return E instanceof sg?s(E.payload,h,l,E.meta):s(E,h,l)})])}catch(T){x=T instanceof Mu?a(null,h,l,T.payload,T.meta):a(T,h,l)}finally{p&&f.signal.removeEventListener("abort",p)}return i&&!i.dispatchConditionRejection&&a.match(x)&&x.meta.condition||u(x),x}();return Object.assign(b,{abort:g,requestId:h,arg:l,unwrap(){return b.then(MN)}})}}return Object.assign(o,{pending:n,rejected:a,fulfilled:s,settled:yr(a,s),typePrefix:e})}return r.withTypes=()=>r,r})();function MN(r){if(r.meta&&r.meta.rejectedWithValue)throw r.payload;if(r.error)throw r.error;return r.payload}function ON(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var DN=Symbol.for("rtk-slice-createasyncthunk");function LN(r,e){return`${r}/${e}`}function NN({creators:r}={}){var t;const e=(t=r==null?void 0:r.asyncThunk)==null?void 0:t[DN];return function(s){const{name:n,reducerPath:a=n}=s;if(!n)throw new Error(mt(11));typeof process<"u";const o=(typeof s.reducers=="function"?s.reducers(kN()):s.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(y,v){const S=typeof y=="string"?y:y.type;if(!S)throw new Error(mt(12));if(S in u.sliceCaseReducersByType)throw new Error(mt(13));return u.sliceCaseReducersByType[S]=v,c},addMatcher(y,v){return u.sliceMatchers.push({matcher:y,reducer:v}),c},exposeAction(y,v){return u.actionCreators[y]=v,c},exposeCaseReducer(y,v){return u.sliceCaseReducersByName[y]=v,c}};l.forEach(y=>{const v=o[y],S={reducerName:y,type:LN(n,y),createNotation:typeof s.reducers=="function"};UN(v)?$N(S,v,c,e):BN(S,v,c)});function d(){const[y={},v=[],S=void 0]=typeof s.extraReducers=="function"?L1(s.extraReducers):[s.extraReducers],T={...y,...u.sliceCaseReducersByType};return CN(s.initialState,w=>{for(let E in T)w.addCase(E,T[E]);for(let E of u.sliceMatchers)w.addMatcher(E.matcher,E.reducer);for(let E of v)w.addMatcher(E.matcher,E.reducer);S&&w.addDefaultCase(S)})}const h=y=>y,f=new Map;let p;function m(y,v){return p||(p=d()),p(y,v)}function g(){return p||(p=d()),p.getInitialState()}function b(y,v=!1){function S(w){let E=w[y];return typeof E>"u"&&v&&(E=g()),E}function T(w=h){const E=ig(f,v,{insert:()=>new WeakMap});return ig(E,w,{insert:()=>{const A={};for(const[M,I]of Object.entries(s.selectors??{}))A[M]=FN(I,w,g,v);return A}})}return{reducerPath:y,getSelectors:T,get selectors(){return T(S)},selectSlice:S}}const x={name:n,reducer:m,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...b(a),injectInto(y,{reducerPath:v,...S}={}){const T=v??a;return y.inject({reducerPath:T,reducer:m},S),{...x,...b(T,!0)}}};return x}}function FN(r,e,t,i){function s(n,...a){let o=e(n);return typeof o>"u"&&i&&(o=t()),r(o,...a)}return s.unwrapped=r,s}var Fi=NN();function kN(){function r(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return r.withTypes=()=>r,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:r}}function BN({type:r,reducerName:e,createNotation:t},i,s){let n,a;if("reducer"in i){if(t&&!jN(i))throw new Error(mt(17));n=i.reducer,a=i.prepare}else n=i;s.addCase(r,n).exposeCaseReducer(e,n).exposeAction(e,a?Ct(r,a):Ct(r))}function UN(r){return r._reducerDefinitionType==="asyncThunk"}function jN(r){return r._reducerDefinitionType==="reducerWithPrepare"}function $N({type:r,reducerName:e},t,i,s){if(!s)throw new Error(mt(18));const{payloadCreator:n,fulfilled:a,pending:o,rejected:l,settled:u,options:c}=t,d=s(r,n,c);i.exposeAction(e,d),a&&i.addCase(d.fulfilled,a),o&&i.addCase(d.pending,o),l&&i.addCase(d.rejected,l),u&&i.addMatcher(d.settled,u),i.exposeCaseReducer(e,{fulfilled:a||Ra,pending:o||Ra,rejected:l||Ra,settled:u||Ra})}function Ra(){}function mt(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var F1=(r=>(r.uninitialized="uninitialized",r.pending="pending",r.fulfilled="fulfilled",r.rejected="rejected",r))(F1||{});function GN(r){return{status:r,isUninitialized:r==="uninitialized",isLoading:r==="pending",isSuccess:r==="fulfilled",isError:r==="rejected"}}var ag=Jt;function k1(r,e){if(r===e||!(ag(r)&&ag(e)||Array.isArray(r)&&Array.isArray(e)))return e;const t=Object.keys(e),i=Object.keys(r);let s=t.length===i.length;const n=Array.isArray(e)?[]:{};for(const a of t)n[a]=k1(r[a],e[a]),s&&(s=r[a]===n[a]);return s?r:n}function as(r){let e=0;for(const t in r)e++;return e}var og=r=>[].concat(...r);function HN(r){return new RegExp("(^|:)//").test(r)}function zN(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function lg(r){return r!=null}function VN(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var WN=r=>r.replace(/\/$/,""),qN=r=>r.replace(/^\//,"");function XN(r,e){if(!r)return e;if(!e)return r;if(HN(e))return e;const t=r.endsWith("/")||!e.startsWith("?")?"/":"";return r=WN(r),e=qN(e),`${r}${t}${e}`}var ug=(...r)=>fetch(...r),YN=r=>r.status>=200&&r.status<=299,QN=r=>/ion\/(vnd\.api\+)?json/.test(r.get("content-type")||"");function cg(r){if(!Jt(r))return r;const e={...r};for(const[t,i]of Object.entries(e))i===void 0&&delete e[t];return e}function KN({baseUrl:r,prepareHeaders:e=d=>d,fetchFn:t=ug,paramsSerializer:i,isJsonContentType:s=QN,jsonContentType:n="application/json",jsonReplacer:a,timeout:o,responseHandler:l,validateStatus:u,...c}={}){return typeof fetch>"u"&&t===ug&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(h,f,p)=>{const{getState:m,extra:g,endpoint:b,forced:x,type:y}=f;let v,{url:S,headers:T=new Headers(c.headers),params:w=void 0,responseHandler:E=l??"json",validateStatus:A=u??YN,timeout:M=o,...I}=typeof h=="string"?{url:h}:h,O,R=f.signal;M&&(O=new AbortController,f.signal.addEventListener("abort",O.abort),R=O.signal);let _={...c,signal:R,...I};T=new Headers(cg(T)),_.headers=await e(T,{getState:m,arg:h,extra:g,endpoint:b,forced:x,type:y,extraOptions:p})||T;const C=q=>typeof q=="object"&&(Jt(q)||Array.isArray(q)||typeof q.toJSON=="function");if(!_.headers.has("content-type")&&C(_.body)&&_.headers.set("content-type",n),C(_.body)&&s(_.headers)&&(_.body=JSON.stringify(_.body,a)),w){const q=~S.indexOf("?")?"&":"?",K=i?i(w):new URLSearchParams(cg(w));S+=q+K}S=XN(r,S);const D=new Request(S,_);v={request:new Request(S,_)};let L,B=!1,F=O&&setTimeout(()=>{B=!0,O.abort()},M);try{L=await t(D)}catch(q){return{error:{status:B?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(q)},meta:v}}finally{F&&clearTimeout(F),O==null||O.signal.removeEventListener("abort",O.abort)}const U=L.clone();v.response=U;let $,z="";try{let q;if(await Promise.all([d(L,E).then(K=>$=K,K=>q=K),U.text().then(K=>z=K,()=>{})]),q)throw q}catch(q){return{error:{status:"PARSING_ERROR",originalStatus:L.status,data:z,error:String(q)},meta:v}}return A(L,$)?{data:$,meta:v}:{error:{status:L.status,data:$},meta:v}};async function d(h,f){if(typeof f=="function")return f(h);if(f==="content-type"&&(f=s(h.headers)?"json":"text"),f==="json"){const p=await h.text();return p.length?JSON.parse(p):null}return h.text()}}var hg=class{constructor(r,e=void 0){this.value=r,this.meta=e}},gd=Ct("__rtkq/focused"),B1=Ct("__rtkq/unfocused"),yd=Ct("__rtkq/online"),U1=Ct("__rtkq/offline");function j1(r){return r.type==="query"}function ZN(r){return r.type==="mutation"}function vd(r,e,t,i,s,n){return JN(r)?r(e,t,i,s).map(ch).map(n):Array.isArray(r)?r.map(ch).map(n):[]}function JN(r){return typeof r=="function"}function ch(r){return typeof r=="string"?{type:r}:r}function e3(r,e){return r.catch(e)}var Pn=Symbol("forceQueryFn"),hh=r=>typeof r[Pn]=="function";function t3({serializeQueryArgs:r,queryThunk:e,mutationThunk:t,api:i,context:s}){const n=new Map,a=new Map,{unsubscribeQueryResult:o,removeMutationResult:l,updateSubscriptionOptions:u}=i.internalActions;return{buildInitiateQuery:p,buildInitiateMutation:m,getRunningQueryThunk:c,getRunningMutationThunk:d,getRunningQueriesThunk:h,getRunningMutationsThunk:f};function c(g,b){return x=>{var S;const y=s.endpointDefinitions[g],v=r({queryArgs:b,endpointDefinition:y,endpointName:g});return(S=n.get(x))==null?void 0:S[v]}}function d(g,b){return x=>{var y;return(y=a.get(x))==null?void 0:y[b]}}function h(){return g=>Object.values(n.get(g)||{}).filter(lg)}function f(){return g=>Object.values(a.get(g)||{}).filter(lg)}function p(g,b){const x=(y,{subscribe:v=!0,forceRefetch:S,subscriptionOptions:T,[Pn]:w,...E}={})=>(A,M)=>{var $;const I=r({queryArgs:y,endpointDefinition:b,endpointName:g}),O=e({...E,type:"query",subscribe:v,forceRefetch:S,subscriptionOptions:T,endpointName:g,originalArgs:y,queryCacheKey:I,[Pn]:w}),R=i.endpoints[g].select(y),_=A(O),C=R(M()),{requestId:D,abort:k}=_,L=C.requestId!==D,B=($=n.get(A))==null?void 0:$[I],F=()=>R(M()),U=Object.assign(w?_.then(F):L&&!B?Promise.resolve(C):Promise.all([B,_]).then(F),{arg:y,requestId:D,subscriptionOptions:T,queryCacheKey:I,abort:k,async unwrap(){const z=await U;if(z.isError)throw z.error;return z.data},refetch:()=>A(x(y,{subscribe:!1,forceRefetch:!0})),unsubscribe(){v&&A(o({queryCacheKey:I,requestId:D}))},updateSubscriptionOptions(z){U.subscriptionOptions=z,A(u({endpointName:g,requestId:D,queryCacheKey:I,options:z}))}});if(!B&&!L&&!w){const z=n.get(A)||{};z[I]=U,n.set(A,z),U.then(()=>{delete z[I],as(z)||n.delete(A)})}return U};return x}function m(g){return(b,{track:x=!0,fixedCacheKey:y}={})=>(v,S)=>{const T=t({type:"mutation",endpointName:g,originalArgs:b,track:x,fixedCacheKey:y}),w=v(T),{requestId:E,abort:A,unwrap:M}=w,I=e3(w.unwrap().then(C=>({data:C})),C=>({error:C})),O=()=>{v(l({requestId:E,fixedCacheKey:y}))},R=Object.assign(I,{arg:w.arg,requestId:E,abort:A,unwrap:M,reset:O}),_=a.get(v)||{};return a.set(v,_),_[E]=R,R.then(()=>{delete _[E],as(_)||a.delete(v)}),y&&(_[y]=R,R.then(()=>{_[y]===R&&(delete _[y],as(_)||a.delete(v))})),R}}}function dg(r){return r}function r3({reducerPath:r,baseQuery:e,context:{endpointDefinitions:t},serializeQueryArgs:i,api:s,assertTagType:n}){const a=(x,y,v,S)=>(T,w)=>{const E=t[x],A=i({queryArgs:y,endpointDefinition:E,endpointName:x});if(T(s.internalActions.queryResultPatched({queryCacheKey:A,patches:v})),!S)return;const M=s.endpoints[x].select(y)(w()),I=vd(E.providesTags,M.data,void 0,y,{},n);T(s.internalActions.updateProvidedBy({queryCacheKey:A,providedTags:I}))},o=(x,y,v,S=!0)=>(T,w)=>{const A=s.endpoints[x].select(y)(w()),M={patches:[],inversePatches:[],undo:()=>T(s.util.patchQueryData(x,y,M.inversePatches,S))};if(A.status==="uninitialized")return M;let I;if("data"in A)if(Mt(A.data)){const[O,R,_]=I1(A.data,v);M.patches.push(...R),M.inversePatches.push(..._),I=O}else I=v(A.data),M.patches.push({op:"replace",path:[],value:I}),M.inversePatches.push({op:"replace",path:[],value:A.data});return M.patches.length===0||T(s.util.patchQueryData(x,y,M.patches,S)),M},l=(x,y,v)=>S=>S(s.endpoints[x].initiate(y,{subscribe:!1,forceRefetch:!0,[Pn]:()=>({data:v})})),u=async(x,{signal:y,abort:v,rejectWithValue:S,fulfillWithValue:T,dispatch:w,getState:E,extra:A})=>{const M=t[x.endpointName];try{let I=dg,O;const R={signal:y,abort:v,dispatch:w,getState:E,extra:A,endpoint:x.endpointName,type:x.type,forced:x.type==="query"?c(x,E()):void 0,queryCacheKey:x.type==="query"?x.queryCacheKey:void 0},_=x.type==="query"?x[Pn]:void 0;if(_?O=_():M.query?(O=await e(M.query(x.originalArgs),R,M.extraOptions),M.transformResponse&&(I=M.transformResponse)):O=await M.queryFn(x.originalArgs,R,M.extraOptions,C=>e(C,R,M.extraOptions)),typeof process<"u",O.error)throw new hg(O.error,O.meta);return T(await I(O.data,O.meta,x.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:O.meta,[oi]:!0})}catch(I){let O=I;if(O instanceof hg){let R=dg;M.query&&M.transformErrorResponse&&(R=M.transformErrorResponse);try{return S(await R(O.value,O.meta,x.originalArgs),{baseQueryMeta:O.meta,[oi]:!0})}catch(_){O=_}}throw typeof process<"u",console.error(O),O}};function c(x,y){var E,A,M;const v=(A=(E=y[r])==null?void 0:E.queries)==null?void 0:A[x.queryCacheKey],S=(M=y[r])==null?void 0:M.config.refetchOnMountOrArgChange,T=v==null?void 0:v.fulfilledTimeStamp,w=x.forceRefetch??(x.subscribe&&S);return w?w===!0||(Number(new Date)-Number(T))/1e3>=w:!1}const d=ng(`${r}/executeQuery`,u,{getPendingMeta(){return{startedTimeStamp:Date.now(),[oi]:!0}},condition(x,{getState:y}){var M,I,O;const v=y(),S=(I=(M=v[r])==null?void 0:M.queries)==null?void 0:I[x.queryCacheKey],T=S==null?void 0:S.fulfilledTimeStamp,w=x.originalArgs,E=S==null?void 0:S.originalArgs,A=t[x.endpointName];return hh(x)?!0:(S==null?void 0:S.status)==="pending"?!1:c(x,v)||j1(A)&&((O=A==null?void 0:A.forceRefetch)!=null&&O.call(A,{currentArg:w,previousArg:E,endpointState:S,state:v}))?!0:!T},dispatchConditionRejection:!0}),h=ng(`${r}/executeMutation`,u,{getPendingMeta(){return{startedTimeStamp:Date.now(),[oi]:!0}}}),f=x=>"force"in x,p=x=>"ifOlderThan"in x,m=(x,y,v)=>(S,T)=>{const w=f(v)&&v.force,E=p(v)&&v.ifOlderThan,A=(I=!0)=>{const O={forceRefetch:I,isPrefetch:!0};return s.endpoints[x].initiate(y,O)},M=s.endpoints[x].select(y)(T());if(w)S(A());else if(E){const I=M==null?void 0:M.fulfilledTimeStamp;if(!I){S(A());return}(Number(new Date)-Number(new Date(I)))/1e3>=E&&S(A())}else S(A(!1))};function g(x){return y=>{var v,S;return((S=(v=y==null?void 0:y.meta)==null?void 0:v.arg)==null?void 0:S.endpointName)===x}}function b(x,y){return{matchPending:nn(pd(x),g(y)),matchFulfilled:nn(Ur(x),g(y)),matchRejected:nn(fs(x),g(y))}}return{queryThunk:d,mutationThunk:h,prefetch:m,updateQueryData:o,upsertQueryData:l,patchQueryData:a,buildMatchThunkActions:b}}function $1(r,e,t,i){return vd(t[r.meta.arg.endpointName][e],Ur(r)?r.payload:void 0,yl(r)?r.payload:void 0,r.meta.arg.originalArgs,"baseQueryMeta"in r.meta?r.meta.baseQueryMeta:void 0,i)}function Ia(r,e,t){const i=r[e];i&&t(i)}function Rn(r){return("arg"in r?r.arg.fixedCacheKey:r.fixedCacheKey)??r.requestId}function fg(r,e,t){const i=r[Rn(e)];i&&t(i)}var Os={};function i3({reducerPath:r,queryThunk:e,mutationThunk:t,serializeQueryArgs:i,context:{endpointDefinitions:s,apiUid:n,extractRehydrationInfo:a,hasRehydrationInfo:o},assertTagType:l,config:u}){const c=Ct(`${r}/resetApiState`);function d(T,w,E,A){var M;T[M=w.queryCacheKey]??(T[M]={status:"uninitialized",endpointName:w.endpointName}),Ia(T,w.queryCacheKey,I=>{I.status="pending",I.requestId=E&&I.requestId?I.requestId:A.requestId,w.originalArgs!==void 0&&(I.originalArgs=w.originalArgs),I.startedTimeStamp=A.startedTimeStamp})}function h(T,w,E){Ia(T,w.arg.queryCacheKey,A=>{if(A.requestId!==w.requestId&&!hh(w.arg))return;const{merge:M}=s[w.arg.endpointName];if(A.status="fulfilled",M)if(A.data!==void 0){const{fulfilledTimeStamp:I,arg:O,baseQueryMeta:R,requestId:_}=w;let C=Hn(A.data,D=>M(D,E,{arg:O.originalArgs,baseQueryMeta:R,fulfilledTimeStamp:I,requestId:_}));A.data=C}else A.data=E;else A.data=s[w.arg.endpointName].structuralSharing??!0?k1(er(A.data)?YL(A.data):A.data,E):E;delete A.error,A.fulfilledTimeStamp=w.fulfilledTimeStamp})}const f=Fi({name:`${r}/queries`,initialState:Os,reducers:{removeQueryResult:{reducer(T,{payload:{queryCacheKey:w}}){delete T[w]},prepare:Ms()},cacheEntriesUpserted:{reducer(T,w){for(const E of w.payload){const{queryDescription:A,value:M}=E;d(T,A,!0,{arg:A,requestId:w.meta.requestId,startedTimeStamp:w.meta.timestamp}),h(T,{arg:A,requestId:w.meta.requestId,fulfilledTimeStamp:w.meta.timestamp,baseQueryMeta:{}},M)}},prepare:T=>({payload:T.map(A=>{const{endpointName:M,arg:I,value:O}=A,R=s[M];return{queryDescription:{type:"query",endpointName:M,originalArgs:A.arg,queryCacheKey:i({queryArgs:I,endpointDefinition:R,endpointName:M})},value:O}}),meta:{[oi]:!0,requestId:md(),timestamp:Date.now()}})},queryResultPatched:{reducer(T,{payload:{queryCacheKey:w,patches:E}}){Ia(T,w,A=>{A.data=Jm(A.data,E.concat())})},prepare:Ms()}},extraReducers(T){T.addCase(e.pending,(w,{meta:E,meta:{arg:A}})=>{const M=hh(A);d(w,A,M,E)}).addCase(e.fulfilled,(w,{meta:E,payload:A})=>{h(w,E,A)}).addCase(e.rejected,(w,{meta:{condition:E,arg:A,requestId:M},error:I,payload:O})=>{Ia(w,A.queryCacheKey,R=>{if(!E){if(R.requestId!==M)return;R.status="rejected",R.error=O??I}})}).addMatcher(o,(w,E)=>{const{queries:A}=a(E);for(const[M,I]of Object.entries(A))((I==null?void 0:I.status)==="fulfilled"||(I==null?void 0:I.status)==="rejected")&&(w[M]=I)})}}),p=Fi({name:`${r}/mutations`,initialState:Os,reducers:{removeMutationResult:{reducer(T,{payload:w}){const E=Rn(w);E in T&&delete T[E]},prepare:Ms()}},extraReducers(T){T.addCase(t.pending,(w,{meta:E,meta:{requestId:A,arg:M,startedTimeStamp:I}})=>{M.track&&(w[Rn(E)]={requestId:A,status:"pending",endpointName:M.endpointName,startedTimeStamp:I})}).addCase(t.fulfilled,(w,{payload:E,meta:A})=>{A.arg.track&&fg(w,A,M=>{M.requestId===A.requestId&&(M.status="fulfilled",M.data=E,M.fulfilledTimeStamp=A.fulfilledTimeStamp)})}).addCase(t.rejected,(w,{payload:E,error:A,meta:M})=>{M.arg.track&&fg(w,M,I=>{I.requestId===M.requestId&&(I.status="rejected",I.error=E??A)})}).addMatcher(o,(w,E)=>{const{mutations:A}=a(E);for(const[M,I]of Object.entries(A))((I==null?void 0:I.status)==="fulfilled"||(I==null?void 0:I.status)==="rejected")&&M!==(I==null?void 0:I.requestId)&&(w[M]=I)})}}),m=Fi({name:`${r}/invalidation`,initialState:Os,reducers:{updateProvidedBy:{reducer(T,w){var M,I;const{queryCacheKey:E,providedTags:A}=w.payload;for(const O of Object.values(T))for(const R of Object.values(O)){const _=R.indexOf(E);_!==-1&&R.splice(_,1)}for(const{type:O,id:R}of A){const _=(M=T[O]??(T[O]={}))[I=R||"__internal_without_id"]??(M[I]=[]);_.includes(E)||_.push(E)}},prepare:Ms()}},extraReducers(T){T.addCase(f.actions.removeQueryResult,(w,{payload:{queryCacheKey:E}})=>{for(const A of Object.values(w))for(const M of Object.values(A)){const I=M.indexOf(E);I!==-1&&M.splice(I,1)}}).addMatcher(o,(w,E)=>{var M,I;const{provided:A}=a(E);for(const[O,R]of Object.entries(A))for(const[_,C]of Object.entries(R)){const D=(M=w[O]??(w[O]={}))[I=_||"__internal_without_id"]??(M[I]=[]);for(const k of C)D.includes(k)||D.push(k)}}).addMatcher(yr(Ur(e),yl(e)),(w,E)=>{const A=$1(E,"providesTags",s,l),{queryCacheKey:M}=E.meta.arg;m.caseReducers.updateProvidedBy(w,m.actions.updateProvidedBy({queryCacheKey:M,providedTags:A}))})}}),g=Fi({name:`${r}/subscriptions`,initialState:Os,reducers:{updateSubscriptionOptions(T,w){},unsubscribeQueryResult(T,w){},internal_getRTKQSubscriptions(){}}}),b=Fi({name:`${r}/internalSubscriptions`,initialState:Os,reducers:{subscriptionsUpdated:{reducer(T,w){return Jm(T,w.payload)},prepare:Ms()}}}),x=Fi({name:`${r}/config`,initialState:{online:VN(),focused:zN(),middlewareRegistered:!1,...u},reducers:{middlewareRegistered(T,{payload:w}){T.middlewareRegistered=T.middlewareRegistered==="conflict"||n!==w?"conflict":!0}},extraReducers:T=>{T.addCase(yd,w=>{w.online=!0}).addCase(U1,w=>{w.online=!1}).addCase(gd,w=>{w.focused=!0}).addCase(B1,w=>{w.focused=!1}).addMatcher(o,w=>({...w}))}}),y=ud({queries:f.reducer,mutations:p.reducer,provided:m.reducer,subscriptions:b.reducer,config:x.reducer}),v=(T,w)=>y(c.match(w)?void 0:T,w),S={...x.actions,...f.actions,...g.actions,...b.actions,...p.actions,...m.actions,resetApiState:c};return{reducer:v,actions:S}}var li=Symbol.for("RTKQ/skipToken"),G1={status:"uninitialized"},pg=Hn(G1,()=>{}),mg=Hn(G1,()=>{});function s3({serializeQueryArgs:r,reducerPath:e,createSelector:t}){const i=d=>pg,s=d=>mg;return{buildQuerySelector:o,buildMutationSelector:l,selectInvalidatedBy:u,selectCachedArgsForQuery:c};function n(d){return{...d,...GN(d.status)}}function a(d){return d[e]}function o(d,h){return f=>{const p=r({queryArgs:f,endpointDefinition:h,endpointName:d});return t(f===li?i:b=>{var x,y;return((y=(x=a(b))==null?void 0:x.queries)==null?void 0:y[p])??pg},n)}}function l(){return d=>{let h;return typeof d=="object"?h=Rn(d)??li:h=d,t(h===li?s:m=>{var g,b;return((b=(g=a(m))==null?void 0:g.mutations)==null?void 0:b[h])??mg},n)}}function u(d,h){const f=d[e],p=new Set;for(const m of h.map(ch)){const g=f.provided[m.type];if(!g)continue;let b=(m.id!==void 0?g[m.id]:og(Object.values(g)))??[];for(const x of b)p.add(x)}return og(Array.from(p.values()).map(m=>{const g=f.queries[m];return g?[{queryCacheKey:m,endpointName:g.endpointName,originalArgs:g.originalArgs}]:[]}))}function c(d,h){return Object.values(d[e].queries).filter(f=>(f==null?void 0:f.endpointName)===h&&f.status!=="uninitialized").map(f=>f.originalArgs)}}var ki=WeakMap?new WeakMap:void 0,gg=({endpointName:r,queryArgs:e})=>{let t="";const i=ki==null?void 0:ki.get(e);if(typeof i=="string")t=i;else{const s=JSON.stringify(e,(n,a)=>(a=typeof a=="bigint"?{$bigint:a.toString()}:a,a=Jt(a)?Object.keys(a).sort().reduce((o,l)=>(o[l]=a[l],o),{}):a,a));Jt(e)&&(ki==null||ki.set(e,s)),t=s}return`${r}(${t})`};function n3(...r){return function(t){const i=No(u=>{var c;return(c=t.extractRehydrationInfo)==null?void 0:c.call(t,u,{reducerPath:t.reducerPath??"api"})}),s={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:i,serializeQueryArgs(u){let c=gg;if("serializeQueryArgs"in u.endpointDefinition){const d=u.endpointDefinition.serializeQueryArgs;c=h=>{const f=d(h);return typeof f=="string"?f:gg({...h,queryArgs:f})}}else t.serializeQueryArgs&&(c=t.serializeQueryArgs);return c(u)},tagTypes:[...t.tagTypes||[]]},n={endpointDefinitions:{},batch(u){u()},apiUid:md(),extractRehydrationInfo:i,hasRehydrationInfo:No(u=>i(u)!=null)},a={injectEndpoints:l,enhanceEndpoints({addTagTypes:u,endpoints:c}){if(u)for(const d of u)s.tagTypes.includes(d)||s.tagTypes.push(d);if(c)for(const[d,h]of Object.entries(c))typeof h=="function"?h(n.endpointDefinitions[d]):Object.assign(n.endpointDefinitions[d]||{},h);return a}},o=r.map(u=>u.init(a,s,n));function l(u){const c=u.endpoints({query:d=>({...d,type:"query"}),mutation:d=>({...d,type:"mutation"})});for(const[d,h]of Object.entries(c)){if(u.overrideExisting!==!0&&d in n.endpointDefinitions){if(u.overrideExisting==="throw")throw new Error(mt(39));typeof process<"u";continue}n.endpointDefinitions[d]=h;for(const f of o)f.injectEndpoint(d,h)}return a}return a.injectEndpoints({endpoints:t.endpoints})}}function wr(r,...e){return Object.assign(r,...e)}var a3=({api:r,queryThunk:e,internalState:t})=>{const i=`${r.reducerPath}/subscriptions`;let s=null,n=null;const{updateSubscriptionOptions:a,unsubscribeQueryResult:o}=r.internalActions,l=(f,p)=>{var g,b,x;if(a.match(p)){const{queryCacheKey:y,requestId:v,options:S}=p.payload;return(g=f==null?void 0:f[y])!=null&&g[v]&&(f[y][v]=S),!0}if(o.match(p)){const{queryCacheKey:y,requestId:v}=p.payload;return f[y]&&delete f[y][v],!0}if(r.internalActions.removeQueryResult.match(p))return delete f[p.payload.queryCacheKey],!0;if(e.pending.match(p)){const{meta:{arg:y,requestId:v}}=p,S=f[b=y.queryCacheKey]??(f[b]={});return S[`${v}_running`]={},y.subscribe&&(S[v]=y.subscriptionOptions??S[v]??{}),!0}let m=!1;if(e.fulfilled.match(p)||e.rejected.match(p)){const y=f[p.meta.arg.queryCacheKey]||{},v=`${p.meta.requestId}_running`;m||(m=!!y[v]),delete y[v]}if(e.rejected.match(p)){const{meta:{condition:y,arg:v,requestId:S}}=p;if(y&&v.subscribe){const T=f[x=v.queryCacheKey]??(f[x]={});T[S]=v.subscriptionOptions??T[S]??{},m=!0}}return m},u=()=>t.currentSubscriptions,h={getSubscriptions:u,getSubscriptionCount:f=>{const m=u()[f]??{};return as(m)},isRequestSubscribed:(f,p)=>{var g;const m=u();return!!((g=m==null?void 0:m[f])!=null&&g[p])}};return(f,p)=>{if(s||(s=JSON.parse(JSON.stringify(t.currentSubscriptions))),r.util.resetApiState.match(f))return s=t.currentSubscriptions={},n=null,[!0,!1];if(r.internalActions.internal_getRTKQSubscriptions.match(f))return[!1,h];const m=l(t.currentSubscriptions,f);let g=!0;if(m){n||(n=setTimeout(()=>{const y=JSON.parse(JSON.stringify(t.currentSubscriptions)),[,v]=I1(s,()=>y);p.next(r.internalActions.subscriptionsUpdated(v)),s=y,n=null},500));const b=typeof f.type=="string"&&!!f.type.startsWith(i),x=e.rejected.match(f)&&f.meta.condition&&!!f.meta.arg.subscribe;g=!b&&!x}return[g,!1]}};function o3(r){for(const e in r)return!1;return!0}var l3=2147483647/1e3-1,u3=({reducerPath:r,api:e,queryThunk:t,context:i,internalState:s})=>{const{removeQueryResult:n,unsubscribeQueryResult:a,cacheEntriesUpserted:o}=e.internalActions,l=yr(a.match,t.fulfilled,t.rejected,o.match);function u(f){const p=s.currentSubscriptions[f];return!!p&&!o3(p)}const c={},d=(f,p,m)=>{var g;if(l(f)){const b=p.getState()[r];let x;if(o.match(f))x=f.payload.map(y=>y.queryDescription.queryCacheKey);else{const{queryCacheKey:y}=a.match(f)?f.payload:f.meta.arg;x=[y]}for(const y of x)h(y,(g=b.queries[y])==null?void 0:g.endpointName,p,b.config)}if(e.util.resetApiState.match(f))for(const[b,x]of Object.entries(c))x&&clearTimeout(x),delete c[b];if(i.hasRehydrationInfo(f)){const b=p.getState()[r],{queries:x}=i.extractRehydrationInfo(f);for(const[y,v]of Object.entries(x))h(y,v==null?void 0:v.endpointName,p,b.config)}};function h(f,p,m,g){const b=i.endpointDefinitions[p],x=(b==null?void 0:b.keepUnusedDataFor)??g.keepUnusedDataFor;if(x===1/0)return;const y=Math.max(0,Math.min(x,l3));if(!u(f)){const v=c[f];v&&clearTimeout(v),c[f]=setTimeout(()=>{u(f)||m.dispatch(n({queryCacheKey:f})),delete c[f]},y*1e3)}}return d},yg=new Error("Promise never resolved before cacheEntryRemoved."),c3=({api:r,reducerPath:e,context:t,queryThunk:i,mutationThunk:s,internalState:n})=>{const a=uh(i),o=uh(s),l=Ur(i,s),u={};function c(m,g,b){const x=u[m];x!=null&&x.valueResolved&&(x.valueResolved({data:g,meta:b}),delete x.valueResolved)}function d(m){const g=u[m];g&&(delete u[m],g.cacheEntryRemoved())}const h=(m,g,b)=>{const x=f(m);function y(v,S,T,w){const E=b[e].queries[S],A=g.getState()[e].queries[S];!E&&A&&p(v,w,S,g,T)}if(i.pending.match(m))y(m.meta.arg.endpointName,x,m.meta.requestId,m.meta.arg.originalArgs);else if(r.internalActions.cacheEntriesUpserted.match(m))for(const{queryDescription:v,value:S}of m.payload){const{endpointName:T,originalArgs:w,queryCacheKey:E}=v;y(T,E,m.meta.requestId,w),c(E,S,{})}else if(s.pending.match(m))g.getState()[e].mutations[x]&&p(m.meta.arg.endpointName,m.meta.arg.originalArgs,x,g,m.meta.requestId);else if(l(m))c(x,m.payload,m.meta.baseQueryMeta);else if(r.internalActions.removeQueryResult.match(m)||r.internalActions.removeMutationResult.match(m))d(x);else if(r.util.resetApiState.match(m))for(const v of Object.keys(u))d(v)};function f(m){return a(m)?m.meta.arg.queryCacheKey:o(m)?m.meta.arg.fixedCacheKey??m.meta.requestId:r.internalActions.removeQueryResult.match(m)?m.payload.queryCacheKey:r.internalActions.removeMutationResult.match(m)?Rn(m.payload):""}function p(m,g,b,x,y){const v=t.endpointDefinitions[m],S=v==null?void 0:v.onCacheEntryAdded;if(!S)return;const T={},w=new Promise(R=>{T.cacheEntryRemoved=R}),E=Promise.race([new Promise(R=>{T.valueResolved=R}),w.then(()=>{throw yg})]);E.catch(()=>{}),u[b]=T;const A=r.endpoints[m].select(v.type==="query"?g:b),M=x.dispatch((R,_,C)=>C),I={...x,getCacheEntry:()=>A(x.getState()),requestId:y,extra:M,updateCachedData:v.type==="query"?R=>x.dispatch(r.util.updateQueryData(m,g,R)):void 0,cacheDataLoaded:E,cacheEntryRemoved:w},O=S(g,I);Promise.resolve(O).catch(R=>{if(R!==yg)throw R})}return h},h3=({api:r,context:{apiUid:e},reducerPath:t})=>(i,s)=>{r.util.resetApiState.match(i)&&s.dispatch(r.internalActions.middlewareRegistered(e)),typeof process<"u"},d3=({reducerPath:r,context:e,context:{endpointDefinitions:t},mutationThunk:i,queryThunk:s,api:n,assertTagType:a,refetchQuery:o,internalState:l})=>{const{removeQueryResult:u}=n.internalActions,c=yr(Ur(i),yl(i)),d=yr(Ur(i,s),fs(i,s));let h=[];const f=(g,b)=>{c(g)?m($1(g,"invalidatesTags",t,a),b):d(g)?m([],b):n.util.invalidateTags.match(g)&&m(vd(g.payload,void 0,void 0,void 0,void 0,a),b)};function p(g){var b,x;for(const y in g.queries)if(((b=g.queries[y])==null?void 0:b.status)==="pending")return!0;for(const y in g.mutations)if(((x=g.mutations[y])==null?void 0:x.status)==="pending")return!0;return!1}function m(g,b){const x=b.getState(),y=x[r];if(h.push(...g),y.config.invalidationBehavior==="delayed"&&p(y))return;const v=h;if(h=[],v.length===0)return;const S=n.util.selectInvalidatedBy(x,v);e.batch(()=>{const T=Array.from(S.values());for(const{queryCacheKey:w}of T){const E=y.queries[w],A=l.currentSubscriptions[w]??{};E&&(as(A)===0?b.dispatch(u({queryCacheKey:w})):E.status!=="uninitialized"&&b.dispatch(o(E)))}})}return f},f3=({reducerPath:r,queryThunk:e,api:t,refetchQuery:i,internalState:s})=>{const n={},a=(h,f)=>{(t.internalActions.updateSubscriptionOptions.match(h)||t.internalActions.unsubscribeQueryResult.match(h))&&l(h.payload,f),(e.pending.match(h)||e.rejected.match(h)&&h.meta.condition)&&l(h.meta.arg,f),(e.fulfilled.match(h)||e.rejected.match(h)&&!h.meta.condition)&&o(h.meta.arg,f),t.util.resetApiState.match(h)&&c()};function o({queryCacheKey:h},f){const p=f.getState()[r],m=p.queries[h],g=s.currentSubscriptions[h];if(!m||m.status==="uninitialized")return;const{lowestPollingInterval:b,skipPollingIfUnfocused:x}=d(g);if(!Number.isFinite(b))return;const y=n[h];y!=null&&y.timeout&&(clearTimeout(y.timeout),y.timeout=void 0);const v=Date.now()+b;n[h]={nextPollTimestamp:v,pollingInterval:b,timeout:setTimeout(()=>{(p.config.focused||!x)&&f.dispatch(i(m)),o({queryCacheKey:h},f)},b)}}function l({queryCacheKey:h},f){const m=f.getState()[r].queries[h],g=s.currentSubscriptions[h];if(!m||m.status==="uninitialized")return;const{lowestPollingInterval:b}=d(g);if(!Number.isFinite(b)){u(h);return}const x=n[h],y=Date.now()+b;(!x||y<x.nextPollTimestamp)&&o({queryCacheKey:h},f)}function u(h){const f=n[h];f!=null&&f.timeout&&clearTimeout(f.timeout),delete n[h]}function c(){for(const h of Object.keys(n))u(h)}function d(h={}){let f=!1,p=Number.POSITIVE_INFINITY;for(let m in h)h[m].pollingInterval&&(p=Math.min(h[m].pollingInterval,p),f=h[m].skipPollingIfUnfocused||f);return{lowestPollingInterval:p,skipPollingIfUnfocused:f}}return a},p3=({api:r,context:e,queryThunk:t,mutationThunk:i})=>{const s=pd(t,i),n=fs(t,i),a=Ur(t,i),o={};return(u,c)=>{var d,h;if(s(u)){const{requestId:f,arg:{endpointName:p,originalArgs:m}}=u.meta,g=e.endpointDefinitions[p],b=g==null?void 0:g.onQueryStarted;if(b){const x={},y=new Promise((w,E)=>{x.resolve=w,x.reject=E});y.catch(()=>{}),o[f]=x;const v=r.endpoints[p].select(g.type==="query"?m:f),S=c.dispatch((w,E,A)=>A),T={...c,getCacheEntry:()=>v(c.getState()),requestId:f,extra:S,updateCachedData:g.type==="query"?w=>c.dispatch(r.util.updateQueryData(p,m,w)):void 0,queryFulfilled:y};b(m,T)}}else if(a(u)){const{requestId:f,baseQueryMeta:p}=u.meta;(d=o[f])==null||d.resolve({data:u.payload,meta:p}),delete o[f]}else if(n(u)){const{requestId:f,rejectedWithValue:p,baseQueryMeta:m}=u.meta;(h=o[f])==null||h.reject({error:u.payload??u.error,isUnhandledError:!p,meta:m}),delete o[f]}}},m3=({reducerPath:r,context:e,api:t,refetchQuery:i,internalState:s})=>{const{removeQueryResult:n}=t.internalActions,a=(l,u)=>{gd.match(l)&&o(u,"refetchOnFocus"),yd.match(l)&&o(u,"refetchOnReconnect")};function o(l,u){const c=l.getState()[r],d=c.queries,h=s.currentSubscriptions;e.batch(()=>{for(const f of Object.keys(h)){const p=d[f],m=h[f];if(!m||!p)continue;(Object.values(m).some(b=>b[u]===!0)||Object.values(m).every(b=>b[u]===void 0)&&c.config[u])&&(as(m)===0?l.dispatch(n({queryCacheKey:f})):p.status!=="uninitialized"&&l.dispatch(i(p)))}})}return a};function g3(r){const{reducerPath:e,queryThunk:t,api:i,context:s}=r,{apiUid:n}=s,a={invalidateTags:Ct(`${e}/invalidateTags`)},o=d=>d.type.startsWith(`${e}/`),l=[h3,u3,d3,f3,c3,p3];return{middleware:d=>{let h=!1;const p={...r,internalState:{currentSubscriptions:{}},refetchQuery:c,isThisApiSliceAction:o},m=l.map(x=>x(p)),g=a3(p),b=m3(p);return x=>y=>{if(!E1(y))return x(y);h||(h=!0,d.dispatch(i.internalActions.middlewareRegistered(n)));const v={...d,next:x},S=d.getState(),[T,w]=g(y,v,S);let E;if(T?E=x(y):E=w,d.getState()[e]&&(b(y,v,S),o(y)||s.hasRehydrationInfo(y)))for(const A of m)A(y,v,S);return E}},actions:a};function c(d){return r.api.endpoints[d.endpointName].initiate(d.originalArgs,{subscribe:!1,forceRefetch:!0})}}var vg=Symbol(),y3=({createSelector:r=fd}={})=>({name:vg,init(e,{baseQuery:t,tagTypes:i,reducerPath:s,serializeQueryArgs:n,keepUnusedDataFor:a,refetchOnMountOrArgChange:o,refetchOnFocus:l,refetchOnReconnect:u,invalidationBehavior:c},d){nN();const h=L=>(typeof process<"u",L);Object.assign(e,{reducerPath:s,endpoints:{},internalActions:{onOnline:yd,onOffline:U1,onFocus:gd,onFocusLost:B1},util:{}});const{queryThunk:f,mutationThunk:p,patchQueryData:m,updateQueryData:g,upsertQueryData:b,prefetch:x,buildMatchThunkActions:y}=r3({baseQuery:t,reducerPath:s,context:d,api:e,serializeQueryArgs:n,assertTagType:h}),{reducer:v,actions:S}=i3({context:d,queryThunk:f,mutationThunk:p,serializeQueryArgs:n,reducerPath:s,assertTagType:h,config:{refetchOnFocus:l,refetchOnReconnect:u,refetchOnMountOrArgChange:o,keepUnusedDataFor:a,reducerPath:s,invalidationBehavior:c}});wr(e.util,{patchQueryData:m,updateQueryData:g,upsertQueryData:b,prefetch:x,resetApiState:S.resetApiState,upsertQueryEntries:S.cacheEntriesUpserted}),wr(e.internalActions,S);const{middleware:T,actions:w}=g3({reducerPath:s,context:d,queryThunk:f,mutationThunk:p,api:e,assertTagType:h});wr(e.util,w),wr(e,{reducer:v,middleware:T});const{buildQuerySelector:E,buildMutationSelector:A,selectInvalidatedBy:M,selectCachedArgsForQuery:I}=s3({serializeQueryArgs:n,reducerPath:s,createSelector:r});wr(e.util,{selectInvalidatedBy:M,selectCachedArgsForQuery:I});const{buildInitiateQuery:O,buildInitiateMutation:R,getRunningMutationThunk:_,getRunningMutationsThunk:C,getRunningQueriesThunk:D,getRunningQueryThunk:k}=t3({queryThunk:f,mutationThunk:p,api:e,serializeQueryArgs:n,context:d});return wr(e.util,{getRunningMutationThunk:_,getRunningMutationsThunk:C,getRunningQueryThunk:k,getRunningQueriesThunk:D}),{name:vg,injectEndpoint(L,B){var U;const F=e;(U=F.endpoints)[L]??(U[L]={}),j1(B)?wr(F.endpoints[L],{name:L,select:E(L,B),initiate:O(L,B)},y(f,L)):ZN(B)&&wr(F.endpoints[L],{name:L,select:A(),initiate:R(L)},y(p,L))}}}});function v3(r){return r.type==="query"}function b3(r){return r.type==="mutation"}function Ma(r,...e){return Object.assign(r,...e)}function Ou(r){return r.replace(r[0],r[0].toUpperCase())}var Bi=WeakMap?new WeakMap:void 0,x3=({endpointName:r,queryArgs:e})=>{let t="";const i=Bi==null?void 0:Bi.get(e);if(typeof i=="string")t=i;else{const s=JSON.stringify(e,(n,a)=>(a=typeof a=="bigint"?{$bigint:a.toString()}:a,a=Jt(a)?Object.keys(a).sort().reduce((o,l)=>(o[l]=a[l],o),{}):a,a));Jt(e)&&(Bi==null||Bi.set(e,s)),t=s}return`${r}(${t})`},Du=Symbol();function bg(r,e,t,i){const s=N.useMemo(()=>({queryArgs:r,serialized:typeof r=="object"?e({queryArgs:r,endpointDefinition:t,endpointName:i}):r}),[r,e,t,i]),n=N.useRef(s);return N.useEffect(()=>{n.current.serialized!==s.serialized&&(n.current=s)},[s]),n.current.serialized===s.serialized?n.current.queryArgs:r}function Lu(r){const e=N.useRef(r);return N.useEffect(()=>{rn(e.current,r)||(e.current=r)},[r]),rn(e.current,r)?e.current:r}var _3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w3=_3(),S3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",E3=S3(),T3=()=>w3||E3?N.useLayoutEffect:N.useEffect,A3=T3(),C3=r=>r.isUninitialized?{...r,isUninitialized:!1,isFetching:!0,isLoading:r.data===void 0,status:F1.pending}:r;function P3({api:r,moduleOptions:{batch:e,hooks:{useDispatch:t,useSelector:i,useStore:s},unstable__sideEffectsInRender:n,createSelector:a},serializeQueryArgs:o,context:l}){const u=n?p=>p():N.useEffect;return{buildQueryHooks:h,buildMutationHook:f,usePrefetch:d};function c(p,m,g){if(m!=null&&m.endpointName&&p.isUninitialized){const{endpointName:T}=m,w=l.endpointDefinitions[T];o({queryArgs:m.originalArgs,endpointDefinition:w,endpointName:T})===o({queryArgs:g,endpointDefinition:w,endpointName:T})&&(m=void 0)}let b=p.isSuccess?p.data:m==null?void 0:m.data;b===void 0&&(b=p.data);const x=b!==void 0,y=p.isLoading,v=(!m||m.isLoading||m.isUninitialized)&&!x&&y,S=p.isSuccess||y&&x;return{...p,data:b,currentData:p.data,isFetching:y,isLoading:v,isSuccess:S}}function d(p,m){const g=t(),b=Lu(m);return N.useCallback((x,y)=>g(r.util.prefetch(p,x,{...b,...y})),[p,g,b])}function h(p){const m=(x,{refetchOnReconnect:y,refetchOnFocus:v,refetchOnMountOrArgChange:S,skip:T=!1,pollingInterval:w=0,skipPollingIfUnfocused:E=!1}={})=>{const{initiate:A}=r.endpoints[p],M=t(),I=N.useRef(void 0);if(!I.current){const F=M(r.internalActions.internal_getRTKQSubscriptions());I.current=F}const O=bg(T?li:x,x3,l.endpointDefinitions[p],p),R=Lu({refetchOnReconnect:y,refetchOnFocus:v,pollingInterval:w,skipPollingIfUnfocused:E}),_=N.useRef(!1),C=N.useRef(void 0);let{queryCacheKey:D,requestId:k}=C.current||{},L=!1;D&&k&&(L=I.current.isRequestSubscribed(D,k));const B=!L&&_.current;return u(()=>{_.current=L}),u(()=>{B&&(C.current=void 0)},[B]),u(()=>{var $;const F=C.current;if(typeof process<"u",O===li){F==null||F.unsubscribe(),C.current=void 0;return}const U=($=C.current)==null?void 0:$.subscriptionOptions;if(!F||F.arg!==O){F==null||F.unsubscribe();const z=M(A(O,{subscriptionOptions:R,forceRefetch:S}));C.current=z}else R!==U&&F.updateSubscriptionOptions(R)},[M,A,S,O,R,B]),N.useEffect(()=>()=>{var F;(F=C.current)==null||F.unsubscribe(),C.current=void 0},[]),N.useMemo(()=>({refetch:()=>{var F;if(!C.current)throw new Error(mt(38));return(F=C.current)==null?void 0:F.refetch()}}),[])},g=({refetchOnReconnect:x,refetchOnFocus:y,pollingInterval:v=0,skipPollingIfUnfocused:S=!1}={})=>{const{initiate:T}=r.endpoints[p],w=t(),[E,A]=N.useState(Du),M=N.useRef(void 0),I=Lu({refetchOnReconnect:x,refetchOnFocus:y,pollingInterval:v,skipPollingIfUnfocused:S});u(()=>{var C,D;const _=(C=M.current)==null?void 0:C.subscriptionOptions;I!==_&&((D=M.current)==null||D.updateSubscriptionOptions(I))},[I]);const O=N.useRef(I);u(()=>{O.current=I},[I]);const R=N.useCallback(function(_,C=!1){let D;return e(()=>{var k;(k=M.current)==null||k.unsubscribe(),M.current=D=w(T(_,{subscriptionOptions:O.current,forceRefetch:!C})),A(_)}),D},[w,T]);return N.useEffect(()=>()=>{var _;(_=M==null?void 0:M.current)==null||_.unsubscribe()},[]),N.useEffect(()=>{E!==Du&&!M.current&&R(E,!0)},[E,R]),N.useMemo(()=>[R,E],[R,E])},b=(x,{skip:y=!1,selectFromResult:v}={})=>{const{select:S}=r.endpoints[p],T=bg(y?li:x,o,l.endpointDefinitions[p],p),w=N.useRef(void 0),E=N.useMemo(()=>a([S(T),(R,_)=>_,R=>T],c,{memoizeOptions:{resultEqualityCheck:rn}}),[S,T]),A=N.useMemo(()=>v?a([E],v,{devModeChecks:{identityFunctionCheck:"never"}}):E,[E,v]),M=i(R=>A(R,w.current),rn),I=s(),O=E(I.getState(),w.current);return A3(()=>{w.current=O},[O]),M};return{useQueryState:b,useQuerySubscription:m,useLazyQuerySubscription:g,useLazyQuery(x){const[y,v]=g(x),S=b(v,{...x,skip:v===Du}),T=N.useMemo(()=>({lastArg:v}),[v]);return N.useMemo(()=>[y,S,T],[y,S,T])},useQuery(x,y){const v=m(x,y),S=b(x,{selectFromResult:x===li||y!=null&&y.skip?void 0:C3,...y}),{data:T,status:w,isLoading:E,isSuccess:A,isError:M,error:I}=S;return N.useDebugValue({data:T,status:w,isLoading:E,isSuccess:A,isError:M,error:I}),N.useMemo(()=>({...S,...v}),[S,v])}}}function f(p){return({selectFromResult:m,fixedCacheKey:g}={})=>{const{select:b,initiate:x}=r.endpoints[p],y=t(),[v,S]=N.useState();N.useEffect(()=>()=>{v!=null&&v.arg.fixedCacheKey||v==null||v.reset()},[v]);const T=N.useCallback(function(U){const $=y(x(U,{fixedCacheKey:g}));return S($),$},[y,x,g]),{requestId:w}=v||{},E=N.useMemo(()=>b({fixedCacheKey:g,requestId:v==null?void 0:v.requestId}),[g,v,b]),A=N.useMemo(()=>m?a([E],m):E,[m,E]),M=i(A,rn),I=g==null?v==null?void 0:v.arg.originalArgs:void 0,O=N.useCallback(()=>{e(()=>{v&&S(void 0),g&&y(r.internalActions.removeMutationResult({requestId:w,fixedCacheKey:g}))})},[y,g,v,w]),{endpointName:R,data:_,status:C,isLoading:D,isSuccess:k,isError:L,error:B}=M;N.useDebugValue({endpointName:R,data:_,status:C,isLoading:D,isSuccess:k,isError:L,error:B});const F=N.useMemo(()=>({...M,originalArgs:I,reset:O}),[M,I,O]);return N.useMemo(()=>[T,F],[T,F])}}}var R3=Symbol(),I3=({batch:r=GD,hooks:e={useDispatch:$D,useSelector:OD,useStore:d1},createSelector:t=fd,unstable__sideEffectsInRender:i=!1,...s}={})=>({name:R3,init(n,{serializeQueryArgs:a},o){const l=n,{buildQueryHooks:u,buildMutationHook:c,usePrefetch:d}=P3({api:n,moduleOptions:{batch:r,hooks:e,unstable__sideEffectsInRender:i,createSelector:t},serializeQueryArgs:a,context:o});return Ma(l,{usePrefetch:d}),Ma(o,{batch:r}),{injectEndpoint(h,f){if(v3(f)){const{useQuery:p,useLazyQuery:m,useLazyQuerySubscription:g,useQueryState:b,useQuerySubscription:x}=u(h);Ma(l.endpoints[h],{useQuery:p,useLazyQuery:m,useLazyQuerySubscription:g,useQueryState:b,useQuerySubscription:x}),n[`use${Ou(h)}Query`]=p,n[`useLazy${Ou(h)}Query`]=m}else if(b3(f)){const p=c(h);Ma(l.endpoints[h],{useMutation:p}),n[`use${Ou(h)}Mutation`]=p}}}}}),M3=n3(y3(),I3());const dh=M3({baseQuery:KN({baseUrl:"/homework-assistance/"}),endpoints:()=>({})}),O3=ud({[dh.reducerPath]:dh.reducer}),D3=()=>TN({reducer:O3,middleware:r=>r().concat(dh.middleware)}),L3=document.getElementById("root"),N3=n1(L3),F3=D3(),k3=new Jb({queryCache:new Og({onError:r=>{r==="0090"&&window.location.replace("/auth/login")}}),defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1}}});N3.render(P.jsxs(mx,{client:k3,children:[P.jsx(UD,{store:F3,children:P.jsx(nO,{params:{app:"appointments"},children:P.jsx(K1,{router:HL})})}),P.jsx(vD,{initialIsOpen:!1})]}));export{P as j};
